!function(e,t){"use strict";angular.module("adf.widget.getphd",["adf.provider","llp.extract","fa.droppable","llp.parsetsv","roar","textSizeSlider","llp.pdf","LocalStorageModule","llp.extractpdf","firebase","ui.router","commonServices","xeditable","ui.tree","ngAnimate","ngAnnotateText","ngDialog","ngSanitize","pdf","phd","toastr","mentio","lionlawlabs","diff","door3.css","checklist-model","authentication","angular-md5","angular.filter","roarmap","ngFileUpload"]).config(["dashboardProvider","localStorageServiceProvider",function(e,t){t.setPrefix("adf.getphd"),e.widget("carousel",{title:"Carousel",description:"Display items in a carousel",templateUrl:"{widgetsPath}/getphd/src/gallery.html",icon:"fa-picture",iconurl:"img/lexlab.svg",styleClass:"info ",frameless:!1,reload:!0,controller:"GalleryCarouselController",controllerAs:"gallery",edit:{templateUrl:"{widgetsPath}/getphd/src/editgallery.html",controller:"GalleryCarouselController",controllerAs:"gallery",modalSize:"lg",reload:!0}}).widget("gallery",{title:"Gallery",description:"Plain Image with thumnnails & caption",templateUrl:"{widgetsPath}/getphd/src/galleryplain.html",icon:"fa-picture",iconurl:"img/lexlab.svg",styleClass:"info ",frameless:!1,reload:!0,controller:"GalleryController",controllerAs:"gallery",edit:{templateUrl:"{widgetsPath}/getphd/src/editgalleryplain.html",controller:"GalleryController",controllerAs:"gallery",modalSize:"lg",reload:!0}}).widget("getphd",{title:"+PhD",description:"import a patent prosecution history",templateUrl:"{widgetsPath}/getphd/src/view.html",controller:"MainCtrl",controllerAs:"main",frameless:!0,reload:!1,icon:"fa-ge",iconurl:"img/logolong.png",styleClass:"primary panel panel-primary",edit:{templateUrl:"{widgetsPath}/getphd/src/edit.html",controller:"MainCtrl",controllerAs:"main",modalSize:"lg",reload:!0},resolve:{config:["config","$firebaseArray","$rootScope","FIREBASE_URL",function(e,t,n,i){if(e.id)return e;var a=t(new Firebase(i+"content/"));return a.$add({name:"curation"}).then(function(t){var n=t.key();return t.update({id:n,ispublished:!1,content_type:"getphd",templateUrl:"{widgetsPath}/getphd/src/view.html",timestamp:Firebase.ServerValue.TIMESTAMP}),e.id=n,e}),e}]}})}]).constant("FIREBASE_URL","https://lexlab.firebaseio.com/").controller("MainCtrl",["Collection","extract","fileReader","$http","parseTSV","$roarmap","$q","$scope","config","PHD","localStorageService","extractpdf","pdfToPlainText","$patentsearch","$log","FileUploader","$publish","$pdftotxt","$timeout","toastr","$rootScope","$stateParams","$location","$ACTIVEROAR","$dashboards","$interval","Collections","$compile","$templateCache",function(e,t,n,i,a,l,o,r,s,c,d,p,u,f,g,h,m,b,v,y,w,x,C,A,P,S,D,k,I){var E=this;E.size="lg",r.collapsereport=!1,E.collapse=function(){r.collapsereport=!r.collapsereport};var s=r.$parent.config||r.$parent.$parent.config,c=e(s.id)||e(s.appnum);c.$loaded().then(function(e){e.$bindTo(r,"phd"),angular.isUndefined(e.file)?E.showupload=!0:(E.showupload=!1,i.get(e.patent.text).then(function(e){return E.text=e.data}))}),E.$ACTIVEROAR=A,E.tabs=[{isActive:!0,disabled:!1},{isActive:!1,disabled:!1},{isActive:!1,disabled:!1}],r.export2collection=function(t){var n=x.pId,i=e(n);i.$loaded().then(function(e){angular.isUndefined(e.roarlist)?(e.roarlist=new Array,e.roarlist.push(t),e.$save()):(e.roarlist.push(t),e.$save())})},r.publish=function(e){angular.forEach(e.roarmap.collections,function(e,t){r.export2collection(e),r.export2collection(t)}),r.export2collection(s.id),m(s.id,r.phd).then(function(e){alertify.success("link to post:"+e)})};var T={header:!0,skipEmptyLines:!0},O=r.uploader=new h({url:"/upload",autoUpload:!0,removeAfterUpload:!0});O.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<10}}),O.onWhenAddingFileFailed=function(e,t,n){console.info("onWhenAddingFileFailed",e,t,n)},O.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},O.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},O.onBeforeUploadItem=function(e){(!s.PNUM||s.PNUM<1e6)&&alertify.prompt("Please enter the Patent Number!"),console.info("onBeforeUploadItem",e),E.progress=0,E.bufferedfile=e,console.log(e),alertify.log("starting upload...")},O.onProgressItem=function(e,t){E.progress=t,10===t&&y.info("fetching remote resources..."),30===t&&y.info("loading relevant data schemas..."),55===t&&y.warning("compiling templates..."),75===t&&y.warning("starting the AI engine..."),40>=t?E.progresstype="danger":t>40&&66>t?E.progresstype="warning":t>97?E.progresstype="success":E.progresstype="info",console.info("onProgressItem",e,t)},O.onProgressAll=function(e){console.info("onProgressAll",e)},O.onSuccessItem=function(e,t,n,i){console.info("onSuccessItem",e,t,n,i),alertify.success(t),alertify.success("File uploaded!"),w.$broadcast("UPLOADCOMPLETE",t)},O.onErrorItem=function(e,t,n,i){console.info("onErrorItem",e,t,n,i),E.progress="failed",E.progresstype="danger"},O.onCancelItem=function(e,t,n,i){console.info("onCancelItem",e,t,n,i)},O.onCompleteItem=function(e,t,n,i){console.info("onCompleteItem",e,t,n,i),alertify.success(t)},O.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",O),E.phd={};s.appnum;E.parse=function(e){var t=o.defer();return angular.forEach(e,function(e,n){try{}catch(i){g.error(i)}finally{if("imagefile"===e.label)E.phd.imagefile=a(e.file,T),E.progresstwo++;else if("application"===e.label){var l=a(e.file,{skipEmptyLines:!0}),o={};angular.forEach(l,function(e,t){"Class / Subclass"==e[0]?o["Class Subclass"]=e[1]:o[e[0]]=e[1],E.phd.application=o}),E.progresstwo++}else"attorney"===e.label?(E.phd.attorney=a(e.file,{skipEmptyLines:!0}),E.progresstwo++):"foreign"===e.label?(E.phd.foreign=a(e.file,T,!1),E.progresstwo++):"continuity"===e.label?(E.phd.continuity=a(e.file,T,!1),E.progresstwo++):"transaction"===e.label?(E.phd.transaction=a(e.file,T,!1),E.progresstwo++):"README"===e.label?(E.info=e.file,E.progresstwo++):E.error="Unhandled case!";return t.resolve(E.phd)}}),t.promise},E.getfilehistory=function(e){E.spinner=!0,E.progress=0;var e=e,n="http://127.0.0.1:8080/",a="http://storage.googleapis.com/uspto-pair/applications/"+e+".zip",l={method:"GET",url:n+a,headers:{"Target-Endpoint":a}};i(l).then(function(n){E.file=n.data,console.log(n.data),t(n.data,e).then(function(e){console.log(e),E.file=e,E.parse(e).then(function(){E.spinner=!1})},function(e){E.error=e.message})})},E.remotezip=function(e,t){i.get("https://storage.googleapis.com/uspto-pair/applications/"+e+".zip").then(function(e){var t=new JSZip(e.data);E.handleFiles(t)})},E.buffer=function(e){E.bufferedfile=e},E.success=null,E.info=null,E.phd={},E.handleFiles=function(e){E.error=null,E.success=null,E.progresstwo=0,E.extractedfiles=0,p(e,s.APPNUM,E).then(function(e){g.info("Files extracted",e),alertify.log("Files extracted"),E.phd.file=e.tsvfiles,E.parse(e.tsvfiles).then(function(e){alertify.log("TSV Parsed"),f(E.phd.application,s.PNUM).then(function(t){E.phd.patent=t,l(e,E.phd,E).then(function(e){alertify.success("ROARmap built!"),E.finalize(E.phd,e)},function(e){console.log(e.message)})},function(e){console.log(e.message)})},function(e){console.log(e.message)})},function(e){console.log(e.messsage)})},function(e){console.log(e.message)},E.popdoc=function(e){var t=angular.element("<div/>").attr("class","issuedocpanel stacker"),n=I.get("{widgetsPath}/getphd/src/titleTemplate.html"),i=angular.element("<iframe/>").attr("height","680px").attr("src","https://lexlab.io/files/public/uspto/"+r.phd.appnum+"/"+r.phd.appnum+"-image_file_wrapper/"+e.Filename);angular.element("body").append(k(t.append(n).append(i))(r)),$(".issuedocpanel").draggable({stack:".stacker",handle:"h4"}).resizable()},E.finalize=function(t,n){var a=(D(),angular.copy(t.application["Application Number"]).replace("/","").replace(",","").replace(",","")),l=e(r.phd.id).$ref(),o=e(A.page),s=o.$ref(),c=e(x.pId).$ref();t.appnum=a,t.media="https://lexlab.io/files/public/uspto/index#?app="+a,t.title="PhD for "+(t.patent.number||t.application["Patent Number"]),t.styleClass="Applicant",t.rid="PHD",d.set(t.application["Application Number"],t),i.post("/getphd/store/"+a,t),l.update(t),s.update({styleClass:"Applicant",title:"PhD Report for US "+(t.patent.number||t.application["Patent Number"])}),angular.forEach(n,function(n,i){var a=e(n).$ref();a.update({media:t.patent.media})}),s.child("roarlist").child(n[0]).set(n[0]),c.child("roarlist").child(n[1]).set(n[1]),c.child("roarlist").child(n[2]).set(n[2]),c.child("roarlist").child(n[3]).set(n[3]),e(r.phd.id).$loaded().then(function(e){var n=angular.copy(e.rows);s.child("rows").set(n),E.showupload=!1,alertify.alert('<div class="card card-block card-fancy"><div class="card-header"><h1 class="card-title">Prosecution History Digest for US '+t.patent.number+'</h1></div><div class="card-block"><h6 class="card-text lead">All files have been successfully processed by LEO and delivered to your account for review.</h6></div></div>')})},E.pdFF=function(e){var t=o.defer();return angular.forEach(e,function(e,n){return e&&e.name.indexOf(".pdf")>-1?(u(e).then(function(e){r.phd.file.push(e)}),t.resolve(pdf)):t.reject("not a pdf")}),t.promise}}]).directive("ffFileSelect",[function(){return{restrict:"A",controller:"MainCtrl",controllerAs:"main",bindToController:!0,scope:!1,link:function(e,t,n,i){var a=i;t.on("change",function(e){a.file=(e.srcElement||e.target).files[0],a.getFile()})}}}]).factory("$patentsearch",["$q","filepickerService",function(e,t){return function(t,n){function i(e,t){var n=t||angular.copy(e["Patent Number"]).replace(",","").replace(",",""),i="https://patentimages.storage.googleapis.com/pdfs/US"+n+".pdf",l={number:n,media:i},o=function(e){filepicker.storeUrl("https://www.google.com/patents/US"+e,{},function(e){return r(e)})},r=function(e){filepicker.convert(e,{format:"txt"},function(e){return l.googletext=e.url})};filepicker.storeUrl(i.toString(),{filename:"US"+n+".pdf"},function(t){var i={};i.title=e["Title of Invention"]||null,i.number=n,i.media=t.url,i.google="https://www.google.com/patents/US"+n,i.rid="P1","-"!==e["Issue Date of Patent"]?i.date=e["Issue Date of Patent"]:i.date="1899-12-31",i.styleClass="NOA",i.name="US"+n,i.description=e["Title of Invention"],o(i.number),filepicker.convert(t,{format:"txt"},function(e){return i.txt=e.url,a.resolve(i)})})}var a=e.defer();return i(t,n),a.promise}}]).factory("$pdftotxt",["$q","filepickerService","Collection",function(e,t,n){return function(t){function i(e){var t=e.roarmap.collections[1].id||e.roarmap.collections[1];return n(t).$loaded().then(function(e){var t=e.roarlist;angular.forEach(t,function(e,t){n(t).$loaded().then(function(e){filepicker.storeUrl(e.selflink,{filename:e.filename},function(t){filepicker.convert(t,{format:"txt"},function(t){e.txt=t.url,e.$save(),alertify.success("text file added for"+e.title)})})})})}),a.resolve(e)}var a=e.defer();return i(t),a.promise}}]).directive("uploadQ",["FileUploader",function(e){return{restrict:"EA",template:'<div class="card"><input type="file" nv-file-select="" uploader="uploader" multiple /> <h3>Upload queue</h3> <p>Queue length: {{ uploader.queue.length }}</p> <table class="table"> <thead> <tr> <th width="50%">Name</th> <th ng-show="uploader.isHTML5">Size</th> <th ng-show="uploader.isHTML5">Progress</th> <th>Status</th> <th>Actions</th> </tr> </thead> <tbody> <tr ng-repeat="item in uploader.queue"> <td><strong>{{ item.file.name }}</strong></td> <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td> <td ng-show="uploader.isHTML5"> <div class="progress" style="margin-bottom: 0;"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </td> <td class="text-center"> <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span> </td> <td nowrap> <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"> <span class="glyphicon glyphicon-upload"></span> Upload </button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"> <span class="glyphicon glyphicon-ban-circle"></span> Cancel </button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"> <span class="glyphicon glyphicon-trash"></span> Remove </button> </td> </tr> </tbody> </table> <div> <div> Queue progress: <div class="progress" style=""> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div> </div> </div> <button type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"> <span class="glyphicon glyphicon-upload"></span> Upload all </button> <button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading"> <span class="glyphicon glyphicon-ban-circle"></span> Cancel all </button> <button type="button" class="btn btn-danger btn-s" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length"> <span class="glyphicon glyphicon-trash"></span> Remove all </button> </div> </div>',controller:"AppController",controllerAs:"uploader",bindToController:!0,scope:{url:"@"},link:function(e,t,n,i){}}}]).controller("AppController",["$scope","FileUploader",function(e,t){var n=e.uploader=new t({url:e.url||"https://lexlab.io/upload",autoUpload:!0});n.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<10}}),n.onWhenAddingFileFailed=function(e,t,n){console.info("onWhenAddingFileFailed",e,t,n)},n.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},n.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},n.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},n.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},n.onProgressAll=function(e){console.info("onProgressAll",e)},n.onSuccessItem=function(e,t,n,i){console.info("onSuccessItem",e,t,n,i)},n.onErrorItem=function(e,t,n,i){console.info("onErrorItem",e,t,n,i)},n.onCancelItem=function(e,t,n,i){console.info("onCancelItem",e,t,n,i)},n.onCompleteItem=function(e,t,n,i){console.info("onCompleteItem",e,t,n,i)},n.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",n)}]).controller("GalleryCarouselController",["$scope","config","Collection","$rootScope","$ACTIVEROAR",function(e,t,n,i,a){var l=this,t=t;e.config=t,l.slides=[],t.id?n(t.id).$loaded().then(function(e){angular.forEach(e.roarlist,function(e,t){n(e).$loaded().then(function(e){l.slides.push(angular.copy(e))})})}):(n(a.page).$loaded().then(function(e){angular.forEach(e.roarlist,function(e,t){n(e).$loaded().then(function(e){l.slides.push(angular.copy(e))})})}),l.slides.push({title:"DemoSlide",media:"/llp_core/img/lexlab.svg"}),l.slides.push({title:"PatentPhD",media:"/llp_core/img/logolong.png"}))}]).controller("GalleryCarousel",["",function(){}]),angular.module("adf.widget.getphd").run(["$templateCache",function(e){e.put("{widgetsPath}/getphd/src/edit.html",'<form role=form><div class=form-group><label for=sample>Application #</label> <input type=text class=form-control id=sample ng-model=config.appnum placeholder="Enter Application #"></div></form>'),e.put("{widgetsPath}/getphd/src/editgallery.html","<form role=form><div class=form-group><label for=sample>Interval, in milliseconds:</label> <input type=number class=form-control ng-model=config.interval><br>Enter a negative number or 0 to stop the interval.</div><div class=form-group><label>Disable Slide Looping</label> <input type=checkbox ng-model=config.nowrap></div><div class=form-group><label>Pause on Hover?</label> <input type=checkbox ng-model=config.pauseonhover></div><div class=form-group><label>Disable Transition</label> <input type=checkbox ng-model=config.transition></div></form>"),e.put("{widgetsPath}/getphd/src/gallery.html",'<div style="min-height: 305px"><uib-carousel interval={{config.interval}} no-pause={{config.pauseonhover}} no-transition={{config.transition}} no-wrap={{config.nowrap}}><uib-slide ng-repeat="slide in gallery.slides" active={slide.active} index=slide.index><img ng-src={{slide.media}} style=margin:auto;><div class=carousel-caption><h4>Slide {{slide.$index}}</h4><p>{{slide.title}}</p></div></uib-slide></uib-carousel></div>'),e.put("{widgetsPath}/getphd/src/titleTemplate.html",'<div class=card-header style=z-index:1;padding:0px;position:absolute;><h4 class="bs-callout bs-callout-primary"><span style=color:steelblue;>{{config.title || roarevent.title}}</span><br><div class=row style=width:100%;><small>{{roarevent.date | date}}</small> <span class=pull-right style=position:absolute;right:5px;font-size:12px;><a title=notes ng-click=note(roarevent)><i class="fa fa-pencil" style=color:steelblue;></i></a><a title="expand widget" ng-show="options.collapsible && widgetState.isCollapsed" ng-click="widgetState.isCollapsed = !widgetState.isCollapsed"><i class="fa fa-plus" style=color:steelblue;></i></a> <a title="copy to clipboard" ng-click=edit(roarevent.id)><i class="fa fa-copy" style=color:steelblue;></i></a> <a title="fullscreen widget" ng-click=openFullScreen(roarevent.id) ng-show="options.maximizable || true"><i class="fa fa-expand" style=color:steelblue;></i></a> <a title="remove widget" ng-click=remove() onclick="$(\'.issuedocpanel\').remove()"><i class="fa fa-close" style=color:steelblue;></i></a></span></div></h4></div>'),e.put("{widgetsPath}/getphd/src/view.html",'<div ng-controller="MainCtrl as main"><div class="card card-primary card-block btn-glass drop-target" nv-file-drop uploader=uploader drop-files=handleFiles(files) style="border: 2px dashed blue;margin: 5px;" ng-if=main.showupload><div ng-controller=pageslideCtrl><button class="row btn btn-glass btn-primary img img-rounded" style=width:100%;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:center;flex-direction:row; ng-click=toggle() ng-class="{\'btn-success\': (main.progress == 100),\'btn-danger\':(main.progress === \'failed\')}"><uib-progressbar class="btn-glass fa fa-3x active stripped" ng-class="{\'active\':(main.progress < 100)}" ng-if=main.progress value=main.progress style=height:40px;margin:auto;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;align-self:stretch; type={{main.progresstype}}></uib-progressbar><i class="fa fa-upload fa-3x">{{main.progress}}<span ng-show=main.progress>%</span></i> <img src=https://lexlab.firebaseapp.com/img/GoldLogoLong.svg class="pop img img-rounded pull-right" style=max-height:100px; ng-if=!main.progress></button><div class="row btn btn-glass btn-info" style=position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:center;flex-direction:row; ng-if=main.progresstwo><uib-progressbar class="btn-glass fa fa-3x active striped" ng-class="{\'active\':(main.progresstwo < 100)}" value=main.progresstwo max=main.extractedfiles style=height:40px;margin:auto;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;align-self:stretch; type={{main.progresstype}}></uib-progressbar><i class="fa fa-fw fa-3x fa-spinner fa-spin"></i><i class="fa fa-3x">{{main.progresstwo}}/{{main.extractedfiles}}</i></div><div pageslide ps-open=checked ps-key-listener=true ps-side=left ps-class=card-dark><div ng-include="\'/getphdwidget/src/phd/step-1.html\'"></div><div ng-include="\'/getphdwidget/src/phd/step-2.html\'"></div><button class="btn btn-dark" ng-click=toggle()>Close</button></div></div></div><div class="card card-fancy card-rounded card-block card-thick" style="text-align: left;color: #444;" ng-if=phd.file><button class="alert btn-glass btn-primary img card-rounded row" style="position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:center;justify-content:space-between;flex-direction:row;background-color:#35688F;padding:2px;box-shadow:inset 10px 2px 50px rgba(0,0,0,0.5);" ng-click=main.collapse()><div style=display:flex;justify-content:flex-end;flex-direction:column;align-content:flex-end;vertical-align:middle;align-items:flex-end;><h4 class="card-title ng-binding display-4" style="margin-bottom:0;color: #fff;">US {{phd.patent.number | number:0 }}</h4><h5 class="card-subtitle ng-binding" style=color:#ddd;><span class=lead>USSN {{phd.application[\'Application Number\']}}</span></h5></div><img src=/llp_core/img/GoldLion.svg class="img lionlogofilter" style="width:75px;height: auto;"><div style=display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;><img src=/llp_core/img/GoldLogoLong.svg class=img style=height:45px;> <img src=/llp_core/img/GoldPhdLogoLong.svg class=img style=height:25px;padding-left:2px;></div></button><div uib-collapse=collapsereport class="card clearfix" style=padding:0;margin:0;><blockquote><h4>{{phd.application[\'Title of Invention\']}}</h4><p style=font-size:10px;><cite>{{phd.application[\'First Named Inventor\']}} <small><emphasis>Issued&nbsp&nbsp&nbsp&nbsp<span editable-text="phd.application[\'Issue Date of Patent\']">{{phd.application[\'Issue Date of Patent\']}}</span></emphasis></small></cite></p></blockquote><uib-tabset class=tabbable justified=true type=pills><uib-tab heading="PTO Metadata" class=btn-glass active=main.tabs[0].isActive disabled=main.tabs[0].disabled select="main.tabs[0].isActive = true" deselect="main.tabs[0].isActive = false"><uib-tab-content ng-if=main.tabs[0].isActive><uib-tabset class="tabbable tabs-left"><uib-tab><uib-tab-heading>USSN {{phd.application[\'Application Number\']}}</uib-tab-heading><uib-tabset class=tabbable><uib-tab ng-repeat="file in phd.file" heading="{{file.label | uppercase}}"><uib-tab-content><pre class="card card-block card-fancy" ng-bind=file.file></pre></uib-tab-content></uib-tab></uib-tabset></uib-tab><uib-tab ng-if=phd.application><uib-tab-heading ng-style>APPLICATION</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="(key, value) in phd.application"><td><strong>{{::key}}</strong></td><td>{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab class=text-info ng-if=phd.attorney><uib-tab-heading ng-style>ATTORNEY</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="line in phd.attorney"><td ng-repeat="value in line">{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab class=text-success ng-if=phd.continuity><uib-tab-heading ng-style>CONTINUITY</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-condensed table-hover table-responsive"><thead><tr><th><strong>Description</strong></th><th><strong>Parent Filing or 371(c) Date</strong></th><th><strong>Parent Number</strong></th><th><strong>Parent Status</strong></th><th><strong>Patent Number</strong></th></tr></thead><tbody><tr ng-repeat="line in phd.continuity"><td>{{::line[\'Description\']}}</td><td>{{::line[\'Parent Filing or 371(c) Date\']}}</td><td>{{::line[\'Parent Number\']}}</td><td>{{::line[\'Parent Status\']}}</td><td><a ng-href="https://patentimages.storage.googleapis.com/pdfs/US{{::line[\'Patent Number\'].replace(\',\',\'\').replace(\',\',\'\')+\'.pdf\'}}" target=_blank ng-if="line[\'Patent Number\'] !== \'\'">{{::line[\'Patent Number\']}}</a></td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.foreign><uib-tab-heading class=text-warning ng-style>FOREIGN PRIORITY</uib-tab-heading><uib-tab-content><table class="table table-striped table-condensed table-hover table-responsive"><thead><tr><th><strong>Country</strong></th><th><strong>Priority</strong></th><th><strong>Priority Date</strong></th></tr></thead><tbody><tr ng-repeat="p in phd.foreign"><td ng-bind="::p[\'Country\']"></td><td ng-bind="::p[\'Priority\']"></td><td ng-bind="::p[\'Priority Date\'] | date"></td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.transaction><uib-tab-heading ng-style>TRANSACTION</uib-tab-heading><uib-tab-content><table class="table table-striped table-hover table-condensed table-responsive"><thead><tr><th><strong>Date</strong></th><th><strong>Transaction Description</strong></th></tr></thead><tbody><tr ng-repeat="trans in phd.transaction"><td>{{::trans[\'Date\']}}</td><td>{{::trans[\'Transaction Description\']}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.imagefile><uib-tab-heading ng-style>IMAGE FILE WRAPPER</uib-tab-heading><uib-tab-content><input type=text ng-model=main.query placeholder=search... class=pull-right><table class="table table-hover table-condensed table-responsive"><thead><tr><th ng-click="main.dog = \'Mail\\ Room\\ Date\'; maybe = !maybe"><strong>Mail Room Date<i class=fa ng-if="main.dog == \'Mail Room Date\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Code\'; maybe = !maybe"><strong>Document Code<i class=fa ng-if="main.dog == \'Document Code\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Description\'; maybe = !maybe"><strong>Document Description<i class=fa ng-if="main.dog == \'Document Description\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Category\'; maybe = !maybe"><strong>Document Category<i class=fa ng-if="main.dog == \'Document Category\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Page\\ Count\'; maybe = !maybe"><strong>Page Count<i class=fa ng-if="main.dog == \'Page Count\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Filename\'; maybe = !maybe"><strong>Filename<i class=fa ng-if="main.dog == \'Filename\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th></tr></thead><tbody><tr ng-repeat="roarevent in phd.imagefile | filter: main.query | orderBy: main.dog : maybe"><td ng-bind="roarevent[\'Mail Room Date\']"></td><td ng-bind="roarevent[\'Document Code\']"></td><td ng-bind="roarevent[\'Document Description\']"></td><td ng-bind="roarevent[\'Document Category\']"></td><td ng-bind="roarevent[\'Page Count\']"></td><td><a ng-click=main.popdoc(roarevent)>{{roarevent[\'Filename\']}}</a></td></tr></tbody></table></uib-tab-content></uib-tab></uib-tabset></uib-tab-content></uib-tab><uib-tab active=main.tabs[1].isActive disable=main.tabs[1].disabled select="main.tabs[2].isActive = true" deselect="main.tabs[1].isActive = false"><uib-tab-heading ng-style>US {{phd.patent.number || phd.application[\'Patent Number\'] }}</uib-tab-heading><uib-tab-content ng-if=main.tabs[2].isActive><iframe ng-src={{phd.patent.media}} class="card card-fancy col-sm-6" style=min-height:500px;></iframe><table class="col-sm-6 table table-striped table-hover table-responsive pull-right"><tbody><tr ng-repeat="(key, value) in phd.application"><td><strong>{{::key}}</strong></td><td>{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab></uib-tabset></div></div></div>'),e.put("{widgetsPath}/getphd/src/phd/step-1.html",'<div class="card card-success" style=margin:0.5rem;><div class=card-header><h6 class=card-title>+PhD Step 1 - Download Patent</h6></div><div class=card-text><input type=text placeholder="Patent #" ng-model=config.PNUM> <a class="btn btn-success fa fa-download" href=http://patentimages.storage.googleapis.com/pdfs/US{{config.PNUM}}.pdf target=_blank data-toggle=popover data-placement=bottom data-content=DOWNLOAD data-animation=true data-trigger=hover onclick="window.open(this.href, \'\', \'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=30,top=150\'); return false;" style=color:white;></a><br><input type=text placeholder=IPA# ng-model=$scope.IPANUM style="width: 10rem;"> <input type=text placeholder=YYYY ng-model=$scope.IPAYEAR maxlength=4 style="width: 5rem;"> <a class="btn btn-success" href=http://patentimages.storage.googleapis.com/pdfs/US{{$scope.IPAYEAR}}{{$scope.IPANUM}}.pdf target=_blank data-toggle=popover data-placement=bottom title=DOWNLOAD data-content data-animation=true data-trigger=hover style=color:white; onclick="window.open(this.href, \'\', \'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=300,top=150\'); return false;">Published Application</a><br></div></div>'),e.put("{widgetsPath}/getphd/src/phd/step-2.html",'<div class="card card-warning" style=margin:0.5rem;><div class=card-header><h6 class=card-title>+PhD Step 2 - Download Image File Wrapper</h6></div><div class=card-text><input type=text placeholder="Application #" ng-model=config.appnum><div class=row><a class="btn btn-warning fa fa-download" href=https://storage.googleapis.com/uspto-pair/applications/{{config.appnum}}.zip target=_blank data-toggle=popover data-placement=bottom title="DOWNLOAD FROM GOOGLE" data-content data-animation=true data-trigger=hover style=color:white; onclick="window.open(this.href, \'\', \'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=300,top=150\'); return false;" ng-click="main.remotezip(config.appnum, this.href)">from Google</a> <a class="btn btn-warning fa fa-download" href=https://patents.reedtech.com/downloads/pair/{{config.appnum}}.zip target=_blank data-toggle=popover data-placement=bottom title="DOWNLOAD FROM REEDTECH" data-content data-animation=true data-trigger=hover style=color:white; onclick="window.open(this.href, \'\', \'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=300,top=150\'); return false;" ng-click="main.remotezip(config.appnum, this.href)">from ReedTech</a></div></div></div>'),e.put("{widgetsPath}/getphd/src/phd/step-3.html",'<div class="panel panel-danger"><div class=panel-heading><h4 class=splash>+PhD Step 3 - Unzip & Upload the Files</h4></div><div class=panel-body><h6 class=splash>{{ngDialogData[0].PNUM}} - {{ngDialogData[1].APPNUM}}</h6><span us-spinner ng-show=spinme></span><br><button class="btn btn-info fa fa-arrow-up pull-right" lk-google-picker on-picked=addfilehistory>upload</button><div ng-hide="files.length == 0"><div class="col-sm-28 col-sm-offset-1 panel sub-independent" style="padding: 1rem;"><h4>Add File History</h4><label>ID#: <input type=text ng-model=collection.rid placeholder="collection id"></label> <label class=pull-right>Box: <input type=text ng-model=collection.box placeholder="collection box"></label><br><small style="color: red;">*All Fields Required</small> <button class="btn-default pull-right" ng-click="files=[]">cancel</button> <button class="btn-info pull-right" ng-click="addfilehistory(files);spinme = true">confirm</button><br><small><strong>Note:</strong> This process may take several minutes to complete. Please wait until the process is complete. When completed, you will be brought to the results automatically.</small></div></div></div></div>')}]),angular.module("textSizeSlider",[]).directive("textSizeSlider",["$document",function(e){return{restrict:"E",template:'<div class="text-size-slider"><span class="small-letter" ng-style="{ fontSize: min + unit }">A</span> <input type="range" min="{{ min }}" max="{{ max }}" step="{{ step || 0 }}" ng-model="textSize" class="slider" value="{{ value }}" /> <span class="big-letter" ng-style="{ fontSize: max + unit }">A</span></div>',
scope:{min:"@",max:"@",unit:"@",value:"@",step:"@"},link:function(t,n,i){t.textSize=t.value,t.$watch("textSize",function(n){e.style.fontSize=n+t.unit,$("html").css({"font-size":n+t.unit})})}}}]),angular.module("roar",["angularFileUpload","pageslide-directive"]).factory("$mocks",[function(){var e={groupId:"0000x0000",matterId:"0000x0000",pId:"0000x0000",roarId:"0000x0000"};return e}]).factory("$roarevent",["OWNERSHIPDOCS","ARTDOCS","MERITSDOCS","DOCNAMES","PETDOCCODES","NOADOCCODES","INTVDOCCODES","PTODOCCODES","APPDOCCODES","$q","$filter",function(e,t,n,i,a,l,o,r,s,c,d){return function(e){function t(e){var t=angular.copy(e);if(t.filename.indexOf(".pdf")>-1){var c=e.Filename||e.name||e.filename,d=c.slice(0,c.indexOf("-")),p=c.slice(c.indexOf("-")+1,c.indexOf("-")+11),u=c.slice(c.lastIndexOf("-")+1,c.indexOf(".pdf"));t.content_type="document",e.url&&(t.media=e.url,t.uuid=e.id,t.mimeType=e.mimeType||null),t.description=e["Document Description"]||null,t.filename=e.Filename||e.name||e.filename,t.collections=[],t.application=d||null,t.date=p||null,t.doccode=e["Document Code"]||u,angular.forEach(s,function(e,n){u===e&&(t.styleClass="Applicant")}),angular.forEach(r,function(e,n){u===e&&(t.styleClass="PTO")}),angular.forEach(o,function(e,n){u===e&&(t.styleClass="Interview")}),angular.forEach(l,function(e,n){u===e&&(t.styleClass="NOA")}),angular.forEach(a,function(e,n){u===e&&(t.styleClass="Petition")}),angular.forEach(i,function(e,n){angular.forEach(e,function(e,n){u===n?(t.name=e,t.title=e):t.name=c})});var f=(new Date,new Date),g=f.getTime();return t.rows=[{columns:[{cid:g+10,styleClass:"col-sm-6",widgets:[{config:{height:"30em",url:t.media||"http://www.google.com"},title:t.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"iframe",wid:g+100,styleClass:t.styleClass||"btn-dark"}]},{cid:g+1e3,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE"},title:t.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"ckwidget",wid:g+15,styleClass:t.styleClass||"btn-dark"}]}]}],t.structure="6-6",n.resolve(t)}var c=e.Filename||e.name||e.filename;t.name=c,t.title=c,e.url&&(t.media=e.url,t.uuid=e.id,t.mimeType=e.mimeType||null);var f=(new Date,new Date),g=f.getTime();return t.content='<img width="auto" height="auto" src="'+e.url+'" class="img image-thumbnail" />',t.rows=[{columns:[{cid:g+10,styleClass:"col-sm-3",widgets:[{config:{height:"30em",url:t.media||"http://www.google.com"},title:t.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"iframe",wid:g+100,styleClass:t.styleClass||"btn-dark"}]},{cid:g+1e3,styleClass:"col-sm-9",widgets:[{config:{id:"PROMISE"},title:t.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"ckwidget",wid:g+15,styleClass:t.styleClass||"btn-dark"}]}]}],t.structure="3-9",n.resolve(t)}var n=c.defer();return t(e),n.promise}}]).factory("$roarmap",["$stateParams","Matter","Collection","ROARevent","ROARevents","Collections","$mocks","$timeout","OWNERSHIPDOCS","ARTDOCS","MERITSDOCS","DOCNAMES","PETDOCCODES","NOADOCCODES","INTVDOCCODES","PTODOCCODES","APPDOCCODES","$q","PHD","$log","FIREBASE_URL","filepickerService","$location","$ACTIVEROAR","$dashboards","CLAIMDOCS",function(e,t,n,i,a,l,o,r,s,c,d,p,u,f,g,h,m,b,v,y,w,x,C,A,P,S){return function(i,a,o){function s(e){w(e)}function v(e,t){var i=n(e[3]).$ref(),a=n(e[2]).$ref(),l=n(e[1]).$ref(),r=n(e[0]).$ref();return angular.forEach(t.imagefile,function(e,n){if(""!==e["Mail Room Date"]&&""!==e.Filename){var s=(angular.copy(t.application["Application Number"]).replace("/","").replace(",","").replace(",",""),new Date,angular.copy(e)),b=new Date(e["Mail Room Date"]),v=(b.getFullYear(),b.getMonth(),b.getDate(),e.Filename||null),w=v.slice(0,v.indexOf("-")),x=v.slice(v.indexOf("-")+1,v.indexOf("-")+11),A=v.slice(v.lastIndexOf("-")+1,v.indexOf(".pdf"));s.content_type="document","localhost"===C.host()?(s.selflink="/files/public/uspto/"+w+"/"+w+"-image_file_wrapper/"+v,s.media=s.selflink):(s.selflink="https://lexlab.io/files/public/uspto/"+w+"/"+w+"-image_file_wrapper/"+v,s.media=s.selflink),s.description=e["Document Description"]||null,s.filename=e.Filename||null,s.collections=[],s.Application=w||null,s.date=x||null,s.rid=t.imagefile.indexOf(e),s.doccode=e["Document Code"]||null,angular.forEach(m,function(e,t){A===e&&(s.styleClass="Applicant")}),angular.forEach(h,function(e,t){A===e&&(s.styleClass="PTO")}),angular.forEach(g,function(e,t){A===e&&(s.styleClass="Interview")}),angular.forEach(f,function(e,t){A===e&&(s.styleClass="NOA")}),angular.forEach(u,function(e,t){A===e&&(s.styleClass="Petition")}),angular.forEach(p,function(e,t){angular.forEach(e,function(e,t){A===t&&(s.name=e,s.title=e)})});var P=new Date,k=P.getTime();s.rows=[{columns:[{cid:k+10,styleClass:"col-sm-6",widgets:[{config:{height:"30em",url:s.media||"http://www.google.com"},styleClass:s.styleClass||"btn-dark",title:s.title||"title",type:"iframe",wid:k+100}]},{cid:k+1e3,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE"},styleClass:s.styleClass||"btn-dark",title:s.title||"title",type:"ckwidget",wid:k+1010}]}]}],s.structure="6-6",s.isActive=!1,D.$add(s).then(function(e){var n=e.key();e.update({id:n,timestamp:Firebase.ServerValue.TIMESTAMP}),e.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(n),t.roarmap.roarlist[n]=n,r.child("roarlist").child(n).set(n),angular.forEach(d,function(e,t){s.doccode===e&&(l.child("roarlist").child(n).set(n),y.info("merits",n))}),angular.forEach(c,function(e,t){s.doccode===e&&(a.child("roarlist").child(n).set(n),y.info("art",n))}),angular.forEach(S,function(e,t){s.doccode===e&&(i.child("roarlist").child(n).set(n),y.info("claims",n))})}),o.progresstwo++}}),P.resolve(e)}function w(e){var t=new Date,n=t.getTime(),i=function(t){var i=this;return i={name:"USSN "+e.application["Application Number"],rid:t.rid,title:t.title+" - USSN "+e.application["Application Number"],collection_type:"source",description:"for US "+e.application["Patent Number"],styleClass:t.styleClass,icon:t.icon,app:e.application["Application Number"],content_type:"collection",titleTemplateUrl:"/llp_core/modules/roarmap/directive/roargrid/roargrid-title.html",rows:[{styleClass:"row slate",columns:[{cid:n+10,styleClass:"col-sm-12",widgets:[{type:"pagebuilder",styleClass:t.styleClass||"btn-dark",config:{id:"PROMISE",url:"/llp_core/modules/roarmap/directive/roargrid/roargrid.html"}}]}]}]}},a={rid:"PHD1",title:"ALL",styleClass:"NOA",icon:"fa-legal"},l={rid:"PHD2",title:"MERITS",styleClass:"PTO",icon:"fa-balance-scale"},o={rid:"PHD3",title:"ART",styleClass:"Petition",icon:"fa-leaf"},s={rid:"PHD4",title:"CLAIMS",styleClass:"Applicant",icon:"fa-sitemap"},c=[],d={all:a,merits:l,art:o,claims:s};angular.forEach(d,function(e,t){D.$add(new i(e)).then(function(e){var t=e.key();return e.update({id:t,timestamp:Firebase.ServerValue.TIMESTAMP}),e.child("rows").child("0").child("columns").child("0").child("widgets").child("0").child("config").child("id").set(t),c.push(t)})}),r(function(){x(c,e)},1e3)}function x(e,t){var i=(new Date,new Date),a=i.getTime(),l=angular.copy(t.patent);l.rows=[{columns:[{cid:a+10,styleClass:"col-sm-6",widgets:[{config:{height:"30em",url:l.media||"http://www.google.com"},title:l.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"iframe",wid:a+100,styleClass:l.styleClass||"btn-dark"}]},{cid:a+1e3,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE"},title:l.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"ckwidget",wid:a+15,styleClass:l.styleClass||"btn-dark"}]}]}],l.structure="6-6",D.$add(l).then(function(i){var a=i.key();i.update({id:a,timestamp:Firebase.ServerValue.TIMESTAMP}),i.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(a);var l=n(e[0]).$ref(),o=n(e[1]).$ref();l.child("roarlist").child(a).set(a),o.child("roarlist").child(a).set(a),v(e,t)})}a.roarmap={collections:[],roarlist:[]},a.roarlist={};var P=b.defer(),D=(t(e.matterId,e.groupId),l()),k=n(A.page);k.$ref(),n(e.pId).$ref();return s(a),P.promise}}]).controller("PageslideCtrl",["$scope",function(e){e.checked=!1,e.toggle=function(){e.checked=!e.checked},e.checked1=!1,e.toggle1=function(){e.checked1=!e.checked1},e.checked2=!1,e.toggle2=function(){e.checked2=!e.checked2}}]),angular.module("llp.pdf",["LocalStorageModule"]).config(["localStorageServiceProvider",function(e){e.setPrefix("adf.getphd")}]).factory("pdfToPlainText",["$q",function(e){function t(t){var i=e.defer();PDFJS.disableWorker=!1,console.log(t);var a=PDFJS.getDocument(t.data);return a.then(n),i.promise}return function(e){t(e)};var n}]).directive("getpdftext",["extract","$document","$window","$rootScope",function(e,t,n,i){var a=function(e,t,n,i){e.pdfToPlainText=function(t){var n={title:"pdfData",content:'<div id="pdf"></div>'};e.phd.documents.push(n),PDFJS.disableWorker=!1,$("#pdf").children().remove();var i=PDFJS.getDocument(t);i.then(a)};var a=function(e){for(var t=0;t<e.numPages;t++)e.getPage(t+1).then(o)},l="</section><section class='page card card-fancy'>",o=function(t){var n=angular.element(l).appendTo("#pdf");t.getTextContent().then(function(t){console.log(t),angular.forEach(t,function(t,i){var a="";angular.forEach(t,function(e,t){return a+=e.str}),$(n).append(a),e.pages.push(a)})})}};return{restrict:"A",controller:"PDFFilesController",controllerAs:"pdff",bindToController:!0,link:a}}]).controller("PDFFilesController",["$scope","extract","$document","$window","$http","localStorageService",function(e,t,n,i,a,l){var o=this;o.name="PDFFilesController"}]),angular.module("llp.parsetsv",[]).factory("parseTSV",[function(){return function(e,t,n){var i=e,t=t,a=Papa.parse(i,t);return n?a:a.data}}]),function(e){var t=function(t,n){var t=e(t),i=this,a=e.extend({},e.fn.bootstrapWizard.defaults,n),l=null,o=null;this.rebindClick=function(e,t){e.unbind("click",t).bind("click",t)},this.fixNavigationButtons=function(){return l.length||(o.find("a:first").tab("show"),l=o.find("li:first")),e(a.previousSelector,t).toggleClass("disabled",i.firstIndex()>=i.currentIndex()),e(a.nextSelector,t).toggleClass("disabled",i.currentIndex()>=i.navigationLength()),i.rebindClick(e(a.nextSelector,t),i.next),i.rebindClick(e(a.previousSelector,t),i.previous),i.rebindClick(e(a.lastSelector,t),i.last),i.rebindClick(e(a.firstSelector,t),i.first),a.onTabShow&&"function"==typeof a.onTabShow&&a.onTabShow(l,o,i.currentIndex())===!1?!1:void 0},this.next=function(e){return t.hasClass("last")?!1:a.onNext&&"function"==typeof a.onNext&&a.onNext(l,o,i.nextIndex())===!1?!1:($index=i.nextIndex(),void($index>i.navigationLength()||o.find("li:eq("+$index+") a").tab("show")))},this.previous=function(e){return t.hasClass("first")?!1:a.onPrevious&&"function"==typeof a.onPrevious&&a.onPrevious(l,o,i.previousIndex())===!1?!1:($index=i.previousIndex(),void($index<0||o.find("li:eq("+$index+") a").tab("show")))},this.first=function(e){return a.onFirst&&"function"==typeof a.onFirst&&a.onFirst(l,o,i.firstIndex())===!1?!1:t.hasClass("disabled")?!1:void o.find("li:eq(0) a").tab("show")},this.last=function(e){return a.onLast&&"function"==typeof a.onLast&&a.onLast(l,o,i.lastIndex())===!1?!1:t.hasClass("disabled")?!1:void o.find("li:eq("+i.navigationLength()+") a").tab("show")},this.currentIndex=function(){return o.find("li").index(l)},this.firstIndex=function(){return 0},this.lastIndex=function(){return i.navigationLength()},this.getIndex=function(e){return o.find("li").index(e)},this.nextIndex=function(){return o.find("li").index(l)+1},this.previousIndex=function(){return o.find("li").index(l)-1},this.navigationLength=function(){return o.find("li").length-1},this.activeTab=function(){return l},this.nextTab=function(){return o.find("li:eq("+(i.currentIndex()+1)+")").length?o.find("li:eq("+(i.currentIndex()+1)+")"):null},this.previousTab=function(){return i.currentIndex()<=0?null:o.find("li:eq("+parseInt(i.currentIndex()-1)+")")},this.show=function(e){return t.find("li:eq("+e+") a").tab("show")},this.disable=function(e){o.find("li:eq("+e+")").addClass("disabled")},this.enable=function(e){o.find("li:eq("+e+")").removeClass("disabled")},this.hide=function(e){o.find("li:eq("+e+")").hide()},this.display=function(e){o.find("li:eq("+e+")").show()},this.remove=function(t){var n=t[0],i="undefined"!=typeof t[1]?t[1]:!1,a=o.find("li:eq("+n+")");if(i){var l=a.find("a").attr("href");e(l).remove()}a.remove()},o=t.find("ul:first",t),l=o.find("li.active",t),o.hasClass(a.tabClass)||o.addClass(a.tabClass),a.onInit&&"function"==typeof a.onInit&&a.onInit(l,o,0),a.onShow&&"function"==typeof a.onShow&&a.onShow(l,o,i.nextIndex()),i.fixNavigationButtons(),e('a[data-toggle="tab"]',o).on("click",function(t){var n=o.find("li").index(e(t.currentTarget).parent("li"));return a.onTabClick&&"function"==typeof a.onTabClick&&a.onTabClick(l,o,i.currentIndex(),n)===!1?!1:void 0}),e('a[data-toggle="tab"]',o).on("shown",function(t){$element=e(t.target).parent();var n=o.find("li").index($element);return $element.hasClass("disabled")?!1:a.onTabChange&&"function"==typeof a.onTabChange&&a.onTabChange(l,o,i.currentIndex(),n)===!1?!1:(l=$element,void i.fixNavigationButtons())})};e.fn.bootstrapWizard=function(n){if("string"==typeof n){var i=Array.prototype.slice.call(arguments,1);return 1===i.length&&i.toString(),this.data("bootstrapWizard")[n](i)}return this.each(function(i){var a=e(this);if(!a.data("bootstrapWizard")){var l=new t(a,n);a.data("bootstrapWizard",l)}})},e.fn.bootstrapWizard.defaults={tabClass:"nav nav-pills",nextSelector:".wizard li.next",previousSelector:".wizard li.previous",firstSelector:".wizard li.first",lastSelector:".wizard li.last",onShow:null,onInit:null,onNext:null,onPrevious:null,onLast:null,onFirst:null,onTabChange:null,onTabClick:null,onTabShow:null}}(jQuery),angular.module("adf.widget.getphd").factory("fileReader",["$q","$log",function(e,t){var n=function(e,t,n){return function(){t.resolve(e.result)}},i=function(e,t,n){return function(){t.reject(e.result)}},a=function(e,t){return function(e){}},l=function(e,t){var l=new FileReader;return l.onload=n(l,e,t),l.onerror=i(l,e,t),l.onprogress=a(l,t),l},o=function(t,n){var i=e.defer(),a=l(i,n);return a.readAsDataURL(t),i.promise};return{readAsDataUrl:o}}]),angular.module("llp.extractpdf",[]).factory("extractpdf",["$q",function(e){function t(t,n,i){var a=n||t.name.slice(0,t.name.indexOf(".")),l=e.defer(),o=new FileReader,r=a,s=r+"/"+r+"-address_and_attorney_agent.tsv",c=r+"/"+r+"-application_data.tsv",d=r+"/"+r+"-continuity_data.tsv",p=r+"/"+r+"-foreign_priority.tsv",u=r+"/"+r+"-transaction_history.tsv",f=r+"/"+r+"-image_file_wrapper/"+r+"-image_file_wrapper.tsv",g=r+"/README.txt",h=[{label:"README",value:g},{label:"attorney",value:s},{label:"application",value:c},{label:"continuity",value:d},{label:"foreign",value:p},{label:"transaction",value:u},{label:"imagefile",value:f}];return o.onerror=l.reject.bind(l),o.onload=function(e){o.result||l.reject(new Error("Unknown error"));var t=new JSZip(o.result,{binary:!0}),n={tsvfiles:[],pdffiles:[]};return angular.forEach(h,function(e,i){var a=t.files[e.value];"undefined"!=typeof a&&n.tsvfiles.push({label:e.label,file:a.asText()})}),angular.forEach(t.files,function(e,t){n.pdffiles.push({label:e.name,file:e}),i.extractedfiles++}),l.resolve(n)},o.readAsArrayBuffer(t),l.promise}function n(e,n,i){return t(e,n,i)}return n}]),angular.module("llp.extract",[]).factory("extract",["$q",function(e){function t(t,n){var i=n||t.name.slice(0,t.name.indexOf(".")),a=e.defer(),l=new FileReader,o=i,r=o+"/"+o+"-address_and_attorney_agent.tsv",s=o+"/"+o+"-application_data.tsv",c=o+"/"+o+"-continuity_data.tsv",d=o+"/"+o+"-foreign_priority.tsv",p=o+"/"+o+"-transaction_history.tsv",u=o+"/"+o+"-image_file_wrapper/"+o+"-image_file_wrapper.tsv",f=o+"/README.txt",g=[{label:"README",value:f},{label:"attorney",value:r},{label:"application",value:s},{label:"continuity",value:c},{label:"foreign",value:d},{label:"transaction",value:p},{label:"imagefile",value:u}];return l.onerror=a.reject.bind(a),l.onload=function(e){l.result||a.reject(new Error("Unknown error"));var t=new JSZip(l.result,{binary:!0}),n=[];return angular.forEach(g,function(e,i){var a=t.files[e.value];"undefined"!=typeof a&&n.push({label:e.label,file:a.asText()})}),a.resolve(n)},l.readAsArrayBuffer(t),a.promise}function n(e,n){return t(e,n)}return n}]),jQuery.event.props.push("dataTransfer"),angular.module("fa.droppable",[]).directive("dropFiles",[function(){var e=function(e,t,n,i){var a=function(e){for(var t=e.originalEvent.dataTransfer.files,n=[],i=0,a=t.length;a>i;i++)n.push(t[i]);return n},l=function(e){e.preventDefault(),t.css({"border-style":"dotted"})},o=function(e){e.preventDefault(),t.css({"border-style":"dashed"});var n=a(e);i.dropFiles({files:n})};t.on("dragover",l),t.on("drop",o),e.$on("$destroy",function(){t.off("dragover",l),t.off("drop",o)})};return{restrict:"A",controller:"DropFilesController",controllerAs:"drop",bindToController:!0,require:"dropFiles",scope:{accepts:"&",dropFiles:"&",main:"&"},link:e}}]).controller("DropFilesController",["$controller","extract","$scope","$timeout","$rootScope","FileUploader","toastr",function(e,t,n,i,a,l,o){var r=this;r.file={},r.dropFiles=function(e){console.log("files.files[0]",e.files[0]),n.$on("UPLOADCOMPLETE",function(t){n.$parent.main.handleFiles(e.files[0])})}}])}(window);