!function(e,t){"use strict";angular.module("adf.widget.getphd",["adf.provider","llp.extract","fa.droppable","llp.parsetsv","roar","textSizeSlider","llp.pdf","LocalStorageModule","llp.extractpdf","firebase","ui.router","xeditable","ui.tree","ngAnimate","ngAnnotateText","ngDialog","ngSanitize","pdf","toastr","mentio","diff","door3.css","checklist-model","angular-md5","angular.filter","roarmap","ngFileUpload"]).config(["dashboardProvider","localStorageServiceProvider",function(e,t){t.setPrefix("adf.getphd"),e.widget("carousel",{title:"Carousel",description:"Display items in a carousel",templateUrl:"{widgetsPath}/getphd/src/gallery.html",icon:"fa-picture",iconurl:"img/lexlab.svg",styleClass:"info ",frameless:!1,reload:!0,controller:"GalleryCarouselController",controllerAs:"gallery",edit:{templateUrl:"{widgetsPath}/getphd/src/editgallery.html",controller:"GalleryCarouselController",controllerAs:"gallery",modalSize:"lg",reload:!0}}).widget("gallery",{title:"Gallery",description:"Plain Image with thumnnails & caption",templateUrl:"{widgetsPath}/getphd/src/galleryplain.html",icon:"fa-picture",iconurl:"img/lexlab.svg",styleClass:"info ",frameless:!1,reload:!0,controller:"GalleryController",controllerAs:"gallery",edit:{templateUrl:"{widgetsPath}/getphd/src/editgalleryplain.html",controller:"GalleryController",controllerAs:"gallery",modalSize:"lg",reload:!0}}).widget("getphd",{title:"+PhD",description:"import a patent prosecution history",templateUrl:"{widgetsPath}/getphd/src/view.html",controller:"MainCtrl",controllerAs:"main",frameless:!1,reload:!1,icon:"fa-ge",iconurl:"img/logolong.png",styleClass:"primary panel panel-primary",edit:{templateUrl:"{widgetsPath}/getphd/src/edit.html",controller:"MainCtrl",controllerAs:"main",modalSize:"lg",reload:!0},resolve:{config:["config","$firebaseArray","$rootScope","FIREBASE_URL",function(e,t,a,i){if(e.id)return e;var n=t(new Firebase(i+"matters/"+a.$stateParams.groupId+"/"+a.$stateParams.matterId+"/content/"));return n.$add({name:"curation"}).then(function(t){var a=t.key();return t.update({id:a,ispublished:!1,content_type:"getphd",templateUrl:"{widgetsPath}/getphd/src/view.html",timestamp:Firebase.ServerValue.TIMESTAMP}),e.id=a,e}),e}]}})}]).controller("MainCtrl",["Collection","extract","extractzip","fileReader","$http","parseTSV","$roarmap","$q","$scope","config","PHD","localStorageService","extractpdf","pdfToPlainText","$patentsearch","$log","FileUploader","$publish","$pdftotxt","$timeout","toastr","$rootScope","$stateParams","$location","$ACTIVEROAR","$dashboards","$interval","Collections","$compile","$templateCache","$window","$document","$filter",function(e,t,a,i,n,l,s,o,r,c,d,p,u,f,g,m,h,b,v,y,x,w,C,k,A,P,S,E,D,T,I,O,F){var R=this;r.treeFilter=F("uiTreeFilter"),r.availableFields=["title","text"],r.supportedFields=["title","text"],r.toggleSupport=function(e){return r.supportedFields.indexOf(e)>-1?r.supportedFields.splice(r.supportedFields.indexOf(e),1):r.supportedFields.push(e)},r.collapsereport=!1,R.collapse=function(){r.collapsereport=!r.collapsereport};var c=r.$parent.config||r.$parent.$parent.config,d=e(c.id)||e(c.appnum);d.$loaded().then(function(e){e.$bindTo(r,"phd"),angular.isUndefined(e.file)?R.showupload=!0:R.showupload=!1}),R.$ACTIVEROAR=A,R.tabs=[{isActive:!0,disabled:!1},{isActive:!1,disabled:!1},{isActive:!1,disabled:!1}],r.export2collection=function(t){var a=C.pId,i=e(a);i.$loaded().then(function(e){angular.isUndefined(e.roarlist)?(e.roarlist=new Array,e.roarlist.push(t),e.$save()):(e.roarlist.push(t),e.$save())})},r.publish=function(e){angular.forEach(e.roarmap.collections,function(e,t){r.export2collection(e),r.export2collection(t)}),r.export2collection(c.id),b(c.id,r.phd).then(function(e){alertify.success("link to post:"+e)})};var U={header:!0,skipEmptyLines:!0},j=r.uploader=new h({url:"/upload",autoUpload:!0,removeAfterUpload:!0});j.filters.push({name:"customFilter",fn:function(e,t){var a=e.filename||e.name;return a.indexOf(".zip")>-1&&-1==a.indexOf("(")&&-1==a.indexOf(" ")}}),j.onWhenAddingFileFailed=function(e,t,a){console.info("onWhenAddingFileFailed",e,t,a),alertify.alert('The file\'s name must end with ".zip" and consist only of numbers -  "(",")",",","/", or " " are not permitted.'),this.queue=null},j.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},j.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},j.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e),R.progress=0,R.bufferedfile=e,console.log(e),alertify.log("starting upload...")},j.onProgressItem=function(e,t){R.progress=t,10===t&&x.info("fetching remote resources..."),30===t&&x.info("loading relevant data schemas..."),55===t&&x.warning("compiling templates..."),75===t&&x.warning("starting the AI engine..."),40>=t?R.progresstype="danger":t>40&&66>t?R.progresstype="warning":t>97?R.progresstype="success":R.progresstype="info",console.info("onProgressItem",e,t)},j.onProgressAll=function(e){console.info("onProgressAll",e)},j.onSuccessItem=function(e,t,a,i){console.info("onSuccessItem",e,t,a,i),alertify.success(t),alertify.success("File uploaded!"),w.$broadcast("UPLOADCOMPLETE",t)},j.onErrorItem=function(e,t,a,i){console.info("onErrorItem",e,t,a,i),R.progress="failed",R.progresstype="danger"},j.onCancelItem=function(e,t,a,i){console.info("onCancelItem",e,t,a,i)},j.onCompleteItem=function(e,t,a,i){console.info("onCompleteItem",e,t,a,i),alertify.success(t)},j.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",j),R.treeFilter=F("uiTreeFilter"),R.toggle=function(){R.checked=!R.checked},R.phd={};c.appnum;R.parse=function(e){var t=o.defer();return angular.forEach(e,function(e,a){try{}catch(i){m.error(i)}finally{if("imagefile"===e.label)R.phd.imagefile=l(e.file,U),R.progresstwo++;else if("application"===e.label){var n=l(e.file,{skipEmptyLines:!0}),s={};angular.forEach(n,function(e,t){"Class / Subclass"==e[0]?s["Class Subclass"]=e[1]:s[e[0]]=e[1],R.phd.application=s}),R.progresstwo++}else"attorney"===e.label?(R.phd.attorney=l(e.file,{skipEmptyLines:!0}),R.progresstwo++):"foreign"===e.label?(R.phd.foreign=l(e.file,U,!1),R.progresstwo++):"continuity"===e.label?(R.phd.continuity=l(e.file,{skipEmptyLines:!0}),R.progresstwo++):"transaction"===e.label?(R.phd.transaction=l(e.file,U,!1),R.progresstwo++):"README"===e.label?(R.info=e.file,R.progresstwo++):"term"===e.label?(R.phd.term=l(e.file,{skipEmptyLines:!0}),R.progresstwo++):(R.error="Unhandled case!",alertify.error("unhandled case!"),t.reject("unhandled case!"));return t.resolve(R.phd)}}),t.promise},R.styleClass="panel-primary",R.size="450px",R.checked=!1,R.getpatentdownload=function(e){$(document.createElement("iframe")).attr("name","fframe").appendTo("body");var t=function(e){return I.open("https://patentimages.storage.googleapis.com/pdfs/US"+e+".pdf","fframe","resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=30,top=150")};t(e)},R.getpublishedapplication=function(e,t){$(document.createElement("iframe")).attr("name","fframe").appendTo("body"),I.open("https://patentimages.storage.googleapis.com/pdfs/US"+e+t+".pdf","fframe","resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=30,top=150")};var N,z;R.getfilehistory=function(e,t){"reedtech"===t?z():N()},R.remoteconfig=function(e){$("#googlebutton").addClass("fa-spin fa-spinner").removeClass("fa-file-zip-o text-danger"),$("#reedtechbutton").addClass("fa-spin fa-spinner").removeClass("fa-file-zip-o text-danger"),n.get("/getphd/patents/"+e).then(function(e){e.data;c.appnum=e.data.application,r.response=e.data;var t="http://127.0.0.1:8080/https://storage.googleapis.com/uspto-pair/applications/"+c.appnum+".zip",a="http://127.0.0.1:8080/https://patents.reedtech.com/downloads/pair/"+c.appnum+".zip";JSZipUtils.getBinaryContent(t,function(e,t){e?$("#googlebutton").addClass("fa-close text-danger").removeClass("fa-spin fa-spinner fa-file-zip-o"):($("#googlebutton").addClass("fa-check text-success").removeClass("fa-spin fa-spinner text-danger fa-file-zip-o fa-close"),N=function(){var e=new JSZip(t),a=e.generate({type:"blob"});saveAs(a,c.appnum+".zip")})}),JSZipUtils.getBinaryContent(a,function(e,t){e?$("#reedtechbutton").addClass("fa-close text-danger").removeClass("fa-spin fa-spinner fa-file-zip-o"):($("#reedtechbutton").addClass("fa-check text-success").removeClass("fa-spin fa-spinner text-danger fa-file-zip-o fa-close"),z=function(){var e=new JSZip(t),a=e.generate({type:"blob"});saveAs(a,c.appnum+".zip")})})})},R.remotezip=function(e){R.error=null,R.success=null,R.progress=0,R.progresstwo=0,R.extractedfiles=0,c.appnum=e,a(e,R,j).then(function(e){m.info("Files extracted",e),alertify.log("Files extracted"),R.phd.file=e.tsvfiles,R.parse(e.tsvfiles).then(function(e){alertify.log("TSV Parsed"),g(R.phd.application,c).then(function(t){R.phd.patent=t,s(e,R.phd,R).then(function(e){alertify.success("ROARmap built!"),R.finalize(R.phd,e)},function(e){console.log(e.message)})},function(e){console.log(e.message)})},function(e){console.log(e.message)})},function(e){console.log(e.messsage)})},R.buffer=function(e){R.bufferedfile=e},R.success=null,R.info=null,R.phd={},R.handleFiles=function(e){R.error=null,R.success=null,R.progresstwo=0,R.extractedfiles=0,u(e,c.APPNUM,R).then(function(e){m.info("Files extracted",e),alertify.log("Files extracted"),R.phd.file=e.tsvfiles,R.parse(e.tsvfiles).then(function(e){alertify.log("TSV Parsed"),g(R.phd.application,c).then(function(t){R.phd.patent=t,s(e,R.phd,R).then(function(e){alertify.success("ROARmap built!"),R.finalize(R.phd,e)},function(e){console.log(e.message)})},function(e){console.log(e.message)})},function(e){console.log(e.message)})},function(e){console.log(e.messsage)})},function(e){console.log(e.message)},R.pop=function(e){var t=angular.element("<div/>").attr("class","issuedocpanel stacker"),a={title:e.slice(e.lastIndexOf("/")+1,e.length)};r.roarevent=a;var i=T.get("{widgetsPath}/getphd/src/titleTemplate.html"),n=angular.element("<img/>").attr("class","img img-responsive img-shadow").attr("src",e);angular.element("body").append(D(t.append(i).append(n))(r)),$(".issuedocpanel").draggable({stack:".stacker",handle:"h4"}).resizable()},r.openFullScreen=function(e){r.fullscreen!==!0?($(".issuedocpanel").css({position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",width:"100%","z-index":"100000"}),$(".fa-expand").addClass("fa-compress").removeClass("fa-expand"),r.fullscreen=!0):($(".issuedocpanel").css({position:"absolute",top:"6rem",left:"10rem",bottom:"0rem",right:"75rem",width:"initial","z-index":"9999"}),$(".fa-compress").addClass("fa-expand").removeClass("fa-compress"),r.fullscreen=!1)},R.poppatent=function(e){var t=angular.element("<div/>").attr("class","issuedocpanel stacker"),a=e;r.roarevent=a;var i=T.get("{widgetsPath}/getphd/src/titleTemplate.html"),n=angular.element("<embed/>").attr("class","img img-responsive img-shadow").attr("src",e.media);angular.element("body").append(D(t.append(i).append(n))(r)),$(".issuedocpanel").draggable({stack:".stacker",handle:"h4"}).resizable()},R.popdoc=function(e){var t=angular.element("<div/>").attr("class","issuedocpanel stacker"),a=T.get("{widgetsPath}/getphd/src/titleTemplate.html"),i=angular.element("<iframe/>").attr("height","680px").attr("src","https://lexlab.io/files/public/uspto/"+r.phd.appnum+"/"+r.phd.appnum+"-image_file_wrapper/"+e.Filename);angular.element("body").append(D(t.append(a).append(i))(r)),$(".issuedocpanel").draggable({stack:".stacker",handle:"h4"}).resizable()},R.finalize=function(t,a){var i=(E(),angular.copy(t.application["Application Number"]).replace("/","").replace(",","").replace(",","")),n=e(r.phd.id).$ref(),l=e(C.pageid);l.$ref(),e(C.pId).$ref();t.appnum=i,t.media="https://lexlab.io/files/public/uspto/index#?app="+i,t.title="PhD for "+(t.patent.number||t.application["Patent Number"]),t.description="USSN "+t.application["Application Number"],t.styleClass="Applicant",t.rid="PHD",t.icon="fa-balance-scale",angular.forEach(a,function(e,a){t.roarlist[e]=e}),p.set(t.application["Application Number"],t),n.update(t),alertify.alert('<div class="card-header"><h1 class="card-title">Prosecution History Digest for US '+t.patent.number+'</h1></div><div class="card-block"><h6 class="card-text lead">All files have been successfully processed by LEO and delivered to your account for review.</h6></div>'),R.showupload=!1},R.pdFF=function(e){var t=o.defer();return angular.forEach(e,function(e,a){return e&&e.name.indexOf(".pdf")>-1?(f(e).then(function(e){r.phd.file.push(e)}),t.resolve(pdf)):t.reject("not a pdf")}),t.promise}}]).directive("ffFileSelect",[function(){return{restrict:"A",controller:"MainCtrl",controllerAs:"main",bindToController:!0,scope:!1,link:function(e,t,a,i){var n=i;t.on("change",function(e){n.file=(e.srcElement||e.target).files[0],n.getFile()})}}}]).factory("$patentsearch",["$q","filepickerService","$http","$document",function(e,t,a,i){return function(t,i){function n(e,t){var i=t||angular.copy(e["Patent Number"]).replace(",","").replace(",",""),n="https://patentimages.storage.googleapis.com/pdfs/US"+i+".pdf";filepicker.storeUrl(n.toString(),{filename:"US"+i+".pdf"},function(t){a.get("/getphd/patents/"+i).then(function(a){var n=a.data;n.number=i,n.media=t.url,n.filename="US"+i+".pdf",n.title=e["Title of Invention"]||null,n.google="https://www.google.com/patents/US"+i,n.rid="P1","-"!==e["Issue Date of Patent"]?n.date=e["Issue Date of Patent"]:n.date="1899-12-31",n.styleClass="NOA",n.name="US"+i,n.description=e["Title of Invention"];var s,o=new Date(n.date),r=o.toDateString(),c='<div class="container-fluid two-col-left"><div class="row two-col-left"><div class="col-md-3 col-sidebar"><p><img src="https://placehold.it/250x208/7c994f/fff/&text='+n.rid+'" class="img img-responsive img-shadow"/></p></div><div class="col-md-9 col-main"><div class="bs-callout bs-callout-NOA bs-callout-reverse"><h4>'+n.title+"</h4><p>Filed "+r+"</p><p>"+n["abstract"]+"</p><cite>"+n.filename+'&nbsp;&nbsp;<a href="'+n.media+'" target="fframe"><i class="fa fa-external-link"></i></a></cite></div></div></div></div>',d='<!DOCTYPE html><html><head><title></title><link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" rel= "stylesheet" /><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet"/><link href="//lexlab.io/llp_core/dist/app.full.min.css" rel="stylesheet " /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tether-select/1.1.1/css/select-theme-default.css"/><script src="https://code.jquery.com/jquery-2.2.0.min.js "></script><script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js "></script><script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/tether-select/1.1.1/js/select.min.js"></script><script src= "https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js "></script><base href="/ " target="fframe " /></head><body class= "dark-bg "><div class="container-fluid "><div class="row "><div class="col-xs-12 "><div class="card card-block ">',p='</div></div></div></div><footer class= "navbar-fixed-bottom "><p style= "padding-left:30px;margin-left:30px;text-indent:20px; ">&nbsp;&nbsp;&nbsp;&nbsp;CONTAINS MATERIAL SUBJECT TO PROTECTIVE ORDER</p></footer></body></html>',u='<p class="card-text">'+n.text+"</p>";angular.forEach(n.drawings,function(e,t){var a=document.createElement("img"),i=document.createElement("a"),l=$(a).attr("src",n.thumbnails[t]).wrap($(i).attr("href",e).attr("target","fframe"));s=angular.element(c).append(l)}),n.content=d+$(s).html()+u+p,l.resolve(n)})})}var l=e.defer();return i.PNUM&&i.PNUM>0?n(t,i.PNUM):i.IPANUM&&n(t,i.IPAYEAR+i.IPANUM),l.promise}}]).factory("$pdftotxt",["$q","filepickerService","Collection",function(e,t,a){return function(t){function i(e){var t=e.roarmap.collections[1].id||e.roarmap.collections[1];return a(t).$loaded().then(function(e){var t=e.roarlist;angular.forEach(t,function(e,t){a(t).$loaded().then(function(e){filepicker.storeUrl(e.selflink,{filename:e.filename},function(t){filepicker.convert(t,{format:"txt"},function(t){e.txt=t.url,e.$save(),alertify.success("text file added for"+e.title)})})})})}),n.resolve(e)}var n=e.defer();return i(t),n.promise}}]).directive("uploadQ",["FileUploader",function(e){return{restrict:"EA",template:'<div class="card"><input type="file" nv-file-select="" uploader="uploader" multiple /> <h3>Upload queue</h3> <p>Queue length: {{ uploader.queue.length }}</p> <table class="table"> <thead> <tr> <th width="50%">Name</th> <th ng-show="uploader.isHTML5">Size</th> <th ng-show="uploader.isHTML5">Progress</th> <th>Status</th> <th>Actions</th> </tr> </thead> <tbody> <tr ng-repeat="item in uploader.queue"> <td><strong>{{ item.file.name }}</strong></td> <td ng-show="uploader.isHTML5" nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td> <td ng-show="uploader.isHTML5"> <div class="progress" style="margin-bottom: 0;"> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div> </div> </td> <td class="text-center"> <span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span> </td> <td nowrap> <button type="button" class="btn btn-success btn-xs" ng-click="item.upload()" ng-disabled="item.isReady || item.isUploading || item.isSuccess"> <span class="glyphicon glyphicon-upload"></span> Upload </button> <button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"> <span class="glyphicon glyphicon-ban-circle"></span> Cancel </button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"> <span class="glyphicon glyphicon-trash"></span> Remove </button> </td> </tr> </tbody> </table> <div> <div> Queue progress: <div class="progress" style=""> <div class="progress-bar" role="progressbar" ng-style="{ \'width\': uploader.progress + \'%\' }"></div> </div> </div> <button type="button" class="btn btn-success btn-s" ng-click="uploader.uploadAll()" ng-disabled="!uploader.getNotUploadedItems().length"> <span class="glyphicon glyphicon-upload"></span> Upload all </button> <button type="button" class="btn btn-warning btn-s" ng-click="uploader.cancelAll()" ng-disabled="!uploader.isUploading"> <span class="glyphicon glyphicon-ban-circle"></span> Cancel all </button> <button type="button" class="btn btn-danger btn-s" ng-click="uploader.clearQueue()" ng-disabled="!uploader.queue.length"> <span class="glyphicon glyphicon-trash"></span> Remove all </button> </div> </div>',controller:"AppController",controllerAs:"uploader",bindToController:!0,scope:{url:"@"},link:function(e,t,a,i){}}}]).controller("AppController",["$scope","FileUploader",function(e,t){var a=e.uploader=new t({url:e.url||"https://lexlab.io/upload",autoUpload:!0});a.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<10}}),a.onWhenAddingFileFailed=function(e,t,a){console.info("onWhenAddingFileFailed",e,t,a)},a.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},a.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},a.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},a.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},a.onProgressAll=function(e){console.info("onProgressAll",e)},a.onSuccessItem=function(e,t,a,i){console.info("onSuccessItem",e,t,a,i)},a.onErrorItem=function(e,t,a,i){console.info("onErrorItem",e,t,a,i)},a.onCancelItem=function(e,t,a,i){console.info("onCancelItem",e,t,a,i)},a.onCompleteItem=function(e,t,a,i){console.info("onCompleteItem",e,t,a,i)},a.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",a)}]).controller("GalleryCarouselController",["$scope","config","Collection","$rootScope","$ACTIVEROAR",function(e,t,a,i,n){var l=this,t=t;e.config=t,l.slides=[],t.id?a(t.id).$loaded().then(function(e){angular.forEach(e.roarlist,function(e,t){a(e).$loaded().then(function(e){l.slides.push(angular.copy(e))})})}):(a(n.page).$loaded().then(function(e){angular.forEach(e.roarlist,function(e,t){a(e).$loaded().then(function(e){l.slides.push(angular.copy(e))})})}),l.slides.push({title:"DemoSlide",media:"/llp_core/img/lexlab.svg"}),l.slides.push({title:"PatentPhD",media:"/llp_core/img/logolong.png"}))}]).controller("GalleryCarousel",["",function(){}]).directive("ngThumb",["$window",function(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof e.File},isImage:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(t)}};return{restrict:"A",template:"<canvas/>",link:function(e,a,i){function n(e){var t=new Image;t.onload=l,t.src=e.target.result}function l(){var e=s.width||this.width/this.height*s.height,t=s.height||this.height/this.width*s.width;o.attr({width:e,height:t}),o[0].getContext("2d").drawImage(this,0,0,e,t)}if(t.support){var s=e.$eval(i.ngThumb);if(t.isFile(s.file)&&t.isImage(s.file)){var o=a.find("canvas"),r=new FileReader;r.onload=n,r.readAsDataURL(s.file)}}}}}]),angular.module("adf.widget.getphd").run(["$templateCache",function(e){e.put("{widgetsPath}/getphd/src/edit.html",'<form role=form><div class=form-group><label for=sample>Application #</label> <input type=text class=form-control id=sample ng-model=config.appnum placeholder="Enter Application #"></div></form>'),e.put("{widgetsPath}/getphd/src/editgallery.html","<form role=form><div class=form-group><label for=sample>Interval, in milliseconds:</label> <input type=number class=form-control ng-model=config.interval><br>Enter a negative number or 0 to stop the interval.</div><div class=form-group><label>Disable Slide Looping</label> <input type=checkbox ng-model=config.nowrap></div><div class=form-group><label>Pause on Hover?</label> <input type=checkbox ng-model=config.pauseonhover></div><div class=form-group><label>Disable Transition</label> <input type=checkbox ng-model=config.transition></div></form>"),e.put("{widgetsPath}/getphd/src/gallery.html",'<div style="min-height: 305px"><uib-carousel interval=config.interval no-pause={{config.pauseonhover}} no-transition={{config.transition}} no-wrap={{config.nowrap}}><uib-slide ng-repeat="slide in gallery.slides" active={slide.active} index=slide.index><img ng-src={{slide.media}} style=margin:auto;><div class=carousel-caption><h4>Slide {{slide.$index}}</h4><p>{{slide.title}}</p></div></uib-slide></uib-carousel></div>'),e.put("{widgetsPath}/getphd/src/titleTemplate.html",'<div class=card-header style=z-index:1;padding:0px;><h4 class="bs-callout bs-callout-primary"><span style=color:steelblue;>{{config.title || roarevent.title}}</span><br><div class=row style=width:100%;><small>{{roarevent.date | date}}</small> <span class=pull-right style=position:absolute;right:5px;font-size:12px;><a title=notes ng-click=note(roarevent)><i class="fa fa-pencil" style=color:steelblue;></i></a><a title="reload widget content" ng-click=reload()><i class="fa fa-refresh" style=color:steelblue;></i></a> <a title="change widget location" class=adf-move><i class="fa fa-arrows" style=color:steelblue;></i></a> <a title="collapse widget" ng-show="options.collapsible && !widgetState.isCollapsed" ng-click="widgetState.isCollapsed = !widgetState.isCollapsed"><i class="fa fa-minus" style=color:steelblue;></i></a> <a title="expand widget" ng-show="options.collapsible && widgetState.isCollapsed" ng-click="widgetState.isCollapsed = !widgetState.isCollapsed"><i class="fa fa-plus" style=color:steelblue;></i></a> <a title="copy to clipboard" ng-click=edit(roarevent.id)><i class="fa fa-copy" style=color:steelblue;></i></a> <a title="fullscreen widget" ng-click=openFullScreen(roarevent.id) ng-show="options.maximizable || true"><i class="fa fa-expand" style=color:steelblue;></i></a> <a title="remove widget" ng-click=remove() onclick=$(this).parent().parent().parent().parent().parent().remove()><i class="fa fa-close" style=color:steelblue;></i></a></span></div></h4></div>'),e.put("{widgetsPath}/getphd/src/view.html",'<div ng-controller="MainCtrl as main"><div class="card card-primary card-block btn-glass drop-target" nv-file-drop uploader=uploader drop-files=handleFiles(files) style="border: 2px dashed blue;margin: 5px;" ng-if=main.showupload><div ng-controller=pageslideCtrl><button class="row btn btn-glass btn-primary img img-rounded" style=width:100%;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:center;flex-direction:row; ng-click=main.toggle() ng-class="{\'btn-success\': (main.progress == 100),\'btn-danger\':(main.progress === \'failed\')}"><uib-progressbar class="btn-glass fa fa-3x active stripped" ng-class="{\'active\':(main.progress < 100)}" ng-if=main.progress value=main.progress style=height:40px;margin:auto;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;align-self:stretch; type={{main.progresstype}}></uib-progressbar><i class="fa fa-upload fa-3x">{{main.progress}}<span ng-show=main.progress>%</span></i> <img src=https://lexlab.firebaseapp.com/img/GoldLogoLong.svg class="pop img img-rounded pull-right" style=max-height:100px; ng-if=!main.progress></button><div class="row btn btn-glass btn-info" style=position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:center;flex-direction:row; ng-if=main.progresstwo><uib-progressbar class="btn-glass fa fa-3x active striped" ng-class="{\'active\':(main.progresstwo < 100)}" value=main.progresstwo max=main.extractedfiles style=height:40px;margin:auto;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;align-self:stretch; type={{main.progresstype}}></uib-progressbar><i class="fa fa-fw fa-3x fa-spinner fa-spin"></i><i class="fa fa-3x">{{main.progresstwo}}/{{main.extractedfiles}}</i></div><div pageslide ps-open=main.checked ps-key-listener=true ps-side="{{main.side || \'left\'}}" ps-class="{{main.styleClass || \'card-dark btn-glass\'}}" ps-size="{{main.size || \'400\'}}" style=overflow-x:visible;overflow-y:scroll;><div ng-include="\'/getphdwidget/src/phd/step-1.html\'"></div><hr></div></div></div><div class="card card-fancy card-rounded card-block card-thick" style="text-align: left;color: #444;" ng-if=phd.file><button class="alert btn-glass btn-primary img card-rounded row" style="position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:center;justify-content:space-between;flex-direction:row;background-color:#35688F;padding:2px;box-shadow:inset 10px 2px 50px rgba(0,0,0,0.5);" ng-click=main.collapse()><div style=display:flex;justify-content:flex-end;flex-direction:column;align-content:flex-end;vertical-align:middle;align-items:flex-end;><h4 class="card-title ng-binding display-4" style="margin-bottom:0;color: #fff;">US {{phd.patent.number | number:0 }}</h4><h5 class="card-subtitle ng-binding" style=color:#ddd;><span class=lead>USSN {{phd.application[\'Application Number\']}}</span></h5></div><img src=/llp_core/img/GoldLion.svg class="img lionlogofilter" style="width:75px;height: auto;"><div style=display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;><img src=/llp_core/img/GoldLogoLong.svg class=img style=height:45px;> <img src=/llp_core/img/GoldPhdLogoLong.svg class=img style=height:25px;padding-left:2px;></div></button><div uib-collapse=collapsereport class="card clearfix" style=padding:0;margin:0;><blockquote class="bs-callout bs-callout-NOA" style="margin: 0;"><h4>{{phd.application[\'Title of Invention\']}}</h4><p style=font-size:10px;><cite>{{phd.application[\'First Named Inventor\']}} <small><emphasis>Issued&nbsp&nbsp&nbsp&nbsp<span editable-text="phd.application[\'Issue Date of Patent\']">{{phd.application[\'Issue Date of Patent\']}}</span></emphasis></small></cite></p></blockquote><uib-tabset class=tabbable justified=true type=pills><uib-tab active=main.tabs[0].isActive disabled=main.tabs[0].disabled select="main.tabs[0].isActive = true" deselect="main.tabs[0].isActive = false" style="margin: 0 5px;"><uib-tab-heading class=text-Petition>PTO Metadata</uib-tab-heading><uib-tab-content ng-if=main.tabs[0].isActive><uib-tabset class="tabbable tabs-left"><uib-tab><uib-tab-heading>USSN {{phd.application[\'Application Number\']}}</uib-tab-heading><uib-tabset class=tabbable><uib-tab ng-repeat="file in phd.file" heading="{{file.label | uppercase}}"><uib-tab-content><pre class="card card-block card-fancy" ng-bind=file.file></pre></uib-tab-content></uib-tab></uib-tabset></uib-tab><uib-tab ng-if=phd.application><uib-tab-heading ng-style>APPLICATION</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="(key, value) in phd.application"><td><strong>{{::key}}</strong></td><td>{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab class=text-info ng-if=phd.attorney><uib-tab-heading ng-style>ATTORNEY</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="(key, line) in phd.attorney"><td ng-repeat="(key, value) in line">{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab class=text-success ng-if=phd.continuity><uib-tab-heading ng-style>CONTINUITY</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-condensed table-hover table-responsive"><tbody><tr ng-repeat="(key,line) in phd.continuity"><td ng-repeat="(key, value) in line">{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.foreign><uib-tab-heading class=text-warning ng-style>FOREIGN PRIORITY</uib-tab-heading><uib-tab-content><table class="table table-stripped table-condensed table-hover table-responsive"><thead><tr><th><strong>Country</strong></th><th><strong>Priority</strong></th><th><strong>Priority Date</strong></th></tr></thead><tbody><tr ng-repeat="p in phd.foreign"><td ng-bind="::p[\'Country\']"></td><td ng-bind="::p[\'Priority\']"></td><td ng-bind="::p[\'Priority Date\'] | date"></td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.term><uib-tab-heading>PATENT TERM ADJUSTMENTS</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="(key, line) in phd.term"><td ng-repeat="(key,value) in line">{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.transaction><uib-tab-heading ng-style>TRANSACTION</uib-tab-heading><uib-tab-content><table class="table table-striped table-hover table-condensed table-responsive"><thead><tr><th><strong>Date</strong></th><th><strong>Transaction Description</strong></th></tr></thead><tbody><tr ng-repeat="trans in phd.transaction"><td>{{::trans[\'Date\']}}</td><td>{{::trans[\'Transaction Description\']}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.imagefile><uib-tab-heading ng-style>IMAGE FILE WRAPPER</uib-tab-heading><uib-tab-content><input type=text ng-model=main.query placeholder=search... class=pull-right><table class="table table-hover table-condensed table-responsive"><thead><tr><th ng-click="main.dog = \'Mail\\ Room\\ Date\'; maybe = !maybe"><strong>Mail Room Date<i class=fa ng-if="main.dog == \'Mail Room Date\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Code\'; maybe = !maybe"><strong>Document Code<i class=fa ng-if="main.dog == \'Document Code\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Description\'; maybe = !maybe"><strong>Document Description<i class=fa ng-if="main.dog == \'Document Description\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Category\'; maybe = !maybe"><strong>Document Category<i class=fa ng-if="main.dog == \'Document Category\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Page\\ Count\'; maybe = !maybe"><strong>Page Count<i class=fa ng-if="main.dog == \'Page Count\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Filename\'; maybe = !maybe"><strong>Filename<i class=fa ng-if="main.dog == \'Filename\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th></tr></thead><tbody><tr ng-repeat="roarevent in phd.imagefile | filter: main.query | orderBy: main.dog : maybe"><td ng-bind="roarevent[\'Mail Room Date\']"></td><td ng-bind="roarevent[\'Document Code\']"></td><td ng-bind="roarevent[\'Document Description\']"></td><td ng-bind="roarevent[\'Document Category\']"></td><td ng-bind="roarevent[\'Page Count\']"></td><td><a ng-click=main.popdoc(roarevent)>{{roarevent[\'Filename\']}}</a></td></tr></tbody></table></uib-tab-content></uib-tab></uib-tabset></uib-tab-content></uib-tab><uib-tab class="btn-glass NOA" active=main.tabs[1].isActive disable=main.tabs[1].disabled select="main.tabs[2].isActive = true" deselect="main.tabs[1].isActive = false" style="margin: 0 5px;"><uib-tab-heading class=text-NOA ng-style>US {{(phd.patent.number | number:0) || (config.IPAYEAR + "&nbsp;/&nbsp;" + config.IPANUM) }}</uib-tab-heading><uib-tab-content ng-if=main.tabs[2].isActive><blockquote class=col-sm-8 cite={{phd.patent.media}} style="margin: 25px;margin-top:35px;"><h4><strong ng-bind=tree.title></strong> - <small>{{tree.claim_total}} Claims</small></h4><p ng-bind-html="tree.abstract | highlight: config.query | trustAsHTML"></p><cite>{{phd.patent.filename}}<a class="fa fa-external-link fa-border" ng-click=main.poppatent(phd.patent)></a></cite></blockquote><div class=col-sm-4><input class=pull-right ng-model=config.query type=search style=margin:10px; ng-model-options="{updateOn: \'default blur\',debounce: {\'default\':250,\'blur\':0}}"> <a style=position:absolute;right:0; class="btn fa fa-close" ng-click="config.query = null"></a><div class=col-md-3><ul class=list-unstyled><li><input type=checkbox ng-model=highlight> <small>Highlight exact matches</small></li><li><input type=checkbox ng-model=dim> <small>Dim non-matches</small></li></ul></div><div class=col-md-3><ul class=list-unstyled><li ng-repeat="field in availableFields"><input type=checkbox ng-click=toggleSupport(field) ng-checked="supportedFields.indexOf(field) > -1"> <small>Match <code>{{ field }}</code></small></li></ul></div></div><div class="row showscroll" style="margin: 5px 5px;overflow-x:scroll;"><a ng-repeat="link in tree.drawings" ng-click=main.pop(link) class=btn style=margin:2px;><img ng-src={{tree.thumbnails[$index]}} class="img img-shadow"></a></div><div class=col-sm-6><d3pendingtree id="{{phd.patent.number || config.IPAYEAR + config.IPANUM}}" class={{config.query}} tree=tree pattern={{config.query}} patent="{{phd.patent.number || config.IPAYEAR + config.IPANUM}}" style=width:100%;height:600px;></d3pendingtree></div><div class=col-sm-6><div id=info></div><div ui-tree=treeOptions class="card card-block"><ol ui-tree-nodes max-depth=6 ng-model=tree.claims><li ui-tree-node class="card card-block" ng-repeat="node in tree.claims" ng-include="\'claim_renderer.html\'" style=padding-right:0rem;padding-bottom:0.1rem; ng-hide="!treeFilter(item, pattern, supportedFields) && !dim" ng-class="{\'filtered-out\':!treeFilter(item, pattern, supportedFields) && dim}"></li></ol></div><script type=text/ng-template id=claim_renderer.html><div ui-tree-handle class="tree-node tree-node-content"> <div class="tree-node-content flextoprow " style="position:relative;"> <a class="btn btn-xs pull-left" data-nodrag ng-click="toggle(this)" ng-if="node.children && (node.children.length > 0)"><span class="fa " ng-class="{\'fa-chevron-right\': collapsed, \'fa-chevron-down\': !collapsed}" style="color:steelblue;transition:all 0.25s ease;"></span></a> <input type="text" ng-model="node.text" ng-change="node.$save();" ng-model-options="{ updateOn: \'default blur\', debounce: {\'default\': 1000, \'blur\': 0} }" style="padding: 0.5rem;color:#444;" ng-if="config.editable"> <a class="btn showonhover" data-nodrag ng-if="config.editable" ng-click="remove(this);"><span class="fa fa-close text-danger "></span></a> <!--<a class="btn " data-nodrag ng-if="config.editable" ng-click="toc.newsubsection(this)" style=""><span class="fa fa-plus text-success"></span></a>--> <div ng-bind-html="node.text | words | highlight: config.query "></div> <!--<a class="gototarget btn" data-nodrag ui-sref="{{parentstate}}.righttab({tabid: node.id})" style=""> <span ng-if="!config.editable" class="pull-left">{{node.text}}</span><i style="position:absolute;right:0;">&nbsp;</i></a>--> </div> </div> <ol ui-tree-nodes="" ng-model="node.children" ng-class="{\'hidden\': collapsed}" style=""> <li class="card card-block img-shadow" ng-repeat="node in node.children" ui-tree-node ng-include="\'claim_renderer.html\'" style="padding-right:0rem;padding-bottom:0.1rem;padding-left:5px;" ng-hide="!treeFilter(item, pattern, supportedFields) && !dim" ng-class="{\'filtered-out\':!treeFilter(item, pattern, supportedFields) && dim}"> </li> </ol></script></div></uib-tab-content></uib-tab></uib-tabset></div></div></div>'),
e.put("{widgetsPath}/getphd/src/phd/step-1.html",'<div class="panel panel-primary" style=margin:0rem;margin-left:-0.75rem;overflow:visible;><div class="panelhead2 panel-heading btn-primary btn-glass clearfix" style=margin-right:-1rem;border-top-left-radius:0rem;border-bottom-left-radius:0rem;border-top-right-radius:2rem;border-bottom-right-radius:2rem;><img src=/llp_core/img/GoldLion.svg class="img lionlogofilter pull-left" style="width:auto;height: 50px;align-self:flex-start;position:absolute;margin-top:-10px;"><div class=pull-right style=display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;align-self:flex-end;><img src=/llp_core/img/GoldLogoLong.svg class=img style=height:25px;> <img src=/llp_core/img/GoldPhdLogoLong.svg class=img style=height:10px;padding-left:2px;></div></div><div class=panel-body style=overflow:scroll;><blockquote class="bs-callout bs-callout-primary card-header" style=margin:0; ng-hide=response><p class="text-muted text-left" style=text-align:left;font-size:10px;>Use the following fields to directly download U.S. utility patents and published patent applications from Google Patents, and to directly download .zip files of their prosecution histories from the <a href="https://www.uspto.gov/" uib-tooltip="United States Patent & Trademark Office official site" tooltip-trigger=mouseenter>USPTO</a> public data-proxy-repositors, <a href="https://www.google.com/patents/" uib-tooltip="Google Patents" tooltip-trigger=mouseenter>Google</a> & <a href="http://www.reedtech.com/" uib-tooltip=ReedTech tooltip-trigger=mouseenter>ReedTech</a>. To automatically parse a prosecution history, drag the downloaded .zip file over the Patent PhD panel to the right on the main screen, and drop the file within the dropzone once it has become marked by a dotted border. The .zip file will then automatically upload to our servers, where LEO will generate a Patent PhD Report and return it to the main display screen for your review.</p></blockquote><blockquote class="bs-callout bs-callout-primary card-header" style=margin:0; ng-show=response><h4>{{response.title}} <small class=text-muted>{{response.claim_total}} Claims</small></h4><p class="text-muted text-left" style=text-align:left;font-size:10px;>{{response.abstract}}</p></blockquote><blockquote class="bs-callout bs-callout-success card-header" style=text-align:left;margin:0;><h4 class=card-title style=text-align:left;font-size:12px;><label for=patentnumber class="card-text text-muted"><strong>Enter US Patent Number</strong></label></h4><div class=input-group><input type=number placeholder="Patent #" style="padding:0.75rem;font-size:14px;font-family:\'Helvetica\',sans-serif;text-shadow:0.1rem 0.1rem 0.1rem rgba(50,50,50,0.5);" ng-model=config.PNUM ng-blur=main.remoteconfig(config.PNUM)> <button class="btn btn-default right" tooltip-trigger=mouseenter uib-tooltip="Download Patent" ng-click=main.getpatentdownload(config.PNUM);><span class="text-success fa fa-2x fa-download"></span></button></div></blockquote><blockquote class="bs-callout bs-callout-warning card-header" style=text-align:left;margin:0;><h4 class=card-title style=text-align:left;font-size:12px;><label for=publishedapplication class="card-text text-muted"><strong>Enter Year of Publication and Published Application Number</strong></label></h4><div class=input-group><input type=number placeholder=YYYY style="max-width:10rem;padding:0.75rem;font-size:14px;font-family:\'Helvetica\',sans-serif;text-shadow:0.1rem 0.1rem 0.1rem rgba(50,50,50,0.5);border-radius:0px;border-top-left-radius:1rem;border-bottom-left-radius:1rem;" ng-model=config.IPAYEAR maxlength=4> <input type=text placeholder="# PA" style="padding:0.75rem;font-size:14px;font-family:\'Helvetica\',sans-serif;text-shadow:0.1rem 0.1rem 0.1rem rgba(50,50,50,0.5);border-radius:0px;margin:0;display:inline-block;margin-left:-1px;margin-right:-1px;" ng-model=config.IPANUM> <button class="btn btn-default" ng-click="main.getpublishedapplication(config.IPAYEAR, config.IPANUM)"><span class="text-warning fa fa-download fa-2x"></span></button></div></blockquote><blockquote class="bs-callout bs-callout-danger card-header" style=text-align:left;margin:0;><h4 class=card-title style=text-align:left;font-size:12px;><label class="card-text text-muted">Enter US Application Serial Number</label></h4><div class=input-group><form name=application><input type=text placeholder="Application #" ng-model=config.appnum style="padding:0.75rem;font-size:14px;font-family:\'Helvetica\',sans-serif;text-shadow:0.1rem 0.1rem 0.1rem rgba(50,50,50,0.5);" ng-pattern=\\d+> <button class="btn btn-default right" ng-click="main.getfilehistory(config.appnum,\'reedtech\')" uib-tooltip="DOWNLOAD FROM REEDTECH" tooltip-placement=top title="DOWNLOAD FILE HISTORY FROM REEDTECH" tooltip-animation=true><span id=reedtechbutton class="fa fa-2x fa-file-zip-o text-danger"></span></button> <button class="btn btn-default right" ng-click="main.getfilehistory(config.appnum,\'google\')" uib-tooltip="DOWNLOAD FROM GOOGLE" tooltip-placement=top title="DOWNLOAD FILE HISTORY FROM GOOGLE" tooltip-animation=true><span id=googlebutton class="text-danger fa fa-2x fa-file-zip-o"></span></button> <button class="btn btn-default" ng-click=main.remotezip(config.appnum) uib-tooltip="TRY AUTO DOWNLOAD **experimental" tooltip-placement=top title="TRY AUTO DOWNLOAD* (**experimental**)" tooltip-animation=true><span class="text-primary fa fa-2x fa-chrome"></span></button></form></div></blockquote></div></div>'),e.put("{widgetsPath}/getphd/src/phd/step-2.html",'<div class="card card-warning" style=margin:0.5rem;><div class=card-header><h6 class=card-title>+PhD Step 2 - Download Image File Wrapper</h6></div><div class=card-text><input type=text placeholder="Application #" ng-model=config.appnum><div class=row><a class="btn btn-warning fa fa-download" href=https://storage.googleapis.com/uspto-pair/applications/{{config.appnum}}.zip target=_blank data-toggle=popover data-placement=bottom title="DOWNLOAD FROM GOOGLE" data-content data-animation=true data-trigger=hover style=color:white; onclick="window.open(this.href, \'\', \'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=300,top=150\'); return false;" ng-click="main.remotezip(config.appnum, this.href)">from Google</a> <a class="btn btn-warning fa fa-download" href=https://patents.reedtech.com/downloads/pair/{{config.appnum}}.zip target=_blank data-toggle=popover data-placement=bottom title="DOWNLOAD FROM REEDTECH" data-content data-animation=true data-trigger=hover style=color:white; onclick="window.open(this.href, \'\', \'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=300,top=150\'); return false;" ng-click="main.remotezip(config.appnum, this.href)">from ReedTech</a></div></div></div>'),e.put("{widgetsPath}/getphd/src/phd/step-3.html",'<div class="panel panel-danger"><div class=panel-heading><h4 class=splash>+PhD Step 3 - Unzip & Upload the Files</h4></div><div class=panel-body><h6 class=splash>{{ngDialogData[0].PNUM}} - {{ngDialogData[1].APPNUM}}</h6><span us-spinner ng-show=spinme></span><br><button class="btn btn-info fa fa-arrow-up pull-right" lk-google-picker on-picked=addfilehistory>upload</button><div ng-hide="files.length == 0"><div class="col-sm-28 col-sm-offset-1 panel sub-independent" style="padding: 1rem;"><h4>Add File History</h4><label>ID#: <input type=text ng-model=collection.rid placeholder="collection id"></label> <label class=pull-right>Box: <input type=text ng-model=collection.box placeholder="collection box"></label><br><small style="color: red;">*All Fields Required</small> <button class="btn-default pull-right" ng-click="files=[]">cancel</button> <button class="btn-info pull-right" ng-click="addfilehistory(files);spinme = true">confirm</button><br><small><strong>Note:</strong> This process may take several minutes to complete. Please wait until the process is complete. When completed, you will be brought to the results automatically.</small></div></div></div></div>')}]),angular.module("textSizeSlider",[]).directive("textSizeSlider",["$document",function(e){return{restrict:"E",template:'<div class="text-size-slider"><span class="small-letter" ng-style="{ fontSize: min + unit }">A</span> <input type="range" min="{{ min }}" max="{{ max }}" step="{{ step || 0 }}" ng-model="textSize" class="slider" value="{{ value }}" /> <span class="big-letter" ng-style="{ fontSize: max + unit }">A</span></div>',scope:{min:"@",max:"@",unit:"@",value:"@",step:"@"},link:function(t,a,i){t.textSize=t.value,t.$watch("textSize",function(a){e.root.style.fontSize=a+t.unit,$("html").css({"font-size":a+t.unit})})}}}]),angular.module("roar",["angularFileUpload","pageslide-directive"]).factory("$mocks",[function(){var e={groupId:"0000x0000",matterId:"0000x0000",pId:"0000x0000",roarId:"0000x0000"};return e}]).factory("$roarevent",["OWNERSHIPDOCS","ARTDOCS","MERITSDOCS","DOCNAMES","PETDOCCODES","NOADOCCODES","INTVDOCCODES","PTODOCCODES","APPDOCCODES","$q","$filter","ckstarter","ckender",function(e,t,a,i,n,l,s,o,r,c,d,p,u){return function(e){function t(e){var t=angular.copy(e);if(t.filename.indexOf(".pdf")>-1){var c=e.Filename||e.name||e.filename,d=c.slice(0,c.indexOf("-")),p=c.slice(c.indexOf("-")+1,c.indexOf("-")+11),u=c.slice(c.lastIndexOf("-")+1,c.indexOf(".pdf"));t.content_type="document",e.url&&(t.media=e.url,t.uuid=e.id,t.mimeType=e.mimeType||null),t.description=e["Document Description"]||null,t.filename=e.Filename||e.name||e.filename,t.collections=[],t.application=d||null,t.date=p||null,t.doccode=e["Document Code"]||u,angular.forEach(r,function(e,a){u===e&&(t.styleClass="Applicant")}),angular.forEach(o,function(e,a){u===e&&(t.styleClass="PTO")}),angular.forEach(s,function(e,a){u===e&&(t.styleClass="Interview")}),angular.forEach(l,function(e,a){u===e&&(t.styleClass="NOA")}),angular.forEach(n,function(e,a){u===e&&(t.styleClass="Petition")}),angular.forEach(i,function(e,a){angular.forEach(e,function(e,a){u===a?(t.name=e,t.title=e):t.name=c})});var f=(new Date,new Date),g=f.getTime();return t.rows=[{columns:[{cid:g+10,styleClass:"col-sm-6",widgets:[{config:{height:"30em",url:t.media||"http://www.google.com"},title:t.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"iframe",wid:g+100,styleClass:t.styleClass||"btn-dark"}]},{cid:g+1e3,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE"},title:t.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"ckwidget",wid:g+15,styleClass:t.styleClass||"btn-dark"}]}]}],t.structure="6-6",a.resolve(t)}var c=e.Filename||e.name||e.filename;t.name=c,t.title=c,e.url&&(t.media=e.url,t.uuid=e.id,t.mimeType=e.mimeType||null);var f=(new Date,new Date),g=f.getTime();return t.content='<!DOCTYPE html><html><head><title></title><link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" rel= "stylesheet" /><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet"/><link href="//lexlab.io/llp_core/dist/app.full.min.css" rel= "stylesheet " /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tether-select/1.1.1/css/select-theme-default.css"/><script src= "https://code.jquery.com/jquery-2.2.0.min.js "></script><script src= "https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js "></script><script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/tether-select/1.1.1/js/select.min.js"></script><script src= "https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js "></script><base href= "/ " target= "fframe " /></head><body class= "dark-bg "><div class= "container-fluid "><div class= "row "><div class= "col-xs-12 "><div class= "card card-block " style= "padding:10px 20px; "><p style= "text-align:center "><img alt= " " class= " img-shadow img-responsive " src= "'+e.url+'" style= "width: 100%; height: auto; " /></p><p>&nbsp;</p></div></div></div></div><footer class= "navbar-fixed-bottom "><p style= "padding-left:30px;margin-left:30px;text-indent:20px; ">&nbsp;&nbsp;&nbsp;&nbsp;CONTAINS MATERIAL SUBJECT TO PROTECTIVE ORDER</p></footer></body></html>',t.rows=[{columns:[{cid:g+10,styleClass:"col-sm-3",widgets:[{config:{height:"30em",url:t.media||"http://www.google.com"},title:t.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"iframe",wid:g+100,styleClass:t.styleClass||"btn-dark"}]},{cid:g+1e3,styleClass:"col-sm-9",widgets:[{config:{id:"PROMISE"},title:t.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"ckwidget",wid:g+15,styleClass:t.styleClass||"btn-dark"}]}]}],t.structure="3-9",a.resolve(t)}var a=c.defer();return t(e),a.promise}}]).factory("$roarmap",["$stateParams","Matter","Collection","ROARevent","ROARevents","Collections","$mocks","$timeout","OWNERSHIPDOCS","ARTDOCS","MERITSDOCS","DOCNAMES","PETDOCCODES","NOADOCCODES","INTVDOCCODES","PTODOCCODES","APPDOCCODES","$q","PHD","$log","FIREBASE_URL","filepickerService","$location","$ACTIVEROAR","$dashboards","CLAIMDOCS","ckstarter","ckender","ckheader",function(e,t,a,i,n,l,s,o,r,c,d,p,u,f,g,m,h,b,v,y,x,w,C,k,A,P,S,E,D){return function(i,n,s){function r(e){x(e)}function v(e,t){var i=a(e[3]).$ref(),n=a(e[2]).$ref(),l=a(e[1]).$ref(),o=a(e[0]).$ref();return angular.forEach(t.imagefile,function(e,a){if(""!==e["Mail Room Date"]&&""!==e.Filename){var r=(angular.copy(t.application["Application Number"]).replace("/","").replace(",","").replace(",",""),new Date,angular.copy(e)),b=new Date(e["Mail Room Date"]),v=(b.getFullYear(),b.getMonth(),b.getDate(),b.toDateString()),x=e.Filename||null,w=x.slice(0,x.indexOf("-")),k=x.slice(x.indexOf("-")+1,x.indexOf("-")+11),S=x.slice(x.lastIndexOf("-")+1,x.indexOf(".pdf"));r.content_type="document","localhost"===C.host()?(r.selflink="/files/public/uspto/"+w+"/"+w+"-image_file_wrapper/"+x,r.media=r.selflink):(r.selflink="https://lexlab.io/files/public/uspto/"+w+"/"+w+"-image_file_wrapper/"+x,r.media=r.selflink),r.description=e["Document Description"]||null,r.filename=e.Filename||null,r.collections=[],r.Application=w||null,r.date=k||null,r.rid=t.imagefile.indexOf(e),r.doccode=e["Document Code"]||null,angular.forEach(p,function(e,t){angular.forEach(e,function(e,t){S===t&&(r.name=e,r.title=e)})});var E='<!DOCTYPE html><html><head><title></title><link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" rel= "stylesheet" /><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet"/><link href="//lexlab.io/llp_core/dist/app.full.min.css" rel= "stylesheet " /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tether-select/1.1.1/css/select-theme-default.css"/><script src= "https://code.jquery.com/jquery-2.2.0.min.js "></script><script src= "https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.16/d3.min.js "></script><script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/tether-select/1.1.1/js/select.min.js"></script><script src= "https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/js/bootstrap.min.js "></script><base href= "/ " target= "fframe " /></head><body class= "dark-bg "><div class= "container-fluid "><div class= "row "><div class= "col-xs-12 "><div class= "card card-block ">',D='</div></div></div></div><footer class= "navbar-fixed-bottom "><p style= "padding-left:30px;margin-left:30px;text-indent:20px; ">&nbsp;&nbsp;&nbsp;&nbsp;CONTAINS MATERIAL SUBJECT TO PROTECTIVE ORDER</p></footer></body></html>',T='<div class="container-fluid two-col-right"><div class="row two-col-right"><div class="col-sm-9 col-main"><div class="bs-callout bs-callout-Applicant"><h4>'+r.title+"</h4><p>Filed "+v+"</p><cite>"+r.filename+'&nbsp;&nbsp;<a href="'+r.media+'" target="fframe"><i class="fa fa-external-link"></i></a></cite></div></div><div class="col-sm-3 col-sidebar"><p><img src="https://placehold.it/250x208/4682b4/fff/&text='+r.rid+'" class="img img-responsive img-shadow"/></p></div></div></div><p>&nbsp;</p>',I='<div class="container-fluid two-col-left"><div class="row two-col-left"><div class="col-md-3 col-sidebar"><p><img src="https://placehold.it/250x208/640002/fff/&text='+r.rid+'" class="img img-responsive img-shadow"/></p></div><div class="col-md-9 col-main"><div class="bs-callout bs-callout-PTO bs-callout-reverse"><h4>'+r.title+"</h4><p>Filed "+v+"</p><cite>"+r.filename+'&nbsp;&nbsp;<a href="'+r.media+'" target="fframe"><i class="fa fa-external-link"></i></a></cite></div></div></div></div><p>&nbsp;</p>',O='<div class="container-fluid two-col-left"><div class="row two-col-left"><div class="col-md-3 col-sidebar"><p><img src="https://placehold.it/250x208/7c994f/fff/&text='+r.rid+'" class="img img-responsive img-shadow"/></p></div><div class="col-md-9 col-main"><div class="bs-callout bs-callout-NOA bs-callout-reverse"><h4>'+r.title+"</h4><p>Filed "+v+"</p><cite>"+r.filename+'&nbsp;&nbsp;<a href="'+r.media+'" target="fframe"><i class="fa fa-external-link"></i></a></cite></div></div></div></div><p>&nbsp;</p>',$='<div class="container-fluid two-col-right"><div class="row two-col-right"><div class="col-sm-9 col-main"><div class="bs-callout bs-callout-Petition"><h4>'+r.title+"</h4><p>Filed "+v+"</p><cite>"+r.filename+'&nbsp;&nbsp;<a href="'+r.media+'" target="fframe"><i class="fa fa-external-link"></i></a></cite></div></div><div class="col-sm-3 col-sidebar"><p><img src="https://placehold.it/250x208/b48200/fff/&text='+r.rid+'" class="img img-responsive img-shadow"/></p></div></div></div><p>&nbsp;</p>',F='<div class="container-fluid two-col-right"><div class="row two-col-right"><div class="col-sm-9 col-main"><div class="bs-callout bs-callout-Interview"><h4>'+r.title+"</h4><p>Filed "+v+"</p><cite>"+r.filename+'&nbsp;&nbsp;<a href="'+r.media+'" target="fframe"><i class="fa fa-external-link"></i></a></cite></div></div><div class="col-sm-3 col-sidebar"><p><img src="https://placehold.it/250x208/&text='+r.rid+'" class="img img-responsive img-shadow"/></p></div></div></div><p>&nbsp;</p>';angular.forEach(h,function(e,t){S===e&&(r.styleClass="Applicant",r.content=E+T+D)}),angular.forEach(m,function(e,t){S===e&&(r.styleClass="PTO",r.content=E+I+D)}),angular.forEach(g,function(e,t){S===e&&(r.styleClass="Interview",r.content=E+F+D)}),angular.forEach(f,function(e,t){S===e&&(r.styleClass="NOA",r.content=E+O+D)}),angular.forEach(u,function(e,t){S===e&&(r.styleClass="Petition",r.content=E+$+D)});var R=new Date,U=R.getTime();r.rows=[{columns:[{cid:U+10,styleClass:"col-sm-6",widgets:[{config:{height:"30em",url:r.media||"http://www.google.com"},styleClass:r.styleClass||"btn-dark",title:r.title||"title",type:"iframe",wid:U+100}]},{cid:U+1e3,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE"},styleClass:r.styleClass||"btn-dark",title:r.title||"title",type:"ckwidget",wid:U+1010}]}]}],r.structure="6-6",r.isActive=!1,A.$add(r).then(function(e){var a=e.key();e.update({id:a,timestamp:Firebase.ServerValue.TIMESTAMP}),e.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(a),t.roarmap.roarlist[a]=a,o.child("roarlist").child(a).set(a),angular.forEach(d,function(e,t){r.doccode===e&&(l.child("roarlist").child(a).set(a),y.info("merits",a))}),angular.forEach(c,function(e,t){r.doccode===e&&(n.child("roarlist").child(a).set(a),y.info("art",a))}),angular.forEach(P,function(e,t){r.doccode===e&&(i.child("roarlist").child(a).set(a),y.info("claims",a))})}),s.progresstwo++}}),k.resolve(e)}function x(e){var t=new Date,a=t.getTime(),i=function(t){var i=this;return i={name:"USSN "+e.application["Application Number"],rid:t.rid,title:t.title+" - USSN "+e.application["Application Number"],collection_type:"source",description:"for US "+e.application["Patent Number"],styleClass:t.styleClass,icon:t.icon,app:e.application["Application Number"],content_type:"collection",rows:[{styleClass:"row slate",columns:[{cid:a+10,styleClass:"col-sm-12",widgets:[{type:"pagebuilder",title:t.rid+" - USSN "+e.application["Application Number"],styleClass:t.styleClass||"btn-dark",config:{id:"PROMISE",url:"/llp_core/modules/roarmap/directive/roargrid/roargrid.html"}}]}]}]}},n={rid:"PHD1",title:"ALL",styleClass:"NOA",icon:"fa-legal"},l={rid:"PHD2",title:"MERITS",styleClass:"PTO",icon:"fa-balance-scale"},s={rid:"PHD3",title:"ART",styleClass:"Petition",icon:"fa-leaf"},r={rid:"PHD4",title:"CLAIMS",styleClass:"Applicant",icon:"fa-sitemap"},c=[],d={all:n,merits:l,art:s,claims:r};angular.forEach(d,function(e,t){A.$add(new i(e)).then(function(e){var t=e.key();return e.update({id:t,timestamp:Firebase.ServerValue.TIMESTAMP}),e.child("rows").child("0").child("columns").child("0").child("widgets").child("0").child("config").child("id").set(t),c.push(t)})}),o(function(){w(c,e)},1e3)}function w(e,t){var i=(new Date,new Date),n=i.getTime(),l=angular.copy(t.patent);l.rows=[{columns:[{cid:n+10,styleClass:"col-sm-6",widgets:[{config:{height:"30em",url:l.media||"http://www.google.com"},title:l.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"iframe",wid:n+100,styleClass:l.styleClass||"btn-dark"}]},{cid:n+1e3,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE"},title:l.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"ckwidget",wid:n+15,styleClass:l.styleClass||"btn-dark"}]}]}],l.structure="6-6",A.$add(l).then(function(i){var n=i.key();i.update({id:n,timestamp:Firebase.ServerValue.TIMESTAMP}),i.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(n);var l=a(e[0]).$ref(),s=a(e[1]).$ref();l.child("roarlist").child(n).set(n),s.child("roarlist").child(n).set(n),v(e,t)})}n.roarmap={collections:[],roarlist:[]},n.roarlist={};var k=b.defer(),A=(t(e.matterId,e.groupId),l()),S=a(e.pageid);S.$ref(),a(e.pId).$ref();return r(n),k.promise}}]).controller("PageslideCtrl",["$scope",function(e){e.checked=!1,e.toggle=function(){e.checked=!e.checked},e.checked1=!1,e.toggle1=function(){e.checked1=!e.checked1},e.checked2=!1,e.toggle2=function(){e.checked2=!e.checked2}}]),angular.module("llp.pdf",["LocalStorageModule"]).config(["localStorageServiceProvider",function(e){e.setPrefix("adf.getphd")}]).factory("pdfToPlainText",["$q",function(e){function t(t){var i=e.defer();PDFJS.disableWorker=!1,console.log(t);var n=PDFJS.getDocument(t.data);return n.then(a),i.promise}return function(e){t(e)};var a}]).directive("getpdftext",["extract","$document","$window","$rootScope",function(e,t,a,i){var n=function(e,t,a,i){e.pdfToPlainText=function(t){var a={title:"pdfData",content:'<div id="pdf"></div>'};e.phd.documents.push(a),PDFJS.disableWorker=!1,$("#pdf").children().remove();var i=PDFJS.getDocument(t);i.then(n)};var n=function(e){for(var t=0;t<e.numPages;t++)e.getPage(t+1).then(s)},l="</section><section class='page card card-fancy'>",s=function(t){var a=angular.element(l).appendTo("#pdf");t.getTextContent().then(function(t){console.log(t),angular.forEach(t,function(t,i){var n="";angular.forEach(t,function(e,t){return n+=e.str}),$(a).append(n),e.pages.push(n)})})}};return{restrict:"A",controller:"PDFFilesController",controllerAs:"pdff",bindToController:!0,link:n}}]).controller("PDFFilesController",["$scope","extract","$document","$window","$http","localStorageService",function(e,t,a,i,n,l){var s=this;s.name="PDFFilesController"}]),angular.module("llp.parsetsv",[]).factory("parseTSV",[function(){return function(e,t,a){var i=e,t=t,n=Papa.parse(i,t);return a?n:n.data}}]),function(e){var t=function(t,a){var t=e(t),i=this,n=e.extend({},e.fn.bootstrapWizard.defaults,a),l=null,s=null;this.rebindClick=function(e,t){e.unbind("click",t).bind("click",t)},this.fixNavigationButtons=function(){return l.length||(s.find("a:first").tab("show"),l=s.find("li:first")),e(n.previousSelector,t).toggleClass("disabled",i.firstIndex()>=i.currentIndex()),e(n.nextSelector,t).toggleClass("disabled",i.currentIndex()>=i.navigationLength()),i.rebindClick(e(n.nextSelector,t),i.next),i.rebindClick(e(n.previousSelector,t),i.previous),i.rebindClick(e(n.lastSelector,t),i.last),i.rebindClick(e(n.firstSelector,t),i.first),n.onTabShow&&"function"==typeof n.onTabShow&&n.onTabShow(l,s,i.currentIndex())===!1?!1:void 0},this.next=function(e){return t.hasClass("last")?!1:n.onNext&&"function"==typeof n.onNext&&n.onNext(l,s,i.nextIndex())===!1?!1:($index=i.nextIndex(),void($index>i.navigationLength()||s.find("li:eq("+$index+") a").tab("show")))},this.previous=function(e){return t.hasClass("first")?!1:n.onPrevious&&"function"==typeof n.onPrevious&&n.onPrevious(l,s,i.previousIndex())===!1?!1:($index=i.previousIndex(),void($index<0||s.find("li:eq("+$index+") a").tab("show")))},this.first=function(e){return n.onFirst&&"function"==typeof n.onFirst&&n.onFirst(l,s,i.firstIndex())===!1?!1:t.hasClass("disabled")?!1:void s.find("li:eq(0) a").tab("show")},this.last=function(e){return n.onLast&&"function"==typeof n.onLast&&n.onLast(l,s,i.lastIndex())===!1?!1:t.hasClass("disabled")?!1:void s.find("li:eq("+i.navigationLength()+") a").tab("show")},this.currentIndex=function(){return s.find("li").index(l)},this.firstIndex=function(){return 0},this.lastIndex=function(){return i.navigationLength()},this.getIndex=function(e){return s.find("li").index(e)},this.nextIndex=function(){return s.find("li").index(l)+1},this.previousIndex=function(){return s.find("li").index(l)-1},this.navigationLength=function(){return s.find("li").length-1},this.activeTab=function(){return l},this.nextTab=function(){return s.find("li:eq("+(i.currentIndex()+1)+")").length?s.find("li:eq("+(i.currentIndex()+1)+")"):null},this.previousTab=function(){return i.currentIndex()<=0?null:s.find("li:eq("+parseInt(i.currentIndex()-1)+")")},this.show=function(e){return t.find("li:eq("+e+") a").tab("show")},this.disable=function(e){s.find("li:eq("+e+")").addClass("disabled")},this.enable=function(e){s.find("li:eq("+e+")").removeClass("disabled")},this.hide=function(e){s.find("li:eq("+e+")").hide()},this.display=function(e){s.find("li:eq("+e+")").show()},this.remove=function(t){var a=t[0],i="undefined"!=typeof t[1]?t[1]:!1,n=s.find("li:eq("+a+")");if(i){var l=n.find("a").attr("href");e(l).remove()}n.remove()},s=t.find("ul:first",t),l=s.find("li.active",t),s.hasClass(n.tabClass)||s.addClass(n.tabClass),n.onInit&&"function"==typeof n.onInit&&n.onInit(l,s,0),n.onShow&&"function"==typeof n.onShow&&n.onShow(l,s,i.nextIndex()),i.fixNavigationButtons(),e('a[data-toggle="tab"]',s).on("click",function(t){var a=s.find("li").index(e(t.currentTarget).parent("li"));return n.onTabClick&&"function"==typeof n.onTabClick&&n.onTabClick(l,s,i.currentIndex(),a)===!1?!1:void 0}),e('a[data-toggle="tab"]',s).on("shown",function(t){$element=e(t.target).parent();var a=s.find("li").index($element);return $element.hasClass("disabled")?!1:n.onTabChange&&"function"==typeof n.onTabChange&&n.onTabChange(l,s,i.currentIndex(),a)===!1?!1:(l=$element,void i.fixNavigationButtons())})};e.fn.bootstrapWizard=function(a){if("string"==typeof a){var i=Array.prototype.slice.call(arguments,1);return 1===i.length&&i.toString(),this.data("bootstrapWizard")[a](i)}return this.each(function(i){var n=e(this);if(!n.data("bootstrapWizard")){var l=new t(n,a);n.data("bootstrapWizard",l)}})},e.fn.bootstrapWizard.defaults={tabClass:"nav nav-pills",nextSelector:".wizard li.next",previousSelector:".wizard li.previous",firstSelector:".wizard li.first",lastSelector:".wizard li.last",onShow:null,onInit:null,onNext:null,onPrevious:null,onLast:null,onFirst:null,onTabChange:null,onTabClick:null,onTabShow:null}}(jQuery),angular.module("adf.widget.getphd").factory("fileReader",["$q","$log",function(e,t){var a=function(e,t,a){return function(){t.resolve(e.result)}},i=function(e,t,a){return function(){t.reject(e.result)}},n=function(e,t){return function(e){}},l=function(e,t){var l=new FileReader;return l.onload=a(l,e,t),l.onerror=i(l,e,t),l.onprogress=n(l,t),l},s=function(t,a){var i=e.defer(),n=l(i,a);return n.readAsDataURL(t),i.promise};return{readAsDataUrl:s}}]),angular.module("llp.extractpdf",[]).factory("extractpdf",["$q",function(e){function t(t,a,i){var n=a||t.name.slice(0,t.name.indexOf(".")),l=e.defer(),s=new FileReader,o=n,r=o+"/"+o+"-address_and_attorney_agent.tsv",c=o+"/"+o+"-application_data.tsv",d=o+"/"+o+"-continuity_data.tsv",p=o+"/"+o+"-foreign_priority.tsv",u=o+"/"+o+"-transaction_history.tsv",f=o+"/"+o+"-patent_term_adjustments.tsv",g=o+"/"+o+"-image_file_wrapper/"+o+"-image_file_wrapper.tsv",m=o+"/README.txt",h=[{label:"README",value:m},{label:"attorney",value:r},{label:"application",value:c},{label:"continuity",value:d},{label:"foreign",value:p},{label:"term",value:f},{label:"transaction",value:u},{label:"imagefile",value:g}];return s.onerror=l.reject.bind(l),s.onload=function(e){s.result||l.reject(new Error("Unknown error"));var t=new JSZip(s.result,{binary:!0}),a={tsvfiles:[],pdffiles:[]};return angular.forEach(h,function(e,i){var n=t.files[e.value];"undefined"!=typeof n&&a.tsvfiles.push({label:e.label,file:n.asText()})}),angular.forEach(t.files,function(e,t){a.pdffiles.push({label:e.name,file:e}),i.extractedfiles++}),l.resolve(a)},s.readAsArrayBuffer(t),l.promise}function a(e,a,i){return t(e,a,i)}return a}]).factory("extractzip",["$q","Upload","$http",function(e,t,a){function i(a,i,n){var l=e.defer(),s="http://127.0.0.1:8080/https://storage.googleapis.com/uspto-pair/applications/"+a+".zip",o="http://127.0.0.1:8080/https://patents.reedtech.com/downloads/pair/"+a+".zip";JSZipUtils.getBinaryContent(s,function(e,t){e?($("#googlebutton").addClass("fa-close").removeClass("fa-file-zip-o"),JSZipUtils.getBinaryContent(o,function(e,t){$("#reedtechbutton").addClass("fa-check text-success").removeClass("text-danger fa-file-zip-o"),r(t)})):($("#googlebutton").addClass("fa-check text-success").removeClass("text-danger fa-file-zip-o"),r(t))});var r=function(e){var n=a,s=n+"/"+n+"-address_and_attorney_agent.tsv",o=n+"/"+n+"-application_data.tsv",r=n+"/"+n+"-continuity_data.tsv",c=n+"/"+n+"-foreign_priority.tsv",d=n+"/"+n+"-transaction_history.tsv",p=n+"/"+n+"-patent_term_adjustments.tsv",u=n+"/"+n+"-image_file_wrapper/"+n+"-image_file_wrapper.tsv",f=n+"/README.txt",g=[{label:"README",value:f},{label:"attorney",value:s},{label:"application",value:o},{label:"continuity",value:r},{label:"foreign",value:c},{label:"term",value:p},{label:"transaction",value:d},{label:"imagefile",value:u}],m=new JSZip(e),h=m.generate({type:"blob"});t.upload({url:"/upload/",data:{file:t.rename(h,n+".zip")}}).then(function(e){console.log("Success "+e.config.data.file.name+"uploaded. Response: "+e.data)},function(e){console.log("Error status: "+e.status)},function(e){var t=parseInt(100*e.loaded/e.total);i.progress=t,10===t&&toastr.info("fetching remote resources..."),30===t&&toastr.info("loading relevant data schemas..."),55===t&&toastr.warning("compiling templates..."),75===t&&toastr.warning("starting the AI engine..."),40>=t?i.progresstype="danger":t>40&&66>t?i.progresstype="warning":t>97?i.progresstype="success":i.progresstype="info",console.log("progress: "+t+"% "+e.config.data.file.name)});var b={tsvfiles:[],pdffiles:[]};return angular.forEach(g,function(e,t){var a=m.files[e.value];"undefined"!=typeof a&&b.tsvfiles.push({label:e.label,file:a.asText()})}),angular.forEach(m.files,function(e,t){b.pdffiles.push({label:e.name,file:e}),i.extractedfiles++}),l.resolve(b)};return l.promise}function n(e,t,a){return i(e,t,a)}return n}]),angular.module("llp.extract",[]).factory("extract",["$q",function(e){function t(t,a){var i=a||t.name.slice(0,t.name.indexOf(".")),n=e.defer(),l=new FileReader,s=i,o=s+"/"+s+"-address_and_attorney_agent.tsv",r=s+"/"+s+"-application_data.tsv",c=s+"/"+s+"-continuity_data.tsv",d=s+"/"+s+"-foreign_priority.tsv",p=s+"/"+s+"-transaction_history.tsv",u=s+"/"+s+"-image_file_wrapper/"+s+"-image_file_wrapper.tsv",f=s+"/README.txt",g=[{
label:"README",value:f},{label:"attorney",value:o},{label:"application",value:r},{label:"continuity",value:c},{label:"foreign",value:d},{label:"transaction",value:p},{label:"imagefile",value:u}];return l.onerror=n.reject.bind(n),l.onload=function(e){l.result||n.reject(new Error("Unknown error"));var t=new JSZip(l.result,{binary:!0}),a=[];return angular.forEach(g,function(e,i){var n=t.files[e.value];"undefined"!=typeof n&&a.push({label:e.label,file:n.asText()})}),n.resolve(a)},l.readAsArrayBuffer(t),n.promise}function a(e,a){return t(e,a)}return a}]),jQuery.event.props.push("dataTransfer"),angular.module("fa.droppable",[]).directive("dropFiles",[function(){var e=function(e,t,a,i){var n=function(e){for(var t=e.originalEvent.dataTransfer.files,a=[],i=0,n=t.length;n>i;i++)a.push(t[i]);return a},l=function(e){e.preventDefault(),t.css({"border-style":"dotted"})},s=function(e){e.preventDefault(),t.css({"border-style":"dashed"});var a=n(e);i.dropFiles({files:a})};t.on("dragover",l),t.on("drop",s),e.$on("$destroy",function(){t.off("dragover",l),t.off("drop",s)})};return{restrict:"A",controller:"DropFilesController",controllerAs:"drop",bindToController:!0,require:"dropFiles",scope:{accepts:"&",dropFiles:"&",main:"&"},link:e}}]).controller("DropFilesController",["$controller","extract","$scope","$timeout","$rootScope","FileUploader","toastr",function(e,t,a,i,n,l,s){var o=this;o.file={},o.dropFiles=function(e){console.log("files.files[0]",e.files[0]),a.$on("UPLOADCOMPLETE",function(t){a.$parent.main.handleFiles(e.files[0])})}}])}(window);