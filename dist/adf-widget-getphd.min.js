!function(e,t){"use strict";var a=angular.module("adf.widget.getphd",["adf.provider","llp.extract","llp.parsetsv","roar","LocalStorageModule","firebase","xeditable","ui.tree","ngAnimate","ngAnnotateText","ngDialog","ngSanitize","pdf","toastr","mentio","diff","angularCSS","checklist-model","angular-md5","angular.filter","ngFileUpload","angularFileUpload","pageslide-directive"]).config(["dashboardProvider","localStorageServiceProvider",function(e,t){t.setPrefix("adf.getphd"),e.widget("website",{title:"Web Report",description:"configure the collection shell",templateUrl:"{widgetsPath}/getphd/src/webdata.html",icon:"fa-globe",iconurl:"/llp_core/img/lexlab.svg",styleClass:"NOA",frameless:!1,reload:!0,controller:"MetadataController",controllerAs:"meta",edit:{templateUrl:"{widgetsPath}/getphd/src/webdataedit.html",controller:"MetadataController",controllerAs:"web",modalSize:"lg",reload:!0}}).widget("metadata",{title:"Metadata",description:"metadata for this document/collection",templateUrl:"{widgetsPath}/getphd/src/metadata.html",icon:"fa-code",iconurl:"/llp_core/img/lexlab.svg",styleClass:"info",frameless:!1,reload:!0,controller:"MetadataController",controllerAs:"meta",edit:{templateUrl:"{widgetsPath}/getphd/src/metadata.html",controller:"MetadataController",controllerAs:"meta",modalSize:"lg",reload:!0}}).widget("report",{title:"Report",description:"filehistory report ",templateUrl:"{widgetsPath}/getphd/src/report.html",icon:"fa-code",iconurl:"/llp_core/img/lexlab.svg",styleClass:"info",frameless:!1,reload:!0,controller:"RepoController",controllerAs:"report"}).widget("claims",{title:"Claims",description:"view or edit a set of claims",templateUrl:"{widgetsPath}/getphd/src/claims.html",icon:"fa-code",iconurl:"/llp_core/img/lexlab.svg",styleClass:"info",frameless:!1,reload:!0,controller:"ClaimWidgetController",controllerAs:"cwc",edit:{templateUrl:"{widgetsPath}/getphd/src/editfulltext.html",controller:"TextController",controllerAs:"text",modalSize:"lg",reload:!0}}).widget("text",{title:"TextAnnotator",description:"full search and annotate a document",templateUrl:"{widgetsPath}/getphd/src/fulltext.html",icon:"fa-file-o",iconurl:"/llp_core/img/lexlab.svg",styleClass:"info ",frameless:!1,reload:!0,controller:"TextController",controllerAs:"text",edit:{templateUrl:"{widgetsPath}/getphd/src/editfulltext.html",controller:"TextController",controllerAs:"text",modalSize:"lg",reload:!0}}).widget("patent",{title:"PatentDigest",description:"analysis of patent or published application",templateUrl:"{widgetsPath}/getphd/src/phd/patentReport.html",controller:"PatentWidgetCtrl",controllerAs:"p",frameless:!1,reload:!1,icon:"fa-ge",iconurl:"img/logolong.png",styleClass:"NOA panel panel-NOA",edit:{templateUrl:"{widgetsPath}/getphd/src/edit.html",controller:"PatentWidgetCtrl",controllerAs:"p",modalSize:"lg",reload:!0,immediate:!0}}).widget("getphd",{title:"+PhD",description:"import a patent prosecution history",templateUrl:"{widgetsPath}/getphd/src/view.html",controller:"MainCtrl",controllerAs:"main",frameless:!1,reload:!1,icon:"fa-ge",iconurl:"img/logolong.png",styleClass:"primary panel panel-primary",edit:{templateUrl:"{widgetsPath}/getphd/src/edit.html",controller:"MainCtrl",controllerAs:"main",modalSize:"lg",reload:!0}}).widget("roartable",{title:"ROARtable",description:"ROARMAP in tabular form",templateUrl:"{widgetsPath}/getphd/src/roartable.html",controller:"RoartableCtrl",controllerAs:"roartable",frameless:!1,reload:!1,icon:"fa-ge",iconurl:"img/logolong",styleClass:"primary panel panet-primary",edit:{templateUrl:"{widgetsPath}/getphd/src/roartableedit.html",controller:"RoartableCtrl",controllerAs:"roartable",modalsize:"lg",reload:!0}})}]).controller("RoartableCtrl",[function(){}]).directive("fileUploadDirective",[function(){return{restrict:"EA",templateUrl:"{widgetsPath}/getphd/src/fileuploaddirective.html",controller:"FileUploadDirectiveCtrl",link:function(e,t,a,l){}}}]).controller("FileUploadDirectiveCtrl",["FileUploader","$scope",function(e,t){var a=this,l=t.uploader=new e({url:"/upload",autoUpload:!0,removeAfterUpload:!0});l.onWhenAddingFileFailed=function(e,t,a){console.info("onWhenAddingFileFailed",e,t,a)},l.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},l.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},l.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e),a.progress=0,a.bufferedfile=e,console.log(e),alertify.log("starting upload...")},l.onProgressItem=function(e,t){a.progress=t,10===t&&toastr.info("fetching remote resources..."),30===t&&toastr.info("loading relevant data schemas..."),55===t&&toastr.warning("compiling templates..."),75===t&&toastr.warning("starting the AI engine..."),t<=40?a.progresstype="danger":t>40&&t<66?a.progresstype="warning":t>97?a.progresstype="success":a.progresstype="info",console.info("onProgressItem",e,t)},l.onProgressAll=function(e){console.info("onProgressAll",e)},l.onSuccessItem=function(e,t,a,l){console.info("onSuccessItem",e,t,a,l),alertify.success(t),alertify.success("File uploaded!"),$rootScope.$broadcast("UPLOADCOMPLETE",t)},l.onErrorItem=function(e,t,l,i){console.info("onErrorItem",e,t,l,i),a.progress="failed",a.progresstype="danger"},l.onCancelItem=function(e,t,a,l){console.info("onCancelItem",e,t,a,l)},l.onCompleteItem=function(e,t,a,l){console.info("onCompleteItem",e,t,a,l),alertify.success(t),$rootScope.$broadcast("UPLOADCOMPLETE")},l.onCompleteAll=function(){console.info("onCompleteAll"),$rootScope.$broadcast("UPLOADCOMPLETE")},console.info("uploader",l)}]).controller("MainCtrl",["Collection","extract","extractzip","fileReader","$http","parseTSV","$roarmap","$q","$scope","PHD","localStorageService","extractpdf","$patentsearch","$log","FileUploader","$publish","$pdftotxt","$timeout","toastr","$rootScope","$stateParams","$location","$ACTIVEROAR","$dashboards","$interval","$compile","$templateCache","$window","$document","$filter","ckstarter","ckender","$firequeue","$state",function(e,t,a,l,i,o,n,r,s,c,d,p,u,g,f,h,m,b,v,y,w,x,C,k,A,P,O,S,E,I,D,T,R,U){var M=this;s.treeFilter=I("uiTreeFilter"),s.availableFields=["title","text"],s.supportedFields=["title","text"],s.toggleSupport=function(e){return s.supportedFields.indexOf(e)>-1?s.supportedFields.splice(s.supportedFields.indexOf(e),1):s.supportedFields.push(e)},s.collapsereport=!1,M.collapse=function(){s.collapsereport=!s.collapsereport};var N=s.$parent.config||s.$parent.$parent.config;s.config=N;var c=e(N.id)||e(N.appnum);c.$loaded().then(function(e){e.$bindTo(s,"phd"),angular.isUndefined(e.file)?M.showupload=!0:M.showupload=!1});var F=e(N.appnum||N.id);s.application=F,M.$ACTIVEROAR=C,M.tabs=[{isActive:!0,disabled:!1},{isActive:!1,disabled:!1},{isActive:!1,disabled:!1}],s.export2collection=function(t){var a=w.pId,l=e(a);l.$loaded().then(function(e){angular.isUndefined(e.roarlist)?(e.roarlist=new Array,e.roarlist.push(t),e.$save()):(e.roarlist.push(t),e.$save())})},s.publish=function(e){angular.forEach(e.roarmap.collections,function(e,t){s.export2collection(e),s.export2collection(t)}),s.export2collection(N.id),h(N.id,s.phd).then(function(e){alertify.success("link to post:"+e)})};var L={header:!0,skipEmptyLines:!0},_=s.uploader=new f({url:"/upload",autoUpload:!0,removeAfterUpload:!0});_.filters.push({name:"customFilter",fn:function(e,t){var a=e.filename||e.name;return a.indexOf(".zip")>-1&&a.indexOf("(")==-1&&a.indexOf(" ")==-1}}),_.onWhenAddingFileFailed=function(e,t,a){console.info("onWhenAddingFileFailed",e,t,a),alertify.alert('The file\'s name must end with ".zip" and consist only of numbers'),this.queue=null},_.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},_.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},_.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e),M.progress=0,M.bufferedfile=e,console.log(e),alertify.log("starting upload...")},_.onProgressItem=function(e,t){M.progress=t,10===t&&v.info("fetching remote resources..."),30===t&&v.info("loading relevant data schemas..."),55===t&&v.warning("compiling templates..."),75===t&&v.warning("starting the AI engine..."),t<=40?M.progresstype="danger":t>40&&t<66?M.progresstype="warning":t>97?M.progresstype="success":M.progresstype="info",console.info("onProgressItem",e,t)},_.onProgressAll=function(e){console.info("onProgressAll",e)},_.onSuccessItem=function(e,t,a,l){console.info("onSuccessItem",e,t,a,l),alertify.success(t),alertify.success("File uploaded!"),y.$broadcast("UPLOADCOMPLETE",t)},_.onErrorItem=function(e,t,a,l){console.info("onErrorItem",e,t,a,l),M.progress="failed",M.progresstype="danger"},_.onCancelItem=function(e,t,a,l){console.info("onCancelItem",e,t,a,l)},_.onCompleteItem=function(e,t,a,l){console.info("onCompleteItem",e,t,a,l),alertify.success(t),y.$broadcast("UPLOADCOMPLETE")},_.onCompleteAll=function(){console.info("onCompleteAll"),y.$broadcast("UPLOADCOMPLETE")},console.info("uploader",_),M.treeFilter=I("uiTreeFilter"),M.toggle=function(){M.checked=!M.checked},M.phd={};var z=N.appnum;M.parse=function(e){var t=r.defer();return angular.forEach(e,function(e,a){try{}catch(l){g.error(l)}finally{if("imagefile"===e.label)M.phd.imagefile=o(e.file,L),M.progresstwo++;else if("application"===e.label){var i=o(e.file,{skipEmptyLines:!0}),n={};angular.forEach(i,function(e,t){"Class / Subclass"==e[0]?n["Class Subclass"]=e[1]:n[e[0]]=e[1],M.phd.application=n}),M.progresstwo++}else"attorney"===e.label?(M.phd.attorney=o(e.file,{skipEmptyLines:!0}),M.progresstwo++):"foreign"===e.label?(M.phd.foreign=o(e.file,L,!1),M.progresstwo++):"continuity"===e.label?(M.phd.continuity=o(e.file,{skipEmptyLines:!0}),M.progresstwo++):"transaction"===e.label?(M.phd.transaction=o(e.file,L,!1),M.progresstwo++):"README"===e.label?(M.info=e.file,M.progresstwo++):"term"===e.label?(M.phd.term=o(e.file,{skipEmptyLines:!0}),M.progresstwo++):(M.error="Unhandled case!",alertify.error("unhandled case!"),t.reject("unhandled case!"));return t.resolve(M.phd)}}),t.promise},M.styleClass="panel-primary",M.size="450px",M.checked=!1,M.getpatentdownload=function(e){$(document.createElement("iframe")).attr("name","fframe").appendTo("body");var t=function(e){return S.open("https://patentimages.storage.googleapis.com/pdfs/US"+e+".pdf","fframe","resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=30,top=150")};t(e)},M.getpublishedapplication=function(e,t){$(document.createElement("iframe")).attr("name","fframe").appendTo("body"),S.open("https://patentimages.storage.googleapis.com/pdfs/US"+e+t+".pdf","fframe","resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=30,top=150")};var q,j;M.getfilehistory=function(e,t){"reedtech"===t?j():q()},j=function(){S.open("https://patents.reedtech.com/downloads/pairdownload/"+N.appnum+".zip","_blank","resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=30,top=150")},q=function(){S.open("https://storage.googleapis.com/uspto-pair/applications/"+N.appnum+".zip","_blank","resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=550,height=30,top=150")},s.winreed=j,s.wingoog=q,M.remoteconfig=function(t){$(".googlebutton").addClass("fa-spin fa-spinner").removeClass("fa-file-zip-o text-danger"),$(".reedtechbutton").addClass("fa-spin fa-spinner").removeClass("fa-file-zip-o text-danger"),i.get("/getphd/patents/"+t).then(function(t){t.data;angular.isUndefined(t.data.pub)?(N.IPANUM=null,N.IPAYEAR=null):(N.IPAYEAR=t.data.pub.slice(2,6),N.IPANUM=t.data.pub.slice(6,t.data.pub.length)),N.appnum=t.data.application_number.replace(/\D/gi,""),s.response=t.data;var a=e(N.appnum);s.application=a;var l=x.protocol()+"://"+location.host+"/proxy/storage.googleapis.com/uspto-pair/applications/"+N.appnum+".zip",o=x.protocol()+"://"+location.host+"/proxy/patents.reedtech.com/downloads/pair/"+N.appnum+".zip",n={method:"HEAD",url:o},r={method:"HEAD",url:l};s.info={video:{url:"./files/public/charm.webm",title:"PhD Tutorial",tooltip:"Click to view tutorial"}};var c={},d={};i(r).then(function(e){c.size=e.headers()["Content-Length"],s.g=c,200!==e.status?$(".googlebutton").addClass("fa-close text-danger").removeClass("fa-spin fa-spinner fa-file-zip-o"):200==e.status&&$(".googlebutton").addClass("fa-check text-success").removeClass("fa-spin fa-spinner text-danger fa-file-zip-o fa-close")}),i(n).then(function(e){d.size=e.headers()["Content-Length"],s.r=d,200!==e.status?$(".reedtechbutton").addClass("fa-close text-danger").removeClass("fa-spin fa-spinner fa-file-zip-o"):200==e.status&&$(".reedtechbutton").addClass("fa-check text-success").removeClass("fa-spin fa-spinner text-danger fa-file-zip-o fa-close")})})},s.showmetadata=y.showmetadata,M.remotezip=function(t,a){M.error=null,M.success=null,M.showprog=!0,A(function(){y.$broadcast("BUILDTABS")},5e3),N.appnum=t,i.get("/getphd/"+t+"/"+N.PNUM+"/"+N.IPAYEAR+"/"+N.IPANUM+"/"+N.id+"/"+a).then(function(e){s.phd=e.data});var l=e(N.id).$ref();l.child("rows").child("0").child("columns").child("0").child("widgets").child("0").child("config").set(N)},M.format=function(e){return e.slice(0,e.lastIndexOf("-"))},M.buffer=function(e){M.bufferedfile=e},M.success=null,M.info=null,M.phd={},M.handleFiles=function(e){M.error=null,M.success=null,M.progresstwo=0,M.extractedfiles=0,p(e,N.APPNUM,M).then(function(e){g.info("Files extracted",e),alertify.log("Files extracted"),M.phd.file=e.tsvfiles,M.parse(e.tsvfiles).then(function(e){alertify.log("TSV Parsed"),u(M.phd.application,N).then(function(t){M.phd.patent=t,n(e,M.phd,M).then(function(e){alertify.success("ROARmap built!"),M.finalize(M.phd,e)},function(e){console.log(e.message)})},function(e){console.log(e.message)})},function(e){console.log(e.message)})},function(e){console.log(e.messsage)})},M.pop=function(e){var t=angular.element("<div/>").attr("class","issuedocpanel stacker"),a={title:e.slice(e.lastIndexOf("/")+1,e.length)};s.roarevent=a;var l=O.get("{widgetsPath}/getphd/src/titleTemplate.html"),i=angular.element("<img/>").attr("class","img img-responsive img-shadow").attr("src",e);angular.element("body").append(P(t.append(l).append(i))(s)),$(".issuedocpanel").draggable({stack:".stacker",handle:"h4"}).resizable()},s.openFullScreen=function(e){s.fullscreen!==!0?($(".issuedocpanel").css({position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",width:"100%","z-index":"100000"}),$(".fa-expand").addClass("fa-compress").removeClass("fa-expand"),s.fullscreen=!0):($(".issuedocpanel").css({position:"absolute",top:"6rem",left:"10rem",bottom:"0rem",right:"75rem",width:"initial","z-index":"9999"}),$(".fa-compress").addClass("fa-expand").removeClass("fa-compress"),s.fullscreen=!1)},M.pushtoqueue=function(e){var t=R(),a=e.Filename.slice(0,e.Filename.indexOf("-")),l=e.Filename.slice(0,e.Filename.lastIndexOf("-"));t.$add({id:l,name:l,file:"/opt/files/public/uspto/"+a+"/"+a+"-image_file_wrapper/"+e.Filename})},M.poppatent=function(e){var t=angular.element("<div/>").attr("class","issuedocpanel stacker"),a=e;s.roarevent=a;var l=O.get("{widgetsPath}/getphd/src/titleTemplate.html"),i=angular.element("<embed/>").attr("class","img img-responsive img-shadow").attr("src",e.media);angular.element("body").append(P(t.append(l).append(i))(s)),$(".issuedocpanel").draggable({stack:".stacker",handle:"h4",contain:"#maincontent"}).resizable()},M.popdoc=function(e){var t=angular.element("<div/>").attr("class","issuedocpanel stacker"),a=O.get("{widgetsPath}/getphd/src/titleTemplate.html"),l=angular.element("<iframe/>").attr("height","680px").attr("src","./files/public/uspto/"+s.phd.appnum+"/"+s.phd.appnum+"-image_file_wrapper/"+e.Filename);angular.element("body").append(P(t.append(a).append(l))(s)),$(".issuedocpanel").draggable({stack:".stacker",handle:"h4"}).resizable()},M.finalize=function(t,a){var l=angular.copy(t.application["Application Number"]).replace("/","").replace(",","").replace(",",""),o=e(s.config.id).$ref(),n=e(w.pageid),r=(n.$ref(),e(w.pId).$ref(),new Date),c=r.getTime(),p={id:c,title:"US "+I("number")(t.patent.id,0),rid:"PHD5",styleClass:"NOA",media:t.patent.media,sortOrder:5,rows:[{styleClass:"leather",columns:[{cid:c+5,style:"col-sm-12",widgets:[{config:{id:c,PNUM:t.patent.id},type:"patent",styleClass:"NOA",wid:c+10}]}]}]};e(c).$ref().set(p),t.appnum=l,t.media="./patents/US"+t.patent.id+"/preview",t.title="PhD for "+I("number")(t.patent.id),t.description="USSN "+t.application["Application Number"],t.styleClass="Applicant",t.rid="PHD",t.icon="fa-balance-scale",angular.forEach(a,function(e,a){t.roarlist[e]=e}),t.roarlist[c]=c,t.content=t.content+T,d.set(t.application["Application Number"],t),i.post("/getphd/store/"+l,t),o.update(t),y.$broadcast("BUILDTABS"),alertify.alert('<div class="card-header"><h1 class="card-title">Prosecution History Digest for US '+t.patent.number+'</h1></div><div class="card-block"><h6 class="card-text lead"> The file has been parsed by LEO and delivered to you here for review.</h6></div>'),M.showupload=!1}}]).directive("ffFileSelect",[function(){return{restrict:"A",controller:"MainCtrl",controllerAs:"main",bindToController:!0,scope:!1,link:function(e,t,a,l){var i=l;t.on("change",function(e){i.file=(e.srcElement||e.target).files[0],i.getFile()})}}}]).factory("$patentsearch",["$q","filepickerService","$http","$document","ckstarter","ckender","$compile","$templateCache","$rootScope",function(e,t,a,l,i,o,n,r,s){return function(t,l){function n(e,t){var l=t||angular.copy(e.application["Patent Number"]).replace(",","").replace(",","");a.get("/getphd/patents/"+l).then(function(e){var t=e.data;t.number=l,t.media="./files/public/uspto/patents/"+l+"/"+l+".pdf",t.filename="US"+l+".pdf",t.google="https://www.google.com/patents/US"+l,t.rid="P1",t.styleClass="NOA",t.name="US"+l;var a=new Date(t.issued),n=a.toDateString(),s='<div class="container-fluid two-col-left"><div class="row two-col-left"><div class="col-xs-4 col-sidebar"><a pop="true" src="./patents/US'+t.number+'/preview"><img src="./patents/US'+t.number+'/preview" class="img img-responsive img-shadow"/></a></div><div class="col-xs-8 col-main"><div class="bs-callout bs-callout-NOA bs-callout-reverse"><h4>'+t.title+"</h4><p>Filed "+n+"</p><p>"+t["abstract"]+"</p><cite>"+t.filename+'&nbsp;&nbsp;<a pop="true" href="'+t.media+'" target="fframe"><i class="fa fa-external-link"></i></a></cite></div></div></div></div>',c=i,d=o,p='<p class="card-text">'+t.text+"</p>",u=angular.element(s);angular.forEach(t.drawings,function(e,a){var l=document.createElement("img"),i=document.createElement("a"),o=$(l).attr("src",t.thumbnails[a]).wrap($(i).attr("href",e).attr("target","fframe"));u.append(o)}),t.content=c+$(u).html()+p+d+'<patentreport patent="'+t.number+'"></patentreport></body></html>',r.resolve(t)})}var r=e.defer();return l.PNUM&&l.PNUM>0?n(t,l.PNUM):l.IPANUM&&n(t,l.IPAYEAR+l.IPANUM),r.promise}}]).factory("$pdftotxt",["$q","filepickerService","Collection",function(e,t,a){return function(t){function l(e){var t=e.roarmap.collections[1].id||e.roarmap.collections[1];return a(t).$loaded().then(function(e){var t=e.roarlist;angular.forEach(t,function(e,t){a(t).$loaded().then(function(e){filepicker.storeUrl(e.selflink,{filename:e.filename},function(t){filepicker.convert(t,{format:"txt"},function(t){e.txt=t.url,e.$save(),alertify.success("text file added for"+e.title)})})})})}),i.resolve(e)}var i=e.defer();return l(t),i.promise}}]).directive("pop",["$compile","$templateCache",function(t,a){return{restrict:"AC",scope:!0,link:function(l,i,o,n){var r=function(){var i=angular.element("<div/>").attr("class","issuedocpanel stacker panel-"+(o.styleClass||"panelheadblue")),n=a.get("{widgetsPath}/getphd/src/titleTemplate.html"),r=angular.element('<iframe allowfullscreen fullscreen="{{full}}" ng-dblclick="full = !full" name="fframe" />').attr("height","80vh").attr("src",o.href);l.roarevent=l.roarevent||{},l.roarevent.title=o.title||o.href,l.roarevent.date=o.date||null,angular.element("body").append(t(i.append(n).append(r))(l)),$(i).draggable({stack:".stacker",handle:"h4"}).resizable(),interact(i,{ignoreFrom:".card",allowFrom:"h4"}).draggable().on("doubletap",function(t){e.open(t.currentTarget,"_blank"),t.currentTarget.remove(),t.preventDefault()})};i.on("click",function(e){e.preventDefault(),r()})}}}]).directive("uploadQ",["FileUploader",function(e){return{restrict:"EA",templateUrl:"{widgetsPath}/getphd/src/uploader.html",controller:"AppController",controllerAs:"uploader",bindToController:!0,scope:{url:"@"},link:function(e,t,a,l){}}}]).controller("AppController",["$scope","FileUploader","$stateParams","$roar",function(e,t,a,l){var i=e.uploader=new t({url:e.url||"./upload",autoUpload:!1});i.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<100}}),i.onWhenAddingFileFailed=function(e,t,a){console.info("onWhenAddingFileFailed",e,t,a)},i.onAfterAddingFile=function(e){console.info("onAfterAddingFile",e)},i.onAfterAddingAll=function(e){console.info("onAfterAddingAll",e)},i.onBeforeUploadItem=function(e){console.info("onBeforeUploadItem",e)},i.onProgressItem=function(e,t){console.info("onProgressItem",e,t)},i.onProgressAll=function(e){console.info("onProgressAll",e)},i.onSuccessItem=function(e,t,a,l){console.info("onSuccessItem",e,t,a,l)},i.onErrorItem=function(e,t,a,l){console.info("onErrorItem",e,t,a,l)},i.onCancelItem=function(e,t,a,l){console.info("onCancelItem",e,t,a,l)},i.onCompleteItem=function(e,t,a,i){console.info("onCompleteItem",e),console.info("response",t),console.info("status",a),console.info("headers",i);var o=e._file;o.url=t[0]||t,l(o)},i.onCompleteAll=function(){console.info("onCompleteAll")},console.info("uploader",i)}]).controller("GalleryCarouselController",["$scope","config","Collection","$rootScope","$ACTIVEROAR",function(e,t,a,l,i){var o=this,t=t;e.config=t,o.slides=[],t.id?a(t.id).$loaded().then(function(e){angular.forEach(e.roarlist,function(e,t){a(e).$loaded().then(function(e){o.slides.push(angular.copy(e))})})}):(a(i.page).$loaded().then(function(e){angular.forEach(e.roarlist,function(e,t){a(e).$loaded().then(function(e){o.slides.push(angular.copy(e))})})}),o.slides.push({title:"DemoSlide",media:"/llp_core/img/lexlab.svg"}),o.slides.push({title:"PatentPhD",media:"/llp_core/img/logolong.png"}))}]).controller("GalleryCarousel",["",function(){}]).directive("ngThumb",["$window",function(e){var t={support:!(!e.FileReader||!e.CanvasRenderingContext2D),isFile:function(t){return angular.isObject(t)&&t instanceof e.File},isImage:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return"|jpg|png|jpeg|bmp|gif|".indexOf(t)!==-1}};return{restrict:"A",template:"<canvas/>",link:function(e,a,l){function i(e){var t=new Image;t.onload=o,t.src=e.target.result}function o(){var e=n.width||this.width/this.height*n.height,t=n.height||this.height/this.width*n.width;r.attr({width:e,height:t}),r[0].getContext("2d").drawImage(this,0,0,e,t)}if(t.support){var n=e.$eval(l.ngThumb);if(t.isFile(n.file)&&t.isImage(n.file)){var r=a.find("canvas"),s=new FileReader;s.onload=i,s.readAsDataURL(n.file)}}}}}]).controller("PatentWidgetCtrl",["$scope","config","$sce","$http","Collection","$q","$filter","$sanitize","$patentsearch","$compile","PageManager","$rootScope","$templateCache",function(e,a,l,i,o,n,r,s,c,d,p,u,g){var f=this;f.remoteconfig=function(e){i.get("/getphd/patents/"+e).then(function(e){e.data;angular.isUndefined(e.data.pub)?(a.IPANUM=null,a.IPAYEAR=null):(a.IPAYEAR=e.data.pub.slice(2,6),a.IPANUM=e.data.pub.slice(6,e.data.pub.length))})},f.getdata=function(e){var t=n.defer();return c(e,a).then(function(e){return t.resolve(e)}),t.promise},f.sanitize=s,f.getdigest=function(e){p.insert(a.id,"Patent").then(function(t){var a=o(t).$ref(),l=e.replace(/[\:us]/gi,"");a.child("rows").child("0").child("columns").child("0").child("widgets").child("0").child("config").child("PNUM").set(l),a.update({title:e}),u.$broadcast("BUILDTABS")})};var a=e.$parent.config||e.$parent.$parent.config,h=o(a.id);if(h.$bindTo(e,"collection"),e.config=a,e.cupdate=function(t){var a=h.$ref();a.child("rows").child("0").child("columns").child("0").child("widgets").child("0").child("config").update(t),a.child("rows").child("0").child("columns").child("0").child("widgets").child("1").update({type:"iframe",config:{url:e.patent.media}}),a.child("rows").child("0").child("columns").child("0").child("widgets").child("2").update({type:"ckwidget",config:{id:h.$id}}),a.child("rid").set("π"),a.child("media").set(e.patent.media),a.child("date").set(e.patent.date)},f.configure=function(e){var t=r("strip")(e);return t},f.preparescope=function(t,a){a.application_data=t,e.patent=a;try{var l=angular.isDefined(a)?a.backward_citations:t.backward_citations;g.put("{"+(angular.isDefined(a)?a.id:t.id)+"}/backtable.html",l.replace(/<a\s(?!pop)/g,"<a pop ")),f.linker="{"+(angular.isDefined(a)?a.id:t.id)+"}/backtable.html";var i=angular.isDefined(a)?a.forward_citations||"<h4>Forward Citations</h4>":t.forward_citations||"<h4>Forward Citations</h4>";g.put("{"+(angular.isDefined(a)?a.id:t.id)+"}/forwtable.html",i.replace(/<a\s(?!pop)/g,"<a pop ")),f.linker1="{"+(angular.isDefined(a)?a.id:t.id)+"}/backtable.html"}catch(o){console.log(o)}finally{f.showform=!1,f.showconfig=!1}},f.getnew=function(e){try{var a=o(e).$loaded()}catch(l){}finally{var a=f.getdata(e);a.then(function(e){if(e.pub!==t){var a=f.configure(e.pub);f.getdata(a).then(function(t){f.preparescope(t,e)})}else f.preparescope(null,e)})}},f.getload=function(e){o(e).$loaded().then(function(e){if(e.pub!==t){var a=f.configure(e.pub);o(a).$loaded().then(function(t){f.preparescope(t,e)})}else f.preparescope(null,e)})},angular.isUndefined(a.PNUM)?(f.showconfig=!0,f.showform=!1):f.getnew(a.PNUM),a.PNUM)try{f.getnew(a.PNUM)}catch(m){var b=a.IPAYEAR+a.IPANUM}finally{alertify.success("loaded")}else try{var b=a.IPAYEAR+a.IPANUM;f.getnew(b)}catch(m){var b=a.IPAYEAR+a.IPANUM;f.getdata(b)}finally{alertify.success("loaded")}}]).directive("claimtree",function(){return{restrict:"E",templateUrl:"/getphdwidget/src/phd/claimtree.html",scope:{tree:"=",query:"="},link:function(e,t,a){}}}).filter("citationcheck",function(){return function(e){var t=function(e){var t=new RegExp(/\<a\s/gi);return e.replace(t,"<a pop ")};return t(e)}}).filter("capturelinks",["$timeout","$compile","$sce","$rootScope",function(e,t,a,l){return function(e){if(!angular.isUndefined(e)&&null!==e){var i=e,o=function(){return a.trustAsHtml(t(i.replace(/href/gim,"pop href"))(l.$new()))};return o()}}}]).directive("rejectionset",function(){return{restrict:"EA",templateUrl:"{widgetsPath}/getphd/src/rejectionset.html",scope:{set:"="},link:function(e,t,a,l){}}}).directive("rejection",function(){return{restrict:"EA",templateUrl:"{widgetsPath}/getphd/src/rejection.html",scope:{rejection:"="},link:function(e,t,a,l){}}}).controller("MetadataController",["filepickerService","$firequeue","$rootScope","Collection","config","$scope","$stateParams","Upload","$http","toastr","DOCNAMES",function(e,t,a,l,i,o,n,r,s,c,d){var i=o.$parent.config||o.$parent.$parent.config;o.config=i,o.save=function(e){o.config=e};var p=n.pId,u=l(p);o.tree=u,o.onSubmit=function(e){l(i.id).$save(e)};var g=[];angular.forEach(d,function(e,t){angular.forEach(e,function(e,t){var a={code:t,label:t+" - "+e};g.push(a)})}),o.DOCNAMES=g,o.pushtoqueue=function(e){var l=t(),i=e.id,o=e.filename||e.title,n=a.authData.uid;l.$add({id:i,name:o,file:"/opt/files/"+n+"/"+o})},o.importFile=function(e){var t=new Blob([e.media,e.content],l),a={method:"POST",url:"/import",data:{url:e.media,name:e.filename||e.title,file:t}};s(a).then(function(t){angular.isString(t.data.newurl)&&(e.media=t.data.newurl,e.$save())});var l={url:e.media,filename:e.filename,mimetype:e.mimetype,isWriteable:!0,size:100};r.upload({url:"/upload/",data:{file:Blob}}).then(function(t){dialog.close(),console.log(t),o.pushtoqueue(e),console.log("Success "+t.config.data.file.name+"uploaded. Response: "+t.data)},function(e){console.log("Error status: "+e.status)},function(e){var t=parseInt(100*e.loaded/e.total);o.progress=t,10===t&&c.info("fetching remote resources..."),30===t&&c.info("loading relevant data schemas..."),55===t&&c.warning("compiling templates..."),75===t&&c.warning("starting the AI engine..."),t<=40?o.progresstype="danger":t>40&&t<66?o.progresstype="warning":t>97?o.progresstype="success":o.progresstype="info",console.log("progress: "+t+"% "+e.config.data.file.name)})}}]).controller("RepoController",["$scope","$http","$location","Collection",function(e,t,a,l){var i=this,o=[],n=l("REPORT");e.reporter=n;var r={method:"GET",url:"/report/all"};n.$loaded().then(function(t){angular.forEach(e.reporter.meta,function(e,t){e.id=t,o.push(e)}),e.arra=o});t(r).then(function(e){i.filehistories=e.data}),i.dofunction=function(a){var l=a.funconfig,i={method:"GET",url:"/getphd/"+l.APPNUM+"/"+l.PNUM+"/"+l.IPAYEAR+"/"+l.IPANUM+"/"+l.id};t(i).then(function(t){e.report=t.data})}}]).directive("claimtreetabhtml",function(){return{restrict:"EA",templateUrl:"{widgetsPath}/getphd/src/claimtreetab.html",scope:{config:"="},link:function(e,t,a,l){}}});angular.module("adf.widget.getphd").run(["$templateCache",function(e){e.put("{widgetsPath}/getphd/src/claims.html",'<input ng-model=config.PNUM type=number placeholder="patent number" ng-model-options="{updateOn: \'blur\'}"> <button clipboard text={{claims}}>CLAIMS</button> <button clipboard text={{remarks}}>REMARKS</button> <button clipboard text={{rejections}}>REJECTIONS</button><d3historytree patent={{config.PNUM}}></d3historytree><uib-tabset justified=true><uib-tab ng-repeat="(key, set) in roarevent.roarlist" node={{key}} deselect=sortSet(node)><uib-tab-heading><h6 class=card-title>{{::node.title}} {{$index}}</h6><strong class=card-subtitle>{{node.date | date}}</strong><a pop ng-href={{node.media}} class="fa fa-external-link showonhover">{{node.claims.length}}</a></uib-tab-heading><uib-tab-content class="card-block card-columns"><div class="col-sm-8 card card-Applicant" ng-repeat="claim in node.claims track by $index"><label ng-class="{\'dependent\':(prent(node.claims[$index]) > -1), \'independent\':(!prent(node.claims[$index]))}" class="display-1 label label-pill node pull-right" style=padding:10px;position:absolute;right:5px;top:5px;font-size:18px;font-weight:600; colorkey={{statustest(node.claims[$index])}} uib-tooltip={{statustest(node.claims[$index])}} tooltip-triggers="mouseenter click" tooltip-animation=true tooltip-offset=50px tooltip-placement=top>{{num(node.claims[$index])||\'-\'}}</label><textarea class=card-block style=font-size:16px;color:#444; ng-model=node.claims[$index] ng-model-options="{updateOn:\'blur\',debounce:{\'blur\':0}}" cols=100 rows=4 ng-blur="checkValid($index, node)" placeholder="XX. Lorem non irure sunt enim consequat."></textarea><br><a class="fa fa-close text-danger" ng-click="node.claims[$index]=null" style=align-self:flex-end;></a> <a ng-click="addClaim($index, node)" class="text-success fa fa-plus" style=align-self:center;></a></div></uib-tab-content></uib-tab></uib-tabset>'),e.put("{widgetsPath}/getphd/src/claimtreetab.html",'<blockquote cite="{{phd.patent.media || patent.media}}" style="margin: 25px;margin-top:35px;"><h4><strong ng-bind=tree.title></strong> - <small>{{tree.claim_total}} Claims</small></h4><p ng-bind-html="tree.abstract | highlight: query | trustAsHTML"></p><cite>{{phd.patent.filename || patent.filename}}<a class="fa fa-external-link fa-border" ng-click="main.poppatent(phd.patent || patent)"></a></cite></blockquote><div class="row showscroll" style="margin: 5px 5px;overflow-x:scroll;"><a ng-repeat="link in tree.drawings" ng-href={{link}} pop ng-click=main.pop(link) class=btn style=margin:2px;><img ng-src={{tree.thumbnails[$index]}} class="img img-shadow"></a></div><div class=row><div class=col-sm-6><fieldset class=material><label>Search</label> <input id=patterninput ng-model=query type=search style=margin:10px; ng-model-options="{updateOn: \'default blur\',debounce: {\'default\':250,\'blur\':0}}"><hr></fieldset><a style=position:absolute;right:0;top:4; class="btn fa fa-close" ng-click="query = null"></a><d3pendingtree id="a{{ config.PNUM || config.IPAYEAR + config.IPANUM}}" class={{query}} tree=tree pattern={{query}} patent="{{config.PNUM || config.IPAYEAR + config.IPANUM}}" style=width:500px;height:500px;></d3pendingtree></div><div class=col-sm-6><div id=info></div><div ui-tree=treeOptions><ol ui-tree-nodes max-depth=6 ng-model=tree.claims><li ui-tree-node class="card card-block" ng-repeat="node in tree.claims" ng-include="\'claim_renderer.html\'" style=padding-right:0rem;padding-bottom:0.1rem; ng-hide="!treeFilter(node, query, supportedFields) && dim"></li></ol></div><script type=text/ng-template id=claim_renderer.html><div ui-tree-handle class="tree-node tree-node-content"> <div class="tree-node-content flextoprow " style="position:relative;"> <a class="btn btn-xs pull-left" data-nodrag ng-click="toggle(this)" ng-if="node.children && (node.children.length > 0)"><span class="fa " ng-class="{\'fa-chevron-right\': collapsed, \'fa-chevron-down\': !collapsed}" style="color:steelblue;transition:all 0.25s ease;"></span></a> <!--<input type="text" ng-model="node.text" ng-change="node.$save();" ng-model-options="{ updateOn: \'default blur\', debounce: {\'default\': 1000, \'blur\': 0} }" style="padding: 0.5rem;color:#444;" ng-if="config.editable">--> <!--<a class="btn showonhover" data-nodrag ng-if="config.editable" ng-click="remove(this);"><span class="fa fa-close text-danger "></span></a>--> <!--<a class="btn " data-nodrag ng-if="config.editable" ng-click="toc.newsubsection(this)" style=""><span class="fa fa-plus text-success"></span></a>--> <div ng-bind-html="node.text | highlight: query " ng-class="{\'filtered-out\':(!treeFilter(node, query, supportedFields) && dim)}"></div> <!--<a class="gototarget btn" data-nodrag ui-sref="{{parentstate}}.righttab({tabid: node.id})" style=""> <span ng-if="!config.editable" class="pull-left">{{node.text}}</span><i style="position:absolute;right:0;">&nbsp;</i></a>--> </div> </div> <ol ui-tree-nodes="" ng-model="node.children" ng-class="{\'hidden\': collapsed}" style=""> <li class="card card-block img-shadow" ng-repeat="node in node.children" ui-tree-node ng-include="\'claim_renderer.html\'" style="padding-right:0rem;padding-bottom:0.1rem;padding-left:5px;" ng-hide="!treeFilter(node, query, supportedFields) && dim" > </li> </ol></script></div></div>'),
e.put("{widgetsPath}/getphd/src/edit.html",'<form role=form ng-submit=collection.$save()><fieldset class="material Applicant"><input type=text placeholder=1234567 ng-model=config.PNUM ng-blur=p.remoteconfig(config.PNUM);cupdate(config);><hr><label>Enter a Patent Number</label></fieldset><br><fieldset class="material Petition"><input type=text placeholder=YYYY ng-model=config.IPAYEAR><hr><label>Enter a Published Patent Application YEAR</label></fieldset><fieldset class="material Petition"><input type=text placeholder=1234567 ng-model=config.IPANUM ng-blur=cupdate(config);><hr><label>Enter a Published Patent Application Number</label></fieldset></form>'),e.put("{widgetsPath}/getphd/src/editfulltext.html",'<form role=form><div class=form-group ui-tree><label for=draftid>Select Document</label><ol ui-tree-nodes ng-model=tree.roarlist><li ui-tree-node ng-repeat="node in tree.roarlist" ng-include="\'quicklinkid\'" node={{node}} data-collapsed=true></li></ol><script type=text/ng-template id=quicklinkid><div class="card card-rounded" ng-class="{\'text-success\': (config.id === node.id)}"> <a class="btn btn-xs" ng-click="toggle(this)" ng-if="node.roarlist" style=""><span class="fa " ng-class="{\'fa-chevron-right\': collapsed, \'fa-chevron-down\': !collapsed}" style="color:steelblue;transition:all 0.25s ease;"></span></a> <a ng-click="config.id = node.id;$close();" ng-class="{\'text-success\': (config.id === node.id)}" class=""><span class="fa fa-stack fa-pull-left fa-border"><span class="fa fa-stack-2x fa-file-o"><span class="fa fa-stack-1x" style="font-size: 10px;vertical-align:bottom;">{{node.rid}}</span></span></span>&nbsp;&nbsp;{{node.title}}<br><small class="text-muted">{{node.date | date}}</small></a> </div> <ol ui-tree-nodes="" ng-model="node.roarlist" ng-class="{hidden: collapsed}" style=""> <li class="" ng-repeat="(key, node) in node.roarlist" ui-tree-node ng-include="\'quicklinkid\'" style="padding-right:0rem;padding-bottom:0.1rem;" node="{{node.id || node.$id || node.$value || node}}" data-collapsed="true"> </li> </ol></script></div></form>'),e.put("{widgetsPath}/getphd/src/editgallery.html","<form role=form><div class=form-group><label for=sample>Interval, in milliseconds:</label> <input type=number class=form-control ng-model=config.interval><br>Enter a negative number or 0 to stop the interval.</div><div class=form-group><label>Disable Slide Looping</label> <input type=checkbox ng-model=config.nowrap></div><div class=form-group><label>Pause on Hover?</label> <input type=checkbox ng-model=config.pauseonhover></div><div class=form-group><label>Disable Transition</label> <input type=checkbox ng-model=config.transition></div></form>"),e.put("{widgetsPath}/getphd/src/fileuploaddirective.html",'<div ng-controller="FileUploadDirectiveCtrl as main"><div class="card card-primary card-block btn-glass drop-target" drop-files=handleFiles(files) nv-file-drop style="border: 2px dashed blue;margin: 5px;" uploader=uploader></div></div>'),e.put("{widgetsPath}/getphd/src/fulltext.html",'<doc-header class="container-fluid card two-col-right" roarid={{roarevent.id}}><a href=# editable-textarea=roarevent.notes e-rows=15 e-cols=80><p>{{ roarevent.notes || roarevent.plaintext || roarevent.text || roarevent.description || roarevent.content || \'no notes or text\' }}</p></a></doc-header><div matches=matches getpdftext={{roarevent.$id}} pdf-data={{roarevent.$id}} roarevent=roarevent class="card card-block"></div>'),e.put("{widgetsPath}/getphd/src/gallery.html",'<div style="min-height: 305px"><uib-carousel interval=config.interval no-pause={{config.pauseonhover}} no-transition={{config.transition}} no-wrap={{config.nowrap}}><uib-slide ng-repeat="slide in gallery.slides" active={slide.active} index=slide.index><img ng-src={{slide.media}} style=margin:auto;><div class=carousel-caption><h4>Slide {{slide.$index}}</h4><p>{{slide.title}}</p></div></uib-slide></uib-carousel></div>'),e.put("{widgetsPath}/getphd/src/metadata.html",'<div class="card clearfix" collection={{config.id}}><h6>ID: {{collection.$id}}</h6><p clipboad text=collection.$id onsuccess="alertify.success(\'copied ID\')">{{\'/files/uploads/\'+collection.$id+\'.html\'}}</p><form role=form name=form ng-submit=collection.$save()><div class=col-sm-7><div class="form-group col-sm-6"><label for=sortOrder style=color:#006699>Sort Order</label> <input type=number placeholder=# id=sortOrder ng-model=collection.sortOrder></div><div class="form-group col-sm-6"><label style="color: #006699">ID#</label><br><input type=text ng-model=collection.rid placeholder=# ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=dashboardTitle style="color: #006699">Title</label> <input type=text style="width: 100%" id=dashboardTitle ng-model=collection.title required></div><div class=form-group><label for=description style="color: #006699">Description</label><br><textarea type=text class=form-control id=description ng-model=collection.description ng-model-options="{updateOn: \'blur\'}"></textarea></div><div class=form-group><label for=long_cite style="color: #006699">Long Citation</label><br><input type=text style="width: 100%" ng-model=collection.citation placeholder="Long Citation" ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=short_cite style="color: #006699">Short Citation</label><br><input type=text style="width: 100%" ng-model=collection.short_cite placeholder="Short Citation" ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=thumbnail style="color: #006699">Notes</label><br><textarea rows=15 type=text style="width: 100%" ng-model=collection.notes placeholder="Enter plaintext notes" ng-model-options="{updateOn: \'default blur\'}" class=form-control></textarea></div><div class=form-group><label for=url style="color: #006699">URL</label><br><input type=text style="width: 100%" ng-model=collection.mediaUrl placeholder="Path to URL" ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=thumbnail style="color: #006699">Thumbnail</label><br><input type=text style="width: 100%" ng-model=collection.thumbnail placeholder="Path to URL" ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=roarlist style="color: #006699">Linked Docs</label><br><div smartpanel={{collection.$id}}></div></div></div><div class=col-sm-5 style=max-height:175px;><roar-event id={{collection.$id}} style=max-height:175px;><uib-rating ng-model=roarevent.rate max=5></uib-rating></roar-event><input type=submit class="btn btn-glass btn-primary btn-md pull-right" value=SAVE><div class="form-group col-sm-6"><label style="color: #006699">Icon</label><br><select name=icon ng-model=collection.icon ng-options="icon.value as icon.label for icon in $root.ICONS"></select></div><div class="form-group col-sm-12"><label style="color: #006699">Style</label><br><select ng-model=collection.styleClass ng-options="class.value as class.label for class in $root.ROARCLASSES"></select></div><div class="form-group col-sm-12"><label style="color: #006699">Document Code</label><br><input ng-model=collection.doccode uib-typeahead="code.code as code.label for code in DOCNAMES | filter:$viewValue | limitTo:8" typeahead-wait-ms=100></div><div class="form-group col-sm-12"><label style="color: #006699">Tags</label><br><input ng-model=collection.matches ng-list=,></div><div class="form-group col-sm-12"><label style="color: #006699">Date</label><br><input type=text ng-model=collection.date placeholder=YYYY-MM-DD ng-pattern=dddd-dd-dd ng-model-options="{updateOn: \'blur\'}"></div><div class="form-group col-sm-12"><label style="color: #006699">Name</label><br><input type=text ng-model=collection.name placeholder=name ng-model-options="{updateOn: \'blur\'}"></div><div class="form-group col-sm-12"><label style="color: #006699">File</label><br><input type=text ng-model=collection.file.name placeholder="file name" ng-model-options="{updateOn: \'blur\'}"></div><div class="form-group col-sm-12"><label for=roarlist style="color: #006699">Linked Docs</label><ol ng-scrollbar style=height:300px;overflow-y:scroll;><li ng-repeat="roareventid in collection.roarlist" style=float:left;><roar-chip id={{roareventid}}></roar-chip></li></ol></div></div></form></div>'),e.put("{widgetsPath}/getphd/src/phdfrontpage.html",'<div class="card card-fancy card-rounded card-block card-thick slideDown" ng-class="{\'ground\':($rootScope.ground)}" style="text-align: left;color: #444;overflow:visible;transform-style: preserve-3d;perspective:800px;perspective-origin:50% 50%;" collection={{$parent.collection.$id}}><div id=innerviewport ng-class="{\'viewport\':($rootScope.viewport==true)}"><button class="alert btn-glass btn-primary img card-rounded row" style="position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:center;justify-content:space-between;flex-direction:row;background-color:#35688F;padding:2px;box-shadow:inset 10px 2px 50px rgba(0,0,0,0.5);" ng-click="collapsereport = !collapsereport"><div style=display:flex;justify-content:flex-end;flex-direction:column;align-content:flex-end;vertical-align:middle;align-items:flex-end;><h4 class="card-title ng-binding display-4" style="margin-bottom:0;color: #fff;">US {{config.PNUM | number:0 }}</h4><h5 class="card-subtitle ng-binding" style=color:#ddd;><span class=lead>USSN {{collection.application[\'Application Number\']}}</span></h5></div><img src=/llp_core/img/GoldLion.svg class="img lionlogofilter" style="width:75px;height: auto;"><div style=display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;><img src=/llp_core/img/GoldLogoLong.svg class=img style=height:45px;> <img src=/llp_core/img/GoldPhdLogoLong.svg class=img style=height:25px;padding-left:2px;></div></button><div uib-collapse=collapsereport class="card clearfix" style=padding:0;margin:0;><blockquote class="bs-callout bs-callout-NOA" style="margin: 0;"><h4>{{collection.application[\'Title of Invention\']}}</h4><p style=font-size:10px;><cite>{{collection.application[\'First Named Inventor\']}} <small><emphasis>Issued {{collection.patent.issued | date}}</emphasis></small></cite></p></blockquote><uib-tabset class="tabbable tabs-below" justified=true type=tabs><uib-tab class="btn btn-default btn-xs badger badger-{{collection.styleClass}} badger-left btn-{{collection.styleClass}}" data-badger={{collection.title}}><uib-tab-heading class=text-{{collection.styleClass}} style=display:flex;><small style=align-self:bottom;>{{collection.rid}}</small></uib-tab-heading><uib-tabset active=1 class=tabbable justified=true type=pills><uib-tab active=main.tabs[0].isActive disabled=main.tabs[0].disabled select="main.tabs[0].isActive = true" deselect="main.tabs[0].isActive = false" style="margin: 0 5px;"><uib-tab-heading class=text-Petition>PTO Metadata</uib-tab-heading><uib-tab-content ng-if=main.tabs[0].isActive><uib-tabset class="tabbable tabs-left"><uib-tab><uib-tab-heading>USSN {{collection.application[\'Application Number\']}}</uib-tab-heading><uib-tabset class=tabbable><uib-tab ng-repeat="file in collection.file" heading="{{file.label | uppercase}}"><uib-tab-content><pre class="card card-block card-fancy" ng-bind=file.file></pre></uib-tab-content></uib-tab></uib-tabset></uib-tab><uib-tab ng-if=collection.application><uib-tab-heading>APPLICATION</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="(key, value) in collection.application"><td><strong>{{::key}}</strong></td><td>{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=collection.attorney><uib-tab-heading ng-style>ATTORNEY</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="(key, line) in collection.attorney track by $index"><td ng-repeat="(key, value) in line track by $index">{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=collection.continuity><uib-tab-heading ng-style>CONTINUITY</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-condensed table-hover table-responsive"><tbody><tr ng-repeat="(key,line) in collection.continuity track by $index"><td ng-repeat="(key, value) in line track by $index">{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=collection.foreign><uib-tab-heading ng-style>FOREIGN PRIORITY</uib-tab-heading><uib-tab-content><table class="table table-stripped table-condensed table-hover table-responsive"><thead><tr><th><strong>Country</strong></th><th><strong>Priority</strong></th><th><strong>Priority Date</strong></th></tr></thead><tbody><tr ng-repeat="p in collection.foreign"><td ng-bind="::p[\'Country\']"></td><td ng-bind="::p[\'Priority\']"></td><td ng-bind="::p[\'Priority Date\'] | date"></td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=collection.term><uib-tab-heading>PATENT TERM ADJUSTMENTS</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="(key, line) in collection.term track by $index"><td ng-repeat="(key,value) in line track by $index">{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=collection.transaction><uib-tab-heading>TRANSACTION</uib-tab-heading><uib-tab-content><table class="table table-striped table-hover table-condensed table-responsive"><thead><tr><th><strong>Date</strong></th><th><strong>Transaction Description</strong></th></tr></thead><tbody><tr ng-repeat="trans in collection.transaction"><td>{{::trans[\'Date\']}}</td><td>{{::trans[\'Transaction Description\']}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=collection.imagefile select="tab.isActive = true" deslect="tab.isActive = false;"><uib-tab-heading ng-style>IMAGE FILE WRAPPER</uib-tab-heading><uib-tab-content ng-if=tab.isActive><table class="table table-hover table-condensed table-responsive"><thead><tr><th ng-click="reverse = !reverse" class=fa ng-class="{\'fa-chevron-up\': reverse,\'fa-chevron-down\': !reverse}">#</th><th ng-click="main.dog = \'Mail\\ Room\\ Date\'; maybe = !maybe"><strong>Mail Room Date<i class=fa ng-if="main.dog == \'Mail Room Date\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Code\'; maybe = !maybe"><strong>Document Code<i class=fa ng-if="main.dog == \'Document Code\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Description\'; maybe = !maybe"><strong>Document Description<i class=fa ng-if="main.dog == \'Document Description\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Category\'; maybe = !maybe"><strong>Document Category<i class=fa ng-if="main.dog == \'Document Category\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Page\\ Count\'; maybe = !maybe"><strong>Page Count<i class=fa ng-if="main.dog == \'Page Count\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Filename\'; maybe = !maybe"><strong>Filename<i class=fa ng-if="main.dog == \'Filename\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th></tr></thead><tbody><tr ng-repeat="roarevent in collection.imagefile | filter: main.query | orderBy: main.dog : !maybe" colorkey="{{roarevent[\'Document Code\']}}"><th><a ng-click=main.pushtoqueue(roarevent)><i class="fa fa-file-pdf" ng-class="{\'fa-check\':(roarevents[roarevent.$index].media.indexOf(\'_ocr\')>-1)}">{{$index+1}}</i></a></th><td ng-bind="roarevent[\'Mail Room Date\']"></td><td ng-bind="roarevent[\'Document Code\']"></td><td ng-bind="roarevent[\'Document Description\']"></td><td ng-bind="roarevent[\'Document Category\']"></td><td ng-bind="roarevent[\'Page Count\']"></td><td><a ng-href="{{\'./files/public/uspto/\'+ collection.appnum + \'/\' + collection.appnum + \'-image_file_wrapper/\' + roarevent[\'Filename\']}}">{{roarevent[\'Filename\']}}</a></td></tr></tbody></table></uib-tab-content></uib-tab></uib-tabset></uib-tab-content></uib-tab><uib-tab active=main.tabs[1].isActive disable=main.tabs[1].disabled select="main.tabs[1].isActive = true" deselect="main.tabs[1].isActive = false" style="margin: 0 5px;"><uib-tab-heading ng-style>Patent Digest</uib-tab-heading><uib-tab-content ng-if=main.tabs[1].isActive ng-controller="MainCtrl as main"><patentreport patent={{collection.patent.id}} pnum={{collection.patent.id}} config="{PNUM:collection.patent.id, IPAYEAR: collection.patent.pub.slice(0,4),IPAYEAR: collection.patent.pub.slice(4,collection.patent.pub.length) }"></patentreport></uib-tab-content></uib-tab><uib-tab heading="Claim/Rejection History" active=main.tabs[2].isActive select="main.tabs[2].isActive = true" deselect="main.tabs[2].isActive = false"><uib-tab-content><uib-tabset justified=true><uib-tab heading="Claim History-at-a-Glance"><d3historytree patent={{config.PNUM}}></d3historytree></uib-tab><uib-tab heading="Issued Claims"><div ng-include="\'{widgetsPath}/getphd/src/claimtreetab.html\'"></div></uib-tab><uib-tab ffbase={{config.PNUM}}><uib-tab-heading>Rejections <label class="label label-pill label-danger">{{item.rejectionhistory.length}}</label></uib-tab-heading><div ng-repeat="(key, date) in item.rejectionhistory" class="card card-PTO"><div class=card-header><h4 class=card-title>{{key | date:long}} <a class="fa fa-ellipsis-v fa-pull-right" ng-click="this.isCollapsed = !this.isCollapsed"></a></h4></div><div class=card-block uib-collapse=isCollapsed rejectionset set=date></div></div></uib-tab></uib-tabset></uib-tab-content></uib-tab></uib-tabset></uib-tab><uib-tab ng-repeat="col in collection.roarlist" ffbase={{col}} class="btn btn-default btn-xs badger badger-left tabs-right badger-{{item.styleClass}}" style=border-top-width:4px;border-color:inherit; data-badger={{item.title}}><uib-tab-heading class=text-{{item.styleClass}}><small>{{item.rid}}</small></uib-tab-heading><roargrid config="{id: col}"></roargrid></uib-tab></uib-tabset></div></div></div>'),e.put("{widgetsPath}/getphd/src/popupMetadata.html",'<div class="panel panel-{{collecton.styleClass}}"></div>'),e.put("{widgetsPath}/getphd/src/rejection.html",'<div colorkey="{{rejection.status | trim}}" class=img-avatar style=display:flex;align-items:center;align-content:center;><label>{{rejection.status}}</label></div><div style="min-width: 150px;height:100px;"><span ng-repeat="c in rejection.claims_affected" style=width:25%;float:left;>{{c}}</span></div><div style=overflow:scroll;text-overflow:ellipsis;><ng-annotate-text text="rejection.text | highlight: query" annotations=rejection.annotations readonly=false popup-controller="\'AnnotationController\'" popup-template-url="\'/llp_core/modules/roarmap/partial/roarmap.detail.tpl/roarmap.annotation.tpl.html\'" tooltip-controller="\'AnnotationController\'" tooltip-template-url="\'/llp_core/modules/roarmap/partial/roarmap.detail.tpl/roarmap.annotation-tooltip.tpl.html\'" on-annotate=onAnnotate on-annotate-delete=onAnnotateDelete on-annotate-error=onAnnotateError on-popup-show=onPopupShow on-popup-hide=onPopupHide popup-offset=50></ng-annotate-text></div>'),e.put("{widgetsPath}/getphd/src/rejectionset.html","<div ng-repeat=\"rejection in set | orderBy: ['id','type'] : maybe\"><div rejection=rejection style=display:flex;flex-direction:row;max-height:100px; class=\"card img-shadow\" data-badger={{rejection.type}}></div></div>"),e.put("{widgetsPath}/getphd/src/report.html",'<table class="table table-stripped table-hover table-condensed table-responsive"><thead><tr class=td-petition><th ng-click="maybe = !maybe;prop = \'id\'">#</th><th ng-click="maybe = !maybe;prop = \'doccode\'">#</th><th class=td-petition ng-click="maybe = !maybe;prop = \'total\'">Total</th><th colorkey=allowed ng-click="maybe = !maybe;prop = \'allowed\'">Allowed</th><th colorkey=new ng-click="maybe = !maybe;prop = \'allowed\'">New</th><th colorkey=original ng-click="maybe = !maybe;prop = \'original\'">O</th><th colorkey=canceled ng-click="maybe = !maybe;prop = \'canceled\'">C</th><th colorkey=withdrawn ng-click="maybe = !maybe;prop = \'withdrawn\'">W</th><th colorkey="currently amended" ng-click="maybe = !maybe;prop = \'currently\'">C.A.</th><th colorkey="previously presented" ng-click="maybe = !maybe;prop = \'previously\'">P.P.</th><th colorkey=allowable ng-click="maybe = !maybe;prop = \'allowable\'">Allowable</th><th colorkey=101 ng-click="maybe = !maybe;prop = \'v101\'">101</th><th colorkey=102 ng-click="maybe = !maybe;prop = \'v102\'">102</th><th colorkey=103 ng-click="maybe = !maybe;prop = \'v103\'">103</th><th colorkey=112 ng-click="maybe = !maybe;prop = \'v112\'">112</th></tr></thead><tbody><tr ng-repeat="(key, paper) in arra | orderBy: prop :maybe" ffbase={{paper.id}} class={{item.styleClass}} collection="{{paper.id.slice(0,paper.id.indexOf(\'-\'))}}"><td ng-click=runhistory(collection)>{{collection.patent.id|number:0}}</td><td class="well {{item.styleClass}}" ng-click=pushtoqueue(item)>{{item.rid}} - {{item.doccode}}</td><td ng-bind=paper.total||paper.pending></td><td ng-bind=paper.allowed></td><td ng-bind=paper.new></td><td ng-bind=paper.original></td><td ng-bind=paper.canceled></td><td ng-bind=paper.withdrawn></td><td ng-bind=paper.amended.currently></td><td ng-bind=paper.amended.previously></td><td ng-bind=paper.v101></td><td ng-bind=paper.v102></td><td ng-bind=paper.v103></td><td ng-bind=paper.v112></td><td ng-bind=paper.allowable></td></tr><tr><td ng-bind="sum(collection, \'total\')"></td><td ng-bind="sum(collection, \'allowed\')"></td><td ng-bind="sum(collection, \'new\')"></td><td ng-bind="sum(collection, \'original\')"></td><td ng-bind="sum(collection, \'canceled\')"></td><td ng-bind="sum(collection, \'withdrawn\')"></td><td ng-bind="sum(collection, \'currently\')"></td><td ng-bind="sum(collection, \'previously\')"></td><td ng-bind="sum(collection, \'v101\')"></td><td ng-bind="sum(collection, \'v102\')"></td><td ng-bind="sum(collection, \'v103\')"></td><td ng-bind="sum(collection, \'v112\')"></td></tr></tbody></table><div class="animated row card-deck clear-fix"><div class="toast toast-info btn-glass"><h6 class="fa fa-3x fa-ge">{{report.filehistories.total}} <label>&nbsp;&nbsp;TOTAL</label></h6></div></div><div class="toast toast-success btn-glass"><h6 class="fa fa-3x fa-check">{{report.filehistories.complete}} <label>&nbsp;&nbsp;COMPLETE</label></h6></div><div class="toast toast-warning btn-glass"><h6 class="fa fa-3x fa-alert">{{report.filehistories.incomplete}} <label>&nbsp;&nbsp;INCOMPLETE</label></h6></div><div class="animated row"><div class=col-md-6 style=height:600px;overflow:scroll;><div style="margin:2.5%;padding:2.5%;display:flex;flex-flow:row wrap;justify-content:space-between;perspective:1200px;transform-style:preserve-3d;" class="card card-block img-shadow"><figure draggable style="width:100px;height:100px;border:0px groove #ddd;float:left;margin:2.5px;perspective:500px;transform-style:preserve-3d;transition:all 0.2s ease;position:relative;background-color:transparent;" ng-repeat="history in report.filehistories.data | filter: report.query | orderBy: [prop,\'id\'] :maybe"><img src="{{history.media || history.altimgurl}}" style="width:100%;height:100%;transition:all 0.2s ease;" ng-class="{\'img-thumbnail highlight\':(history.mouseover == true) }" ng-mouseenter="history.mouseover = true" ng-mouseleave="history.mouseover = false" class="img img-shadow"><a ng-click=app.dofunction(history) style="position:absolute;left:0;top:100%;right:0;text-align:center;border-radius:20px;box-shadow:inset 0 0 30px rgba(250,250,250,0.75),-1px 1px 5px rgba(0,0,0,0.5),inset -1px 1px 5px rgba(0,0,0,0.5);background-color:rgba(0,0,0,0.25);border:2.5px ridge black;transform-origin:50% 50%;transform:translateZ(5px)translateY(-25px);transition:all 0.2s ease;color:black;" class="label btn">{{(history.id | number:0) || history.application.utility}}</a></figure></div></div><div class=col-md-6 style=height:600px;overflow:scroll;><div style=margin:2.4%;padding:2.5%; class="card card-block img-shadow"><a style=position:absolute;z-index:2;right:5px; ng-click="report.query = \'\'" class=badge><i class="fa fa-close"></i></a> <input style=position:absolute;z-index:1;right:5px; placeholder=Search... ng-model=report.query class=pull-right><table style=z-index:0; class="table table-stripped table-condensed table-hover table-resonsive"><thead><th ng-click="maybe = !maybe;prop = \'isReedTech\'"><i class="fa fa-check"></i></th><th ng-click="maybe = !maybe;prop = \'appnum\'">#</th><th ng-click="maybe = !maybe;prop = \'id\'">ID</th><th ng-click="maybe = !maybe;prop = \'claims_issued_total\'">Issued / Pending</th><th ng-click="maybe = !maybe;prop = \'art_unit\'">Art Unit</th><th ng-click="maybe = !maybe;prop = \'file.fstat.size\'">FileSize</th><th ng-click="maybe = !maybe;prop = \'title\'">Title</th><th ng-click="maybe = !maybe;prop = \'file.added">Added</th></thead><tbody><tr ng-repeat="history in report.filehistories.data | filter: report.query | orderBy: [prop,\'id\'] :maybe" ng-mouseenter="history.mouseover = true" ng-mouseleave="history.mouseover = false" ng-class="{\'primary tr-primary\':(history.mouseover == true) }" class="animated staggered"><td><span ng-class="{\'fa-check text-success\':(history.isReedTech === true),\'fa-minus text-danger\':(history.isReedTech !== true)}" class=fa></span></td><td>{{$index}}</td><td><strong>{{history.patent}}</strong><br>({{history.application.utility}})</td><td>{{history.claims_issued_total}} / {{history.claims_pending_total}}<br>({{history.claims_issued_total / history.claims_pending_total * 100 }}%)</td><td ng-bind-html="history.art_unit | highlight: report.query | trustAsHTML">{{history.art_unit}}</td><td ng-bind-html=history.file.size></td><td ng-bind-html="history.title | highlight: report.query | trustAsHTML">{{history.title}}</td><td ng-bind-html="history.file.added | date"></td></tr></tbody></table></div></div></div>'),e.put("{widgetsPath}/getphd/src/roartable.html","<table class=\"table table-hover table-condensed table-responsive\" collection={{config.IDNUM}} roarevents={{config.IDNUM}}><thead><th ng-click=\"main.dog = '';maybe = !maybe\"><strong># <i class=fa ng-class=\"{'fa-chevron-up':maybe,'fa-chevron-down': !maybe}\" ng-if=\"main.dog == ''\"></i></strong></th><th ng-click=\"main.dog = 'title';maybe = !maybe\"><strong>Title <i class=fa ng-class=\"{'fa-chevron-up':maybe,'fa-chevron-down': !maybe}\" ng-if=\"main.dog == 'title'\"></i></strong></th><th ng-click=\"main.dog = 'date';maybe = !maybe\"><strong>Date <i class=fa ng-class=\"{'fa-chevron-up':maybe,'fa-chevron-down': !maybe}\" ng-if=\"main.dog == 'date'\"></i></strong></th><th ng-click=\"main.dog = 'description';maybe = !maybe\"><strong>Description <i class=fa ng-class=\"{'fa-chevron-up':maybe,'fa-chevron-down': !maybe}\" ng-if=\"main.dog == 'description'\"></i></strong></th></thead><tbody><tr ng-repeat=\"roarevent in roarevents | filter: main.query | orderBy: main.dog : maybe\"><td ng-bind=\"$index + 1\"></td><td ng-bind=roarevent.title></td><td ng-bind=\"roarevent.date | date\"></td><td ng-bind=roarevent.description></td></tr></tbody></table>"),e.put("{widgetsPath}/getphd/src/roartableedit.html",'<form role=form ng-submit=collection.$save()><fieldset class="material Applicant"><input type=text placeholder=1234567 ng-model=config.IDNUM><hr><label>Enter a ROARmap ID</label></fieldset><br></form>'),e.put("{widgetsPath}/getphd/src/titleTemplate.html",'<div class=panel-heading style=z-index:1;margin:0px; ng-init="coplapse = false"><h4 class=panel-title><div uib-dropdown uib-keyboard-nav style=z-index:1000000;><a uib-dropdown-toggle class="btn btn-xs vcenter pull-left no-arrow"><label class="fa fa-bars hovergold" style="cursor:pointer;filter:drop-shadow(0 0 2.5px rgba(0,0,0,0.5));color: #fff;"></label></a><ul class="uib-dropdown-menu panel r-action" style="position:absolute;width:280px;box-shadow: 5px 5px 10px rgba(0,0,0,0.5);"><li uib-tooltip="COPY LINK" tooltip-trigger=mouseenter tooltip-append-to-body=false tooltip-placement=right><a class=hovergold style="text-shadow:inset 0 0 1px rgba(0,0,0,0.5);" clipboard text=roarevent.media on-copied="alertify.success(\'copied!\');" on-error="alertify.error(err,\'uh oh!\')" onclick="alertify.success(\'copied!\')"><i class="fa fa-link" style=margin:5px;></i> COPY LINK</a></li><li uib-tooltip="COPY LEXPAD ID" tooltip-trigger=mouseenter tooltip-append-to-body=false tooltip-placement=right><a class=hovergold style="text-shadow:inset 0 0 1px rgba(0,0,0,0.5);" clipboard text=roarevent.$id on-copied="alertify.success(\'copied!\');" on-error="alertify.error(err,\'uh oh!\')" onclick="alertify.success(\'copied!\')"><i class="fa fa-info" style=margin:5px;></i> COPY LEXPAD ID</a></li><li uib-tooltip=COLLAPSE tooltip-trigger=mouseenter tooltip-append-to-body=false tooltip-placement=right><a class=hovergold style="text-shadow:inset 0 0 1px rgba(0,0,0,0.5);" title="collapse widget" ng-show=!isCollapsed ng-click="isCollapsed = true" onclick="$(\'.issuedocpanel\').addClass(\'closed\')"><i class="fa fa-minus" style=margin:5px;></i> COLLAPSE</a></li><li uib-tooltip=EXPAND tooltip-trigger=mouseenter tooltip-append-to-body=false tooltip-placement=right><a class=hovergold style="text-shadow:inset 0 0 1px rgba(0,0,0,0.5);" title="expand widget" ng-show=isCollapsed ng-click="isCollapsed = false" onclick="$(\'.issuedocpanel\').removeClass(\'closed\')"><i class="fa fa-plus" style=margin:5px;></i> EXPAND</a></li><li uib-tooltip="COPY TO CLIPBOARD" tooltip-trigger=mouseenter tooltip-append-to-body=false tooltip-placement=right><a class=hovergold style="text-shadow:inset 0 0 1px rgba(0,0,0,0.5);" title="copy to clipboard" ng-click=edit(roarevent.id)><i class="fa fa-copy" style=margin:5px;></i> COPY TO CLIPBOARD</a></li><li uib-tooltip=FULLSCREEN tooltip-trigger=mouseenter tooltip-append-to-body=false tooltip-placement=right><a class=hovergold style="text-shadow:inset 0 0 1px rgba(0,0,0,0.5);" title="fullscreen widget" ng-click=openFullScreen(roarevent.$id) ng-show="options.maximizable || true"><i class="fa fa-expand" style=margin:5px;></i> FULLSCREEN</a></li><li uib-tooltip="POP OUT" tooltip-trigger=mouseenter tooltip-append-to-body=false tooltip-placement=right><a class=hovergold style="text-shadow:inset 0 0 1px rgba(0,0,0,0.5);" title="pop out" ng-click=openprev()><i class="fa fa-external-link" style=margin:5px;></i> POPOUT</a></li><li class=divider></li><li uib-tooltip=CLOSE tooltip-trigger=mouseenter tooltip-append-to-body=false tooltip-placement=right><a class="hovergold text-danger" style="text-shadow:inset 0 0 1px rgba(0,0,0,0.5);" title="remove widget" ng-click=remove() onclick="$(this).closest(\'.issuedocpanel\').remove()"><i class="fa fa-close" style=margin:5px;></i> CLOSE</a></li></ul></div><div class="row vcenter"><small>&nbsp;&nbsp;|&nbsp;&nbsp;</small> <small ng-bind=roarevent.rid ng-click="drag = !drag" ng-class="{\':active\':drag}"></small> <small>&nbsp;&nbsp;|&nbsp;&nbsp;</small> <small ng-bind="roarevent.title || roarevent.date"></small> <small><em style=margin-left:50px; ng-bind="roarevent.date | date"></em><span class="fa {{roarevent.icon || \'fa-info\'}}" ng-click="roarevent.coplapse = !roarevent.coplapse" style="margin: 5px;"></span> <span class="fa fa-close" ng-click=remove() onclick="$(this).closest(\'.issuedocpanel\').remove()" style=margin:10px;></span></small></div></h4><div class="card clearfix img img-hover img-shadow" collection={{roarevent.$id}} style=z-index:1;position:absolute;left:99.5%;top:0;min-width:550px ng-class="{\'collapse\':!roarevent.coplapse, \'collapse in\':roarevent.coplapse}"><h6>ID: {{collection.$id}}</h6><p clipboard text=collection.$id onsuccess="alertify.success(\'copied ID\')">{{\'/files/uploads/\'+collection.$id+\'.html\'}}</p><form role=form name=form ng-submit=collection.$save()><div class=col-sm-7><div class="form-group col-sm-6"><label for=sortOrder style=color:#006699>Sort Order</label> <input type=number placeholder=# id=sortOrder ng-model=collection.sortOrder></div><div class="form-group col-sm-6"><label style="color: #006699">ID#</label><br><input type=text ng-model=collection.rid placeholder=# ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=dashboardTitle style="color: #006699">Title</label> <input type=text style="width: 100%" id=dashboardTitle ng-model=collection.title required></div><div class=form-group><label for=description style="color: #006699">Description</label><br><textarea type=text class=form-control id=description ng-model=collection.description ng-model-options="{updateOn: \'blur\'}"></textarea></div><div class=form-group><label for=long_cite style="color: #006699">Long Citation</label><br><input type=text style="width: 100%" ng-model=collection.citation placeholder="Long Citation" ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=short_cite style="color: #006699">Short Citation</label><br><input type=text style="width: 100%" ng-model=collection.short_cite placeholder="Short Citation" ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=thumbnail style="color: #006699">Notes</label><br><textarea rows=15 type=text style="width: 100%" ng-model=collection.notes placeholder="Enter plaintext notes" ng-model-options="{updateOn: \'default blur\'}" class=form-control></textarea></div><div class=form-group><label for=url style="color: #006699">URL</label><br><input type=text style="width: 100%" ng-model=collection.mediaUrl placeholder="Path to URL" ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=thumbnail style="color: #006699">Thumbnail</label><br><input type=text style="width: 100%" ng-model=collection.thumbnail placeholder="Path to URL" ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=roarlist style="color: #006699">Linked Docs</label><br><div smartpanel={{collection.$id}}></div></div></div><div class=col-sm-5 style=max-height:175px;><roar-event id={{roarevent.$id}} style=max-height:175px;><uib-rating ng-model=roarevent.rate max=5></uib-rating></roar-event><input type=submit class="btn btn-glass btn-primary btn-md pull-right" value=SAVE><div class="form-group col-sm-6"><label style="color: #006699">Icon</label><br><select name=icon ng-model=collection.icon ng-options="icon.value as icon.label for icon in $root.ICONS"></select></div><div class="form-group col-sm-12"><label style="color: #006699">Style</label><br><select ng-model=collection.styleClass ng-options="class.value as class.label for class in $root.ROARCLASSES"></select></div><div class="form-group col-sm-12"><label style="color: #006699">Document Code</label><br><input ng-model=collection.doccode uib-typeahead="code.code as code.label for code in DOCNAMES | filter:$viewValue | limitTo:8" typeahead-wait-ms=100></div><div class="form-group col-sm-12"><label style="color: #006699">Tags</label><br><input ng-model=collection.matches ng-list=,></div><div class="form-group col-sm-12"><label style="color: #006699">Date</label><br><input type=text ng-model=collection.date placeholder=YYYY-MM-DD ng-pattern=dddd-dd-dd ng-model-options="{updateOn: \'blur\'}"></div><div class="form-group col-sm-12"><label style="color: #006699">Name</label><br><input type=text ng-model=collection.name placeholder=name ng-model-options="{updateOn: \'blur\'}"></div><div class="form-group col-sm-12"><label style="color: #006699">FileName</label><br><input type=text ng-model=collection.file.name placeholder="file name" ng-model-options="{updateOn: \'blur\'}"></div><div class="form-group col-sm-12"><label for=roarlist style="color: #006699">Linked Docs <i class=badge ng-bind=roareventsarray.length>{{roareventsarray.length}}</i></label><ol ng-scrollbar style=height:300px;overflow-y:scroll;><li ng-repeat="roareventid in collection.roarlist as roareventsarray" style=float:left;><roar-chip id={{roareventid}}></roar-chip></li></ol></div></div></form></div></div>'),
e.put("{widgetsPath}/getphd/src/uploader.html",'<div class="card card-fancy card-rounded card-thick"><h3 class=pull-right>Upload queue</h3><input type=file nv-file-select uploader=uploader multiple><p>Queue length: {{ uploader.queue.length }}</p><table class=table><thead><tr><th width=50%>Name</th><th ng-show=uploader.isHTML5>Size</th><th ng-show=uploader.isHTML5>Progress</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr ng-repeat="item in uploader.queue"><td uib-popover="{{item.file | json:4}}" popover-trigger=mouseenter popover-placement=right><strong>{{ item.file.name }}&nbsp;|&nbsp;{{item.file.mimetype}}</strong></td><td ng-show=uploader.isHTML5 nowrap>{{ item.file.size/1024/1024|number:3 }} MB</td><td ng-show=uploader.isHTML5><div class=progress style="margin-bottom: 0;"><div class=progress-bar role=progressbar ng-style="{\'width\': item.progress + \'%\' }"></div></div></td><td class=text-center><span ng-show=item.isSuccess><i class="glyphicon glyphicon-ok"></i></span> <span ng-show=item.isCancel><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show=item.isError><i class="glyphicon glyphicon-remove"></i></span></td><td nowrap><button type=button class="btn btn-success btn-xs" ng-click=item.upload() ng-disabled="item.isReady || item.isUploading || item.isSuccess"><span class="glyphicon glyphicon-upload"></span> Upload</button> <button type=button class="btn btn-warning btn-xs" ng-click=item.cancel() ng-disabled=!item.isUploading><span class="glyphicon glyphicon-ban-circle"></span> Cancel</button> <button type=button class="btn btn-danger btn-xs" ng-click=item.remove()><span class="glyphicon glyphicon-trash"></span> Remove</button></td></tr></tbody></table><div><div>Queue progress:<div class=progress><div class=progress-bar role=progressbar ng-style="{ \'width\': uploader.progress + \'%\' }"></div></div></div><button type=button class="btn btn-success btn-s" ng-click=uploader.uploadAll() ng-disabled=!uploader.getNotUploadedItems().length><span class="glyphicon glyphicon-upload"></span> Upload all</button> <button type=button class="btn btn-warning btn-s" ng-click=uploader.cancelAll() ng-disabled=!uploader.isUploading><span class="glyphicon glyphicon-ban-circle"></span> Cancel all</button> <button type=button class="btn btn-danger btn-s" ng-click=uploader.clearQueue() ng-disabled=!uploader.queue.length><span class="glyphicon glyphicon-trash"></span> Remove all</button></div></div>'),e.put("{widgetsPath}/getphd/src/view.html",'<div ng-controller="MainCtrl as main"><div class="card card-primary card-block btn-glass drop-target" nv-file-drop uploader=uploader drop-files=handleFiles(files) style="border: 2px dashed blue;margin: 5px;" ng-if=main.showupload><div ng-controller=pageslideCtrl><button class="row btn btn-glass btn-primary img img-rounded" style=width:100%;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:center;flex-direction:row; ng-click=main.toggle() ng-class="{\'btn-success\': (main.progress == 100),\'btn-danger\':(main.progress === \'failed\')}" angular-ripple><uib-progressbar class="btn-glass fa fa-3x active stripped" ng-class="{\'active\':(main.progress < 100)}" ng-if=main.progress value=main.progress style=height:40px;margin:auto;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;align-self:stretch; type={{main.progresstype}}></uib-progressbar><i class="fa fa-upload fa-3x" style="color:white;text-shadow:0 0 1px rgba(0,0,0,0.5);">{{main.progress}}<span ng-show=main.progress>%</span></i> <img src=https://lexlab.firebaseapp.com/img/GoldLogoLong.svg class="img img-rounded pull-right" style=max-height:100px; ng-if=!main.progress><uib-progressbar class="btn-glass fa fa-3x active striped" ng-class="{\'active\':(application.complete < 100)}" ng-if=main.showprog value=application.complete style="height:40px;margin:auto;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:center;justify-content:space-between;flex-flow:row nowrap;align-self:stretch;" type={{application.status}}><h4><label class="label label-{{application.status}}" style="color:white;text-shadow:0 0 1px rgba(0,0,0,0.5);">{{application.complete}}%</label><label class="label label-{{application.status}}" style="color:white;text-shadow:0 0 1px rgba(0,0,0,0.5);">{{application.downloaded | bytes}} / {{application.total | bytes}}</label><label class="label label-{{application.status}}" style="color:white;text-shadow:0 0 1px rgba(0,0,0,0.5);">{{application.eta}}</label></h4></uib-progressbar></button><div class="row btn btn-glass btn-info" style=position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:center;flex-direction:row; ng-if=main.progresstwo><uib-progressbar class="btn-glass fa fa-3x active striped" ng-class="{\'active\':(main.progresstwo < 100)}" value=main.progresstwo max=main.extractedfiles style=height:40px;margin:auto;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;align-self:stretch; type={{main.progresstype}}></uib-progressbar><i class="fa fa-fw fa-3x fa-spinner fa-spin"></i><i class="fa fa-3x">{{main.progresstwo}}/{{main.extractedfiles}}</i></div><div pageslide ps-open=main.checked ps-key-listener=true ps-side="{{main.side || \'left\'}}" ps-class="{{main.styleClass || \'card-dark btn-glass\'}}" ps-size="{{main.size || \'400\'}}" style=overflow-x:visible;overflow-y:scroll;><div ng-include="\'/getphdwidget/src/phd/step-1.html\'"></div><hr></div></div></div><div class="card card-fancy card-rounded card-block card-thick" style="text-align: left;color: #444;" ng-if=showmetadata><patentreport config=$parent.config></patentreport></div><div class="card card-fancy card-rounded card-block card-thick" style="text-align: left;color: #444;" ng-if=phd.file><button class="alert btn-glass btn-primary img card-rounded row" style="position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:center;justify-content:space-between;flex-direction:row;background-color:#35688F;padding:2px;box-shadow:inset 10px 2px 50px rgba(0,0,0,0.5);" ng-click=main.collapse()><div style=display:flex;justify-content:flex-end;flex-direction:column;align-content:flex-end;vertical-align:middle;align-items:flex-end;><h4 class="card-title ng-binding display-4" style="margin-bottom:0;color: #fff;">US {{config.PNUM | number:0 }}</h4><h5 class="card-subtitle ng-binding" style=color:#ddd;><span class=lead>USSN {{phd.application[\'Application Number\']}}</span></h5></div><img src=/llp_core/img/GoldLion.svg class="img lionlogofilter" style="width:75px;height: auto;"><div style=display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;><img src=/llp_core/img/GoldLogoLong.svg class=img style=height:45px;> <img src=/llp_core/img/GoldPhdLogoLong.svg class=img style=height:25px;padding-left:2px;></div></button><div uib-collapse=collapsereport class="card clearfix" style=padding:0;margin:0;><blockquote class="bs-callout bs-callout-NOA" style="margin: 0;"><h4>{{phd.application[\'Title of Invention\']}}</h4><p style=font-size:10px;><cite>{{phd.application[\'First Named Inventor\']}} <small><emphasis>Issued {{phd.patent.issued | date}}</emphasis></small></cite></p></blockquote><uib-tabset active=1 class=tabbable justified=true type=pills><uib-tab active=main.tabs[0].isActive disabled=main.tabs[0].disabled select="main.tabs[0].isActive = true" deselect="main.tabs[0].isActive = false" style="margin: 0 5px;"><uib-tab-heading class=text-Petition>PTO Metadata</uib-tab-heading><uib-tab-content ng-if=main.tabs[0].isActive><uib-tabset class="tabbable tabs-left"><uib-tab><uib-tab-heading>USSN {{phd.application[\'Application Number\']}}</uib-tab-heading><uib-tabset class=tabbable><uib-tab ng-repeat="file in phd.file" heading="{{file.label | uppercase}}"><uib-tab-content><pre class="card card-block card-fancy" ng-bind=file.file></pre></uib-tab-content></uib-tab></uib-tabset></uib-tab><uib-tab ng-if=phd.application><uib-tab-heading>APPLICATION</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="(key, value) in phd.application"><td><strong>{{::key}}</strong></td><td>{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.attorney><uib-tab-heading ng-style>ATTORNEY</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="(key, line) in phd.attorney track by $index"><td ng-repeat="(key, value) in line track by $index">{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.continuity><uib-tab-heading ng-style>CONTINUITY</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-condensed table-hover table-responsive"><tbody><tr ng-repeat="(key,line) in phd.continuity track by $index"><td ng-repeat="(key, value) in line track by $index">{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.foreign><uib-tab-heading ng-style>FOREIGN PRIORITY</uib-tab-heading><uib-tab-content><table class="table table-stripped table-condensed table-hover table-responsive"><thead><tr><th><strong>Country</strong></th><th><strong>Priority</strong></th><th><strong>Priority Date</strong></th></tr></thead><tbody><tr ng-repeat="p in phd.foreign"><td ng-bind="::p[\'Country\']"></td><td ng-bind="::p[\'Priority\']"></td><td ng-bind="::p[\'Priority Date\'] | date"></td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.term><uib-tab-heading>PATENT TERM ADJUSTMENTS</uib-tab-heading><uib-tab-content><table class="card card-block table table-striped table-hover table-condensed table-responsive"><tbody><tr ng-repeat="(key, line) in phd.term track by $index"><td ng-repeat="(key,value) in line track by $index">{{::value}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.transaction><uib-tab-heading>TRANSACTION</uib-tab-heading><uib-tab-content><table class="table table-striped table-hover table-condensed table-responsive"><thead><tr><th><strong>Date</strong></th><th><strong>Transaction Description</strong></th></tr></thead><tbody><tr ng-repeat="trans in phd.transaction"><td>{{::trans[\'Date\']}}</td><td>{{::trans[\'Transaction Description\']}}</td></tr></tbody></table></uib-tab-content></uib-tab><uib-tab ng-if=phd.imagefile select="tab.isActive = true" deslect="tab.isActive = false;"><uib-tab-heading ng-style>IMAGE FILE WRAPPER</uib-tab-heading><uib-tab-content ng-if=tab.isActive><table class="table table-hover table-condensed table-responsive"><thead><tr><th ng-click="reverse = !reverse" class=fa ng-class="{\'fa-chevron-up\': reverse,\'fa-chevron-down\': !reverse}">#</th><th ng-click="main.dog = \'Mail\\ Room\\ Date\'; maybe = !maybe"><strong>Mail Room Date<i class=fa ng-if="main.dog == \'Mail Room Date\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Code\'; maybe = !maybe"><strong>Document Code<i class=fa ng-if="main.dog == \'Document Code\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Description\'; maybe = !maybe"><strong>Document Description<i class=fa ng-if="main.dog == \'Document Description\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Document\\ Category\'; maybe = !maybe"><strong>Document Category<i class=fa ng-if="main.dog == \'Document Category\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Page\\ Count\'; maybe = !maybe"><strong>Page Count<i class=fa ng-if="main.dog == \'Page Count\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th><th ng-click="main.dog = \'Filename\'; maybe = !maybe"><strong>Filename<i class=fa ng-if="main.dog == \'Filename\'" ng-class="{\'fa-chevron-up\':maybe,\'fa-chevron-down\': !maybe}"></i></strong></th></tr></thead><tbody><tr ng-repeat="roarevent in phd.imagefile | filter: main.query | orderBy: main.dog : !maybe" colorkey="{{roarevent[\'Document Code\']}}"><th><a ng-click=main.pushtoqueue(roarevent)><i class="fa fa-file-pdf" ng-class="{\'fa-check\':(roarevents[roarevent.$index].media.indexOf(\'_ocr\')>-1)}">{{$index+1}}</i></a></th><td ng-bind="roarevent[\'Mail Room Date\']"></td><td ng-bind="roarevent[\'Document Code\']"></td><td ng-bind="roarevent[\'Document Description\']"></td><td ng-bind="roarevent[\'Document Category\']"></td><td ng-bind="roarevent[\'Page Count\']"></td><td><a ng-click=main.popdoc(roarevent)>{{roarevent[\'Filename\']}}</a></td></tr></tbody></table></uib-tab-content></uib-tab></uib-tabset></uib-tab-content></uib-tab><uib-tab heading="Claim/Rejection History" active=main.tabs[2].isActive select="main.tabs[2].isActive = true" deselect="main.tabs[2].isActive = false"><uib-tab-content><uib-tabset justified=true><uib-tab heading="Claim History-at-a-Glance"><d3historytree patent={{config.PNUM}}></d3historytree></uib-tab><uib-tab heading="Issued Claims"><div ng-include="\'{widgetsPath}/getphd/src/claimtreetab.html\'"></div></uib-tab><uib-tab ffbase={{config.PNUM}}><uib-tab-heading>Rejections <label class="label label-pill label-danger">{{item.rejectionhistory.length}}</label></uib-tab-heading><div ng-repeat="(key, date) in item.rejectionhistory" class="card card-PTO"><div class=card-header><h4 class=card-title>{{key | date:long}} <a class="fa fa-ellipsis-v fa-pull-right" ng-click="this.isCollapsed = !this.isCollapsed"></a></h4></div><div class=card-block uib-collapse=isCollapsed rejectionset set=date></div></div></uib-tab></uib-tabset></uib-tab-content></uib-tab></uib-tabset></div></div></div>'),e.put("{widgetsPath}/getphd/src/webdata.html",'<form ng-submit=updateConfig()><menuconfig></menuconfig><small editable-text=config.id ng-bind=config.id onaftersave=save(config)>{{config.id}}</small><div class="card card-block clearfix" collection={{config.id}}><h6>ID: {{collection.$id}}</h6><p clipboad text="{{\'./files/uploads/\'+collection.$id+\'.html\'}}" onsuccess="alertify.success(\'copied\')">{{\'./files/uploads/\'+collection.$id+\'.html\'}}</p><form role=form name=form ng-submit=collection.$save()><div class=row><div class=col-sm-8><div class=form-group><label for=dashboardTitle style="color: #006699">Title</label><input type=text class=form-control id=dashboardTitle ng-model=collection.title required></div><div class=row><div class="form-group col-sm-6"><label style="color: #006699">Style</label><br><select ng-model=collection.styleClass ng-options="class.value as class.label for class in $root.ROARCLASSES"></select></div><div class="form-group col-sm-6"><label style="color: #006699">Document Code</label><br><input ng-model=collection.doccode uib-typeahead="code.code as code.label for code in DOCNAMES | filter:$viewValue | limitTo:8" typeahead-wait-ms=100></div></div><div class=row><div class="form-group col-sm-6"><label style="color: #006699">Tags</label><br><input ng-model=collection.matches ng-list=,></div><div class="form-group col-sm-6"><label style="color: #006699">Icon</label><br><select name=icon ng-model=collection.icon ng-options="icon.value as icon.label for icon in $root.ICONS"></select></div></div><div class=row><div class="form-group col-sm-6"><label style="color: #006699">ID#</label><br><input type=text ng-model=collection.rid placeholder=# ng-model-options="{updateOn: \'blur\'}"></div><div class="form-group col-sm-6"><label style="color: #006699">Date</label><br><input type=text ng-model=collection.date placeholder=YYYY-MM-DD ng-pattern=dddd-dd-dd ng-model-options="{updateOn: \'blur\'}"></div></div><div class=form-group><label for=description style="color: #006699">Description</label><br><textarea type=text class=form-control id=description ng-model=collection.description ng-model-options="{updateOn: \'blur\'}"></textarea></div><div class=form-group><label for=url style="color: #006699">URL</label><br><input type=text style="width: 100%" ng-model=collection.media placeholder="Path to URL" ng-model-options="{updateOn: \'blur\'}"></div><div class=form-group><label for=thumbnail style="color: #006699">Thumbnail</label><br><input type=text style="width: 100%" ng-model=collection.thumbnail placeholder="Path to URL" ng-model-options="{updateOn: \'blur\'}"></div></div><div class=col-sm-4><roar-event id={{config.id}}></roar-event><br><input type=submit class="btn btn-primary"> <button class="btn btn-success" ng-click=importFile(collection) ng-if=!collection.ocrlink>OCR</button><uib-progressbar class="active stripped" ng-class="{\'active\':(main.progress < 100)}" ng-if=progress value=progress style=height:20px;margin:auto;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;align-self:stretch; type={{progresstype}}></uib-progressbar></div></div><div class=row><button editable-checklist=collection.menus e-form=checklist ng-click=checklist.$show() e-ng-options="item as item.title for item in collection.roarlist" e-cols=6><span class="fa fa-list-alt">{{collection.roarlist}}</span></button> <i class="fa {{collection.icon || \'fa-file-pdf-o\'}}" editable-text=collection.icon e-uib-typeahead="icon.value as icon.label for icon in $root.ICONS | filter:$viewValue | limitTo:8" e-uib-typeahead-wait-ms=100></i><text-size-slider min=8 max=38 units=px step=2 value=8></text-size-slider></div></form></div></form>'),e.put("{widgetsPath}/getphd/src/webdataedit.html","WebdataController, webdata.html, webdataedit.html"),e.put("{widgetsPath}/getphd/src/phd/Pages.html",'<hr class="bg-{{roarevent.styleClass}} btn hovergold img img-hover" uib-tooltip="doubleclick to rebuild text" tooltip-animation=true tooltip-placement=top style=display:inline-block;width:100%; ng-dblclick=rebuild(roarevent)><div ng-repeat="page in roarevent.pages" class="card card-block" style=line-height:1.5;font-size:14px;><hr class=bg-{{roarevent.styleClass}} style=display:inline-block;width:100%;><span style="display:flex;flex-flow:row wrap;align-content:center;justify-content:space-between;">{{page.header}}</span><hr class=text-{{roarevent.styleClass}} style=display:inline-block;width:50%;margin-left:25%;margin-right:25%:><br><div ng-bind-html="page.text | matches: $parent.roarevent.matches | highlight: $parent.query | trustAsHTML" style="background-color: #fff;padding: 1rem;border-radius: 0.2rem;color: #444;"></div><hr class=text-{{roarevent.styleClass}} style=display:inline-block;width:50%;margin-left:25%;margin-right:25%:><small style=text-align:center;>{{$index}}</small></div>'),e.put("{widgetsPath}/getphd/src/phd/citation.html",'<div class="bs-callout bs-callout-NOA" ng-show=poodle><h4 class=card-title>{{poodle}} - {{p.title}}<a class="pop text-NOA showonhover fa fa-external-link" ng-href={{p.media}}></a><a class="fa fa-sign-in showonhover" ng-click=$parent.p.getdigest(poo)></a></h4><h6 class=card-subtitle>{{p.issued |date}}&nbsp;&nbsp;&nbsp;&nbsp;<strong>{{p.inventor}}</strong>&nbsp;&nbsp;&nbsp;&nbsp;<small class="text-muted>">{{p.application_number || \'Application Number\'}}</small></h6></div><a ng-show=poodle ng-click=$parent.p.getdigest(poo)><img ng-src="{{\'/patents/US\'+poo+\'/preview\'}}" class="img img-responsive img-shadow" style=width:50px;height:50px;margin:5px;position:absolute;right:0px;></a>'),e.put("{widgetsPath}/getphd/src/phd/claimtree.html",'<div ui-tree=treeOptions><ol ui-tree-nodes max-depth=6 ng-model=tree><li ui-tree-node class="card card-block" ng-repeat="node in tree | orderBy: [\'id\',\'name\',\'text\'] : reverse" ng-include="\'claim_renderer.html\'" style=padding-right:0rem;padding-bottom:0.1rem; ng-hide="!treeFilter(node, query, supportedFields) && dim"></li></ol></div><script type=text/ng-template id=claim_renderer.html><div ui-tree-handle class="tree-node tree-node-content"> <div class="tree-node-content flextoprow " style="position:relative;"> <a class="btn btn-xs pull-left" data-nodrag ng-click="toggle(this)" ><span class="fa " ng-class="{\'fa-chevron-right\': collapsed, \'fa-chevron-down\': !collapsed}" style="color:steelblue;transition:all 0.25s ease;" ng-if="node.children && (node.children.length > 0)"></span></a> <!--<input type="text" ng-model="node.text" ng-change="node.$save();" ng-model-options="{ updateOn: \'default blur\', debounce: {\'default\': 1000, \'blur\': 0} }" style="padding: 0.5rem;color:#444;" ng-if="config.editable">--> <!--<a class="btn showonhover" data-nodrag ng-if="config.editable" ng-click="remove(this);"><span class="fa fa-close text-danger "></span></a>--> <!--<a class="btn " data-nodrag ng-if="config.editable" ng-click="toc.newsubsection(this)" style=""><span class="fa fa-plus text-success"></span></a>--> <label class="pull-right label badge " ng-bind="node.status" ng-class="{\'bg-NOA\': (node.status.indexOf(\'rently\') > -1),\'bg-Applicant\': (node.status.indexOf(\'viously\') > -1)}" style="position:absolute;right:5px;bottom:5px;"></label> <div ng-bind-html="node.text | highlight: query " data-nodrag ng-class="{\'filtered-out\':(!treeFilter(node, query, supportedFields) && dim)}" style="color:#444 !important;"></div> <!--<a class="gototarget btn" data-nodrag ui-sref="{{parentstate}}.righttab({tabid: node.id})" style=""> <span ng-if="!config.editable" class="pull-left">{{node.text}}</span><i style="position:absolute;right:0;">&nbsp;</i></a>--> </div> </div> <ol ui-tree-nodes="" ng-model="node.children" ng-class="{\'hidden\': collapsed}" style=""> <li class="card card-block img-shadow" ng-repeat="node in node.children | orderBy: [\'id\',\'name\',\'text\'] : reverse" ui-tree-node ng-include="\'claim_renderer.html\'" style="padding-right:0rem;padding-bottom:0.1rem;padding-left:5px;" ng-hide="!treeFilter(node, query, supportedFields) && dim" > </li> </ol></script>'),e.put("{widgetsPath}/getphd/src/phd/docheader.html",'<div class="container-fluid card bs two-col-right"><div class="col-xs-4 card card-{{roarevent.styleClass}} col-1" style="max-width:33%;max-height: 95vh;overflow: scroll;"><img dynamic-background background=url({{background(roarevent.styleClass)}}) background-position="0 0;" background-repeat=no-repeat ng-src="{{roarevent.thumbnail || background(roarevent.styleClass)}}" class="img img-responsive img-shadow img-thumbnail" ng-click="poodle = !poodle"><h4>{{roarevent.title}}</h4><p class=card-text><label ng-repeat="match in roarevent.matches track by $index | groupBy: match" class="fa fa-tag">&nbsp;<a ng-click=getRelated(match)>{{match}}</a>&nbsp;</label></p><div uib-collapse=!poodle><div class=card-header><h4 class="card-title fa fa-2x fa-copy" ng-click="swap = !swap"><strong style="font-family: \'Helvetica\',sans-serif;">Related Documents</strong><label class=badge>{{vents.length||ventss.length}}</label></h4></div><div uib-collapse=swap><p ng-repeat="vent in roarevent.roarlist as ventss" ffbase="{{vent.$id || vent.$value || vent}}" style=max-width:100%;width:100% ng-click=getRelatedPage(vent)><a ng-href="{{item.mediaUrl || item.media || \'/files/uploads/\'+item.$id+\'.html\'}}" target=fframe title="{{item.filename || item.file.name || item.name || item.$id}}" date={{item.date}} class="fa fa-3x fa-chevron-right fa-pull-right" style="opacity: 0.25;" uib-tooltip="view in fframe" ng-click="roarevent.showframe = !roarevent.showframe"></a><roar-chip-a style=min-width:300px id="{{vent.$id || vent.$value || vent}}"></roar-chip-a></p></div><div uib-collapse=!swap><div ng-repeat="vent in roarevent.roarlist as vents" smartpanel="{{vent.$id || vent.$value || vent}}"></div></div></div></div><div class="col-xs-8 col-2"><div class="bs-callout bs-callout-reverse bs-callout-{{roarevent.styleClass}}"><h4 ng-dblclick="full = !full" ng-click="roarevent.showframe = !roarevent.showframe">{{roarevent.title}}</h4><p ng-bind=roarevent.description></p><p ng-if=roardate>Dated {{roarevent.date | date }}</p><cite class="pull-right clearfix">{{roarevent.filename || roarevent.file.name || roarevent.name || roarevent.$id}}&nbsp;&nbsp;<a pop ng-href="{{roarevent.mediaUrl || roarevent.media || item.mediaUrl || item.media || collection.mediaUrl || collection.media}}" target=fframe title="{{roarevent.filename || roarevent.file.name || roarevent.name || roarevent.$id}}" date="{{roarevent.date || item.date || collection.date}}"><i class="fa fa-external-link"></i></a></cite></div><iframe uib-collapse=!roarevent.showframe allowfullscreen name=fframe fullscreen={{full}} style=width:100%;height:800px;overflow:scroll; ng-src="{{roarevent.mediaUrl || roarevent.media || \'/llp_core/img/lll3.svg\'}}">{{roarevent.notes}}</iframe><div data-ng-transclude uib-collapse=roarevent.showframe allowfullscreen style=width:100%;height:600px;overflow:scroll;></div></div></div>'),e.put("{widgetsPath}/getphd/src/phd/epubform.html",""),e.put("{widgetsPath}/getphd/src/phd/patentReport.html",'<div class="card card-primary card-block btn-glass drop-target" style="border: 2px dashed blue;margin: 5px;" ng-show=p.showconfig><button class="row btn btn-glass btn-primary img img-rounded" style=width:100%;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:center;flex-direction:row; ng-click="p.showform = !p.showform" ng-class="{\'btn-success\': (main.progress == 100),\'btn-danger\':(main.progress === \'failed\')}"><img src=https://lexlab.firebaseapp.com/img/GoldLion.svg class="img img-rounded pull-right" style=max-height:100px; ng-if=!main.progress></button><div pageslide ps-open=p.showform ps-key-listener=true ps-side=left ps-class="card-dark btn-glass" ps-size=400px style=overflow-x:visible;overflow-y:scroll;><div ng-include="\'/getphdwidget/src/phd/step-3.html\'"></div><hr></div></div><div class="container-fluid card-fancy" style=width:98%;margin:1%;height:98%;overflow:scroll; ng-hide=p.showconfig><div class="col-xs-4 col-sm-3 col-1"><div class=card><img ng-src="{{\'/patents/\'+ (config.PNUM || (config.IPAYEAR + config.IPANUM))+\'/preview\'}}" class="img img-responsive img-shadow" style=height:auto;width:200px;z-index:1000; ng-dblclick="p.showform = !p.showform"><div class=card-block><h2 class="card-title text-NOA">US <strong ng-bind="(patent.id | number:0)||(pubapp.id | published_application)"></strong> <a id={{patent.id}} class="pop text-NOA showonhover fa fa-external-link" ng-href="{{patent.media || pubapp.media}}"></a></h2><table><tbody><tr><td><label>Issued:</label></td><td>{{patent.issued|date}}</td></tr><tr><td><label>USSN</label></td><td>{{patent.application_number | application}}</td></tr><tr><td><label>Filed:</label></td><td>{{patent.dateSubmitted|date}}</td></tr><tr><td><label>Title:</label></td><td>{{patent.title}}</td></tr><tr><td><label>Inventor(s):</label></td><td>{{patent.inventor}}</td></tr><tr><td><label>Original Assignee:</label></td><td>{{patent.assignee}}</td></tr><tr><td><label>Published</label></td><td>{{patent.pub | published_application}} <a class="pop text-NOA showonhover fa fa-external-link" ng-href={{pubapp.media}}></a></td></tr></tbody></table><table ng-bind-html="patent.classifications | trustAsHTML"></table></div></div></div><div class="card col-xs-8 col-sm-9"><div><uib-tabset class="panel panel-default panel-heading" active=p.tabs[0].isActive><uib-tab heading=Abstract><div class="bs-callout bs-callout-reverse bs-callout-NOA"><h4 ng-bind=patent.title>Reprehenderit aute proident cupidatat exercitation officia incididunt culpa ullamco.</h4><p ng-bind=patent.abstract>Culpa enim minim amet proident sunt aliqua ex irure ex sunt eiusmod ut consectetur. Minim esse in tempor reprehenderit esse cupidatat adipisicing ipsum eiusmod. Ea commodo nisi enim esse et ut. Minim laborum irure eiusmod Lorem consequat duis labore deserunt ullamco velit enim ut. Aliquip tempor non amet aliqua cillum sit amet commodo aliqua sint nisi. Fugiat ex irure qui et in qui velit commodo ipsum. Non cupidatat laboris culpa ipsum culpa velit.</p></div></uib-tab><uib-tab><uib-tab-heading>Drawings <label class="label label-pill label-success">{{patent.drawings.length}}</label></uib-tab-heading><div class=showscroll style="margin: 5px 5px;display:flex;flex-wrap:wrap;flex-direction:row;"><a ng-repeat="link in patent.drawings" pop=true ng-href={{link}} class=btn style=margin:2px;><img ng-src={{patent.thumbnails[$index]}} class="img img-shadow"></a></div></uib-tab><uib-tab heading=Description><uib-tab-content style=width:98%;margin:1%;height:98%;overflow:scroll;><p class="card card-block" ng-bind-html="patent.text | trustAsHTML"></p></uib-tab-content></uib-tab><uib-tab select="p.tabs[3].isActive = true" deselect="p.tabs[3].isActive = false"><uib-tab-heading>{{patent.claim_total}}&nbsp;&nbsp;Claims</uib-tab-heading><uib-tab-content class=container-fluid><header>{{patent.pub | published_application}}<label class="label label-pill label-info">{{patent.application_data.claim_total}}</label></header><div class=row><div class=col-md-6><h6>{{patent.id | number:0}}</h6><fieldset class="material PTO"><input ng-model=patent.query id=patterninput><hr><label>{{patent.id | number:0}}</label></fieldset></div></div><div class=row style=perspective:1000px;perspective-origin:50%50%;transformation-style:preserve-3d;><div class=col-sm-6 ng-if=config.IPAYEAR style=transform:scale3d(0.9,0.9,0.9)translateX(-40px);><d3pendingtree patent="{{config.IPAYEAR + config.IPANUM}}" pattern={{patent.query}} tree=leaf style=width:350px;></d3pendingtree><claimtree tree=leaf.claims query=patent.query style=position:absolute;></claimtree></div><div class=col-sm-6 style=transform:scale3d(0.9,0.9,0.9)translateX(-40px);><d3pendingtree patent={{config.PNUM}} pattern={{patent.query}} tree=tree style=width:350px;></d3pendingtree><claimtree tree=tree.claims query=patent.query style=position:absolute;></claimtree></div></div></uib-tab-content></uib-tab><uib-tab heading=Citations><uib-tab-heading>Citations <label class="label label-pill label-warning">{{patent.references.length}}</label></uib-tab-heading><uib-tab-content style=width:98%;margin:1%;height:98%;overflow:scroll;><table id=comp.backward_citations class="card img-shadow card-block table table-condensed table-stripped table-hover table-responsive" style="color:#444 !important;" ng-include=p.linker></table><table id=comp.forward_citations class="card img-shadow card-block table table-condensed table-stripped table-hover table-responsive" style="color:#444 !important;" ng-include=p.linker1></table></uib-tab-content></uib-tab><uib-tab heading=Corrections/Fees/Assignments><table ng-bind-html="patent.legal | highlight: query | trustAsHTML" class="card img-shadow card-block table table-condensed table-stripped table-hover table-responsive" style="color:#444 !important;"></table></uib-tab></uib-tabset></div></div></div>'),e.put("{widgetsPath}/getphd/src/phd/step-1.html",'<div class="panel panel-primary" style=margin:0rem;margin-left:-0.75rem;overflow:visible;><div class="panelhead2 panel-heading btn-primary btn-glass clearfix" style=margin-right:-1rem;border-top-left-radius:0rem;border-bottom-left-radius:0rem;border-top-right-radius:2rem;border-bottom-right-radius:2rem;display:flex;justify-content:flex-start;align-items:center;align-content:center;><div class=pull-right style=display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;align-self:flex-end;><img src=/llp_core/img/GoldLogoLong.svg class=img style=height:25px;> <img src=/llp_core/img/GoldPhdLogoLong.svg class=img style=height:10px;padding-left:2px;></div><img src=/llp_core/img/GoldLion.svg class="img lionlogofilter pull-left" style="width:auto;height: 50px;align-self:flex-start;margin-left:75px;;margin-top:-10px;"></div><div class=panel-body style=height:90vh;overflow:scroll;background-color:rgba(0,0,0,0.75)><blockquote class="bs-callout bs-callout-primary card-header" style=margin:0; ng-hide=response><h6 class=card-title>To get a PatentPhD Report:</h6><p class="text-muted text-left" style=text-align:left;font-size:10px;><ol class="card card-block"><li><label>[FOR US PATENTS]</label> - enter the patent number in the space provided.<br><label>[FOR PUBLISHED US APPLICATIONS]</label> - enter the publication year and application number in the spaces provided.</li><li>Press the <code>LION</code> button.</li></ol>Patents and published applications are provided from <a pop href="https://www.google.com/patents/" uib-tooltip="Google Patents" tooltip-trigger=mouseenter>Google Patents</a>. Prosecution Histories are provided by the <a pop href=http://portal.uspto.gov/pair/PublicPair uib-tooltip="United States Patent & Trademark Office official site" tooltip-trigger=mouseenter>USPTO</a>\'s public data-proxy repositor, <a pop href="http://www.reedtech.com/" uib-tooltip=ReedTech tooltip-trigger=mouseenter>ReedTech</a>.<br>Alternatively, you may download <code>.zip</code> files of prosecution histories directly from <a pop href="http://www.reedtech.com/" uib-tooltip=ReedTech tooltip-trigger=mouseenter>ReedTech</a> or <a pop href="https://www.google.com/patents/" uib-tooltip="Google Patents" tooltip-trigger=mouseenter>Google Patents</a> by pressing the respective buttons below. Downloaded <code>.zip</code> files can then be dropped within the dropzone (marked by the dotted border). <a pop ng-href={{info.video.url}} title={{info.video.title}} uib-tooltip={{info.video.tooltip}} class="fa fa-video">Watch the tutorial</a>.</p></blockquote><blockquote class="bs-callout bs-callout-Applicant card-header" style=margin:0; ng-show=response><h4>{{response.title}} <small class=text-muted>{{response.claim_total}} Claims</small></h4><p class="text-muted text-left" style=text-align:left;font-size:10px;>{{response.abstract}}</p></blockquote><blockquote class="bs-callout bs-callout-NOA card-header" style=text-align:left;margin:0;><h4 class=card-title style=text-align:left;font-size:12px;><label for=patentnumber class="card-text text-muted"><strong>Enter US Patent Number</strong></label></h4><div class=row style=align-content:center;><fieldset class="material Applicant" style="box-shadow:inset 0 0 10px rgba(0,0,0,0.5)"><input type=number placeholder="Patent #" ng-model=config.PNUM ng-blur=main.remoteconfig(config.PNUM)><hr><label>Enter a Patent Number</label></fieldset><a class=pull-right tooltip-trigger=mouseenter uib-tooltip="Download Patent" ng-click=main.getpatentdownload(config.PNUM);><span class="text-NOA fa fa-2x fa-download"></span></a></div></blockquote><blockquote class="bs-callout bs-callout-Petition card-header" style=text-align:left;margin:0;><h4 class=card-title style=text-align:left;font-size:12px;><label for=publishedapplication class="card-text text-muted"><strong>Enter Year of Publication and Published Application Number</strong></label></h4><div class=row style="align-content:center;box-shadow:inset 0 0 10px rgba(0,0,0,0.5)"><fieldset class="material Petition"><input type=text placeholder=YYYY ng-model=config.IPAYEAR maxlength=4><hr><label>Enter YYYY</label></fieldset><fieldset class="material Petition"><input type=text placeholder=# ng-model=config.IPANUM ng-blur=main.remoteconfig(config.IPAYEAR+config.IPANUM)><hr><label>Enter Published Application Number</label></fieldset><a class=pull-right ng-click="main.getpublishedapplication(config.IPAYEAR, config.IPANUM)"><span class="text-warning fa fa-download fa-2x"></span></a></div></blockquote><blockquote class="bs-callout bs-callout-PTO card-header" style=text-align:left;margin:0;><h4 class=card-title style=text-align:left;font-size:12px;><label class="card-text text-muted">Enter US Application Serial Number</label></h4><div class=row style=align-content:center;><fieldset class="material PTO" style="box-shadow:inset 0 0 10px rgba(0,0,0,0.5)"><input type=text placeholder="Application #" ng-model=config.appnum><hr><label>Enter Application Number</label></fieldset><button class="btn btn-default" ng-click="main.toggle();main.remotezip(config.appnum, \'reedtech\');" uib-tooltip="TRY AUTO DOWNLOAD **experimental" tooltip-placement=right title="TRY REEDTECH AUTO DOWNLOAD* (**experimental**)" tooltip-animation=true style=width:35px;height:35px;padding:0;><img src=/llp_core/img/GoldLion.svg style=width:35px;height:35px;filter:sepia(0.5); ng-hide=hider><span id=reedtechbutton class="reedtechbutton fa fa-2x text-PTO"></span></button> <button class="btn btn-default fa fa-google" ng-click="main.toggle();main.remotezip(config.appnum, \'google\');" uib-tooltip="TRY GOOGLE AUTO DOWNLOAD **experimental" tooltip-placement=right title="TRY AUTO DOWNLOAD* (**experimental**)" tooltip-animation=true style=width:35px;height:35px;padding:0;><span id=googlebutton class="text-PTO fa fa-2x fa-google googlebutton"></span></button></div><div class=row style=align-content:center;><button class="btn btn-default right text-PTO" ng-click=winreed() uib-tooltip="DOWNLOAD FROM REEDTECH" tooltip-placement=right title="DOWNLOAD FILE HISTORY FROM REEDTECH" tooltip-animation=true><span id=reedtechbutton class="fa fa-2x text-PTO reedtechbutton"></span> ReedTech</button> <button class="btn btn-default right text-PTO" ng-click=wingoog() uib-tooltip="DOWNLOAD FROM GOOGLE" tooltip-placement=right title="DOWNLOAD FILE HISTORY FROM GOOGLE" tooltip-animation=true><span id=googlebutton class="googlebutton text-PTO fa fa-2x"></span> Google</button></div></blockquote></div></div>'),
e.put("{widgetsPath}/getphd/src/phd/step-2.html",'<div class="card card-warning" style=margin:0.5rem;><div class=card-header><h6 class=card-title>+PhD Step 2 - Download Image File Wrapper</h6></div><div class=card-text><input type=text placeholder="Application #" ng-model=config.appnum><div class=row><a class="btn btn-warning fa fa-download" href=https://storage.googleapis.com/uspto-pair/applications/{{config.appnum}}.zip target=_blank data-toggle=popover data-placement=bottom title="DOWNLOAD FROM GOOGLE" data-content data-animation=true data-trigger=hover style=color:white; onclick="window.open(this.href, \'\', \'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=300,top=150\'); return false;" ng-click="main.remotezip(config.appnum, this.href)">from Google</a> <a class="btn btn-warning fa fa-download" href=https://patents.reedtech.com/downloads/pairdownload/{{config.appnum}}.zip target=_blank data-toggle=popover data-placement=bottom title="DOWNLOAD FROM REEDTECH" data-content data-animation=true data-trigger=hover style=color:white; onclick="window.open(this.href, \'\', \'resizable=no,status=no,location=no,toolbar=no,menubar=no,fullscreen=no,scrollbars=no,dependent=yes,width=400,left=150,height=300,top=150\'); return false;" ng-click="main.remotezip(config.appnum, this.href)">from ReedTech</a></div></div></div>'),e.put("{widgetsPath}/getphd/src/phd/step-3.html",'<div class=card-block style="display:flex;flex-flow:column nowrap;justify-content:space-around;align-items:center;align-content:center;"><blockquote class="card-header bs-callout bs-callout-NOA img-shadow" style=text-align:left;margin:1.5vmin;><h4 class=card-title style=text-align:left;font-size:12px;><label for=patentnumber class="card-text text-muted"><strong>Enter US Patent Number</strong></label></h4><fieldset class="material Applicant" style=max-width:80%;><input type=text placeholder="Patent #" ng-model-options="{updateOn:\'default blur\',debounce:{\'default\':1000,\'blur\':0}}" ng-blur=p.remoteconfig(config.PNUM);cupdate(config); ng-model=config.PNUM><hr><label>Enter a Patent Number</label></fieldset><button class="input-group-addon btn btn-default right" tooltip-trigger=mouseenter uib-tooltip="Download Patent" ng-click=p.getnew(config.PNUM); ng-dblclick=p.getload(config.PNUM)><span class="text-success fa fa-5x fa-download"></span></button></blockquote><blockquote class="card-header bs-callout bs-callout-Petition img-shadow" style=text-align:left;margin:1.5vmin;><h4 class=card-title style=text-align:left;font-size:12px;><label for=publishedapplication class="card-text text-muted"><strong>Enter Year of Publication and Published Application Number</strong></label></h4><div class=input-group><fieldset class="material Petition" style=max-width:33%;><input type=text placeholder=YYYY ng-model=config.IPAYEAR maxlength=4><hr><label>YEAR</label></fieldset><fieldset class="material Petition" style=max-width:50%;><input type=text placeholder="# PA" ng-model=config.IPANUM ng-blur=cupdate(config)><hr><label>NUMBER</label></fieldset><button class="input-group-addon btn btn-default" ng-click=cupdate(config);p.getdata(config.IPAYEAR+config.IPANUM)><span class="text-warning fa fa-download fa-5x"></span></button></div></blockquote></div>'),e.put("{widgetsPath}/getphd/src/roarevent/roarchip-popover.html",'<div class="row flex-row card"><img class="img img-thumbnail img-shadow img-responsive" ng-src="{{roarevent.thumbnail || item.thumbnail || collection.thumbnail || \'https://placehold.it/150x150/000/ffa&text=\' + roarevent.rid}}" width=150px height=150px><div class="bs-callout bs-callout-reverse bs-callout-{{roarevent.styleClass||item.styleClass}}"><h4>{{roarevent.title||item.title}}</h4><p ng-bind=roarevent.description||item.description></p><p ng-if=roardate>Dated {{roarevent.date||item.date | date }}</p><cite class="pull-right clearfix">{{roarevent.filename || item.filename || roarevent.file.name || item.file.name || roarevent.name || item.name }}&nbsp;&nbsp;<a pop ng-href="{{roarevent.mediaUrl || roarevent.media || item.mediaUrl || item.media || collection.mediaUrl || collection.media}}" target=fframe title="{{roarevent.filename || roarevent.file.name || roarevent.name || roarevent.$id}}" date="{{roarevent.date || item.date || collection.date}}"><i class="fa fa-external-link"></i></a></cite></div></div>'),e.put("{widgetsPath}/getphd/src/roarevent/roarchip.html",'<div ng-class="{\'active\': roarevent.isSelected || item.isSelected}" class="animated roarchip" data-context-menu=/llp_core/partials/contextmenus/roarcontextmenu.html data-toggle=popover uib-popover-template="\'{widgetsPath}/getphd/src/roarevent/roarchip-popover.html\'" popover-placement=right popover-animation=true popover-trigger=mouseenter popover-append-to-body=true><button class="rlabel btn-{{roarevent.styleClass || item.styleClass || \'btn-glass btn-dark\'}} fa fa-{{roarevent.icon || item.icon}} pull-left" ng-href="{{roarevent.mediaUrl || item.mediaUrl || roarevent.media || item.media || \'/files/uploads/\'+roarevent.$id+\'.html\'}}" ng-click=roar.show(roarevent.$id||item.$id) ng-dblclick=roar.openFullscreen(roarevent||item) dynamic-background background-image={{roarevent.thumbnail||item.thumbnail}} width=60px style="max-width:60px;width:60px;height:60px;max-height:60px;margin: 2.5px;" uib-tooltip="open media" tooltip-animation=true tooltip-position=right>{{roarevent.rid || item.rid}}</button><h6 class=rflag ng-href=/files/uploads/{{roarevent.$id||item.$id}}.html ng-click=roar.present(roarevent||item) ng-dblclick=roar.openFullscreen(roarevent||item) uib-tooltip="open LEXPAD" tooltip-animation=true tooltip-position=right><strong>{{roarevent.title || item.title || roarevent.name || item.name}}</strong></h6><cite class=pull-right style=position:absolute;right:0.3rem;bottom:0.1rem;font-size:12px;>{{roarevent.date||item.date | date}}</cite><ng-transclude style=position:absolute;right:0.3rem;></ng-transclude></div>'),e.put("{widgetsPath}/getphd/src/roarevent/roarevent.html",'<div id={{roarevent.$id}} ng-class="{\'active\': roarevent.isSelected}" class="_info animated staggered slideLeft" style=margin:2.5px;><div class=flex-top-row><button ng-href={{roarevent.mediaUrl}} ng-click=roar.show(roarevent) class=rbutton issaclin-class="{\'active\': roarevent.isSelected}">{{roarevent.rid}}</button><h6 class=rflag data-context-menu=/llp_core/partials/contextmenus/roarcontextmenu.html><strong>{{roarevent.title}}</strong><br></h6><div class="panel r-action" layout=column layout-align="space-between center" style=border-radius:5px;><button clipboard text=roarevent.media on-copied="toastr.success(\'copied!\');" on-error="toastr.error(err,\'uh oh!\')" class="rmodal fa {{roarevent.statusIcon || roarevent.icon || \'fa-bars\'}} {{roarevent.statusIconStyle}}" uib-tooltip="copy media url" tooltip-trigger=mouseenter tooltip-placement=right style=background-color:transparent;border-width:0px;></button> <button id=empiretogglebutton ng-class="{\'btn-warning fa-futbol-o\': roarevent.isSelected == false,\'btn-flat fa-minus\': roarevent.isSelected == null, \'btn-success fa-ge\': roarevent.isSelected == true}" class="fade btn btn-default btn-xs fa r-doc" ng-click=roar.toggleSelection(roarevent,$scope.$parent.$parent.collection)></button> <button class="fade btn btn-default btn-xs fa fa-copy r-doc" ng-click=roar.copytoclipboard(roarevent) uib-tooltip="copy to clipboard" tooltip-trigger=mouseenter tooltip-placement=left></button> <button class="fade btn btn-default btn-xs fa fa-chevron-left text-primary" ng-click=roar.moveLeft(roarevent) uib-tooltip="move left" tooltip-trigger=mouseenter tooltip-placement=left></button> <button class="fade btn btn-default btn-xs fa fa-chevron-right text-primary" ng-click=roar.moveRight(roarevent) uib-tooltip="move right" tooltip-trigger=mouseenter tooltip-placement=left></button> <button class="fade btn btn-default btn-xs fa fa-remove r-delete" ng-click=roar.movetorecyclebin(roarevent) uib-tooltip=remove tooltip-trigger=mouseenter tooltip-placement=left></button></div></div><button class="rlabel btn-{{roarevent.styleClass || \'dark btn-glass\'}}" ng-href=/files/uploads/{{roarevent.$id}}.html ng-click=roar.present(roarevent) ng-dblclick="roarevent.thumbnail | roarevent.mediaUrl" style=border-width:3px; dynamic-background background-image={{roarevent.thumbnail}} background-size=contain><p class=cut-with-dots style=max-height:10vh>{{roarevent.description}}</p></button><ng-transclude style=z-index:100><uib-rating ng-model=roarevent.rate max=max rating-states=ratingStates read-only=true on-hover=hoveringOver(value) on-leave="overStar = null" titles="[\'added\',\'ocred\',\'parsed\',\'tagged\',\'done\']" aria-labelledby=default-rating class=showonhover ng-class="{\'text-danger\': (roarevent.rate == 1),\'text-warning\':(roarevent.rate == 2),\'text-info\':(roarevent.rate == 3),\'text-primary\':(roarevent.rate == 4),\'text-success\':(roarevent.rate == 5)}"><span class=label ng-class="{\'label-warning\': percent<30, \'label-info\': percent>=30 && percent<70, \'label-success\': percent>=70}" < uib-rating>ng-show="overStar && !isReadonly">{{percent}}%</span></uib-rating></ng-transclude></div>')}]),a.directive("roareventsA",["ROARevents","ROARevent","Collection","filepickerService","$roarevent","$filter","Collections","toastr","bytesFilter","ckstarter","ckender","$http","$stateParams","$rootScope",function(e,t,a,l,i,o,n,r,s,c,d,p,u,g){return{restrict:"A",scope:!1,link:function(e,i,o,n){var f=o.roarevents,h=[];a(f).$loaded().then(function(a){angular.forEach(a.roarlist,function(e,a){var l=t(e);h.push(l)}),e.roarevents=h}),e.sortList={accept:function(e,t){return!0},itemMoved:function(e){var t,a;t=function(){},a=function(){e.dest.sortableScope.removeItem(e.dest.index),e.source.itemScope.sortableScope.insertItem(e.source.index,e.source.itemScope.task)}},orderChanged:function(t){angular.forEach(t.dest.sortableScope.modelValue,function(e,t){e.sortOrder=t,e.$save()}),e.roarevents=t.dest.sortableScope.modelValue}},e.clearAll=function(e){angular.forEach(e,function(e,t){e.$ref().child("isSelected").set(!1)})},e.selectAll=function(e){angular.forEach(e,function(e,t){e.$ref().child("isSelected").set(!0)})},e.addToCollection=function(e,t){angular.forEach(e,function(e,a){1==e.isSelected&&(angular.forEach(e.roarlist,function(e,a){t.$ref().child("roarlist").child(a).set(a),firebase.database().ref().child("matters").child(u.matterId).child("roarlist").child(a).set(a),firebase.database().ref().child("matters").child(u.matterId).child("projects").child(u.pId).child("roarlist").child(a).set(a)}),console.log(e.$id),r.info(e.$id))})},e.createSubcollection=function(e,t){var l=new Date,i=l.getTime();firebase.database().ref().child("matters").child(u.matterId).child("roarlist").child(i).set(i),firebase.database().ref().child("matters").child(u.matterId).child("projects").child(u.pId).child("roarlist").child(i).set(i);a(i).$loaded().then(function(a){a.title="new collection",a.styleClass="PTO",a.id=i,a.ownerid=g.authData.uid,a.matterid={},a.matterid[u.matterId]=u.matterId,a.rows=[{columns:[{styleClass:"col-sm-12",widgets:[{styleClass:"card",type:"pagebuilder",config:{id:i,url:"/llp_core/modules/roarmap/directive/roargrid/roargrid.html"}}]}]}],a.thumbnail="/llp_core/img/GoldLion.svg",a.mediaUrl="/llp_core/img/GoldLion.svg",a.$save(),t.roarlist[i]=i,t.$save(),angular.forEach(e,function(e,t){1==e.isSelected&&(a.$ref().child("roarlist").child(e.$id).set(e.$id),console.log(e.$id),r.info(e.$id))})})},e.pickMulti=function(){l.pickMultiple({storeTo:{location:"s3"},services:["BOX","COMPUTER","DROPBOX","EVERNOTE","FACEBOOK","GMAIL","IMAGE_SEARCH","FLICKR","FTP","GITHUB","GOOGLE_DRIVE","SKYDRIVE","PICASA","URL","WEBCAM","INSTAGRAM","VIDEO","ALFRESCO","CUSTOMSOURCE","CLOUDDRIVE","IMGUR","CLOUDAPP","CONVERT","AUDIO"]},function(t){angular.forEach(t,function(e,t){console.log(t,JSON.stringify(e))}),console.log(JSON.stringify(t));var a=t;e.uploadtocollection(a,e.collection)},function(e){console.log(JSON.stringify(e))})},e.uploadtocollection=function(t,l){if(angular.isArray(t)){var i=(new RegExp("^[0-9]{8}-[0-9]{4}-[0-9]{2}-[0-9]{2}-[0-9]{5}-"),t),o=[];angular.forEach(l.roarlist,function(e,t){o.push(t)}),angular.forEach(i,function(t,l){var n=t.name||t.filename,f=t;p({method:"POST",url:"/roar/api/shorten",data:{url:t.url}}).then(function(p){var h=new Date,m=h.getTime()+o.length;console.log(p),f.mediaUrl=p.data.shortUrl,f.thumbnail=p.data.shortUrl,f.content=c+'<doc-header class="card img-shadow" roarid="'+m+'" collection="'+m+'"><img class="img img-responsive img-shadow" ng-src="{{collection.mediaUrl}}"/><div ng-bind-html="collection.notes"></div><p>Insert Text Here</p></doc-header>'+d,f.title=n,f.name=n,f.key=t.key||n,f.description=t.id+" of "+i.length+" ("+s(t.size)+")",f.collectionId=e.collection.$id,f.parentId=e.collection.$id,f.ownerid=g.authData.uid,f.matterid={},f.matterid[u.matterId]=u.matterId,f.rid="-",f.file=t;var b=new Date,v=b.getTime();f.date=v,f.rows=[{columns:[{cid:v+9,styleClass:"col-sm-6",widgets:[{config:{height:"90vh",url:f.media||""},styleClass:f.styleClass||"btn-dark",title:"LexFrame",type:"iframe",wid:v+100}]},{cid:v+10,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE",height:"90vh"},styleClass:f.styleClass||"btn-dark",title:"LexPad",type:"ckwidget",wid:v+1010},{config:{id:"PROMISE",height:"90vh"},styleClass:f.styleClass||"btn-dark",title:"Metadata",type:"metadata",wid:v+101},{config:{id:"PROMISE",height:"90vh"},styleClass:f.styleClass||"btn-dark",title:"Text",type:"text",wid:v+105}]}]}],f.structure="6-6";var y=a(m).$ref();y.set(f,function(t){var i=m;console.log(o.length+" added record with id "+i,l),alertify.success(o.length+" added record with id"+i,l),o.push(i);var n=a(e.collection.id).$ref();if(n.child("roarlist").child(i).set(i),firebase.database().ref().child("matters").child(u.matterId).child("roarlist").child(i).set(i),firebase.database().ref().child("matters").child(u.matterId).child("projects").child(u.pId).child("roarlist").child(i).set(i),y.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(i),y.child("rows").child("0").child("columns").child("1").child("widgets").child("1").child("config").child("id").set(i),y.child("rows").child("0").child("columns").child("1").child("widgets").child("2").child("config").child("id").set(i),y.update({id:i,parentId:e.collection.$id,time:firebase.database.ServerValue.TIMESTAMP,rid:o.length}),console.log(o.length+" added record with id "+i,l),r.success(o.length+" added record with id "+i,l),angular.isUndefined(e.collection.roarlist)){var s=[];angular.extend(e.collection,{roarlist:s}),e.collection.roarlist.push(i),y.update({id:i,parentId:e.collection.$id,time:firebase.database.ServerValue.TIMESTAMP,rid:e.collection.roarlist.length})}else e.collection.roarlist.push(i),y.update({id:i,parentId:e.collection.$id,time:firebase.database.ServerValue.TIMESTAMP,rid:e.collection.roarlist.length});alertify.log("id: "+i+" collectionId: "+e.collection.$id)})},function(p){console.log(p),f.mediaUrl=t.url,f.media=p.data.shortUrl,f.thumbnail=p.data.shortUrl,f.content=c+'<doc-header class="card img-shadow" roarid="'+v+'" collection="'+v+'"><img class="img img-responsive img-shadow" ng-src="{{collection.mediaUrl}}"/><div ng-bind-html="collection.notes"></div><p>Insert Text Here</p></doc-header>'+d,f.title=n,f.name=n,f.key=t.key||n,f.description=t.id+" of "+i.length+" ("+s(t.size)+")",f.collectionId=e.collection.$id,f.parentId=e.collection.$id,f.ownerid=g.authData.uid,f.matterid={},f.matterid[u.matterId]=u.matterId,f.rid="-",f.file=t;var h=new Date,m=h.getTime();f.date=m,f.rows=[{columns:[{cid:m+9,styleClass:"col-sm-6",widgets:[{config:{height:"90vh",url:f.media||""},styleClass:f.styleClass||"btn-dark",title:"LexFrame",type:"iframe",wid:m+100}]},{cid:m+10,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE",height:"90vh"},styleClass:f.styleClass||"btn-dark",title:"LexPad",type:"ckwidget",wid:m+1010},{config:{id:"PROMISE",height:"90vh"},styleClass:f.styleClass||"btn-dark",title:"Metadata",type:"metadata",wid:m+101},{config:{id:"PROMISE",height:"90vh"},styleClass:f.styleClass||"btn-dark",title:"Text",type:"text",wid:m+105}]}]}],f.structure="6-6";var b=new Date,v=b.getTime()+o.length,y=a(v).$ref();y.set(f,function(t){var i=v;console.log(o.length+" added record with id "+i,l),alertify.success(o.length+" added record with id"+i,l),o.push(i);var n=a(e.collection.id).$ref();if(n.child("roarlist").child(i).set(i),firebase.database().ref().child("matters").child(u.matterId).child("roarlist").child(i).set(i),firebase.database().ref().child("matters").child(u.matterId).child("projects").child(u.pId).child("roarlist").child(i).set(i),y.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(i),y.child("rows").child("0").child("columns").child("1").child("widgets").child("1").child("config").child("id").set(i),y.child("rows").child("0").child("columns").child("1").child("widgets").child("2").child("config").child("id").set(i),y.update({id:i,parentId:e.collection.$id,time:firebase.database.ServerValue.TIMESTAMP,rid:o.length}),console.log(o.length+" added record with id "+i,l),r.success(o.length+" added record with id "+i,l),angular.isUndefined(e.collection.roarlist)){var s=[];angular.extend(e.collection,{roarlist:s}),e.collection.roarlist.push(i),y.update({id:i,parentId:e.collection.$id,time:firebase.database.ServerValue.TIMESTAMP,rid:e.collection.roarlist.length})}else e.collection.roarlist.push(i),y.update({id:i,parentId:e.collection.$id,time:firebase.database.ServerValue.TIMESTAMP,rid:e.collection.roarlist.length});alertify.log("id: "+i+" collectionId: "+e.collection.$id)})})})}else{var n=[];n.push(t),e.uploadtocollection(n,e.collection)}}}}}]).factory("$roarA",["$http","$stateParams","$rootScope","ckstarter","ckender","Collection","bytesFilter",function(e,t,a,l,i,o,n){return function(r){var s=r.name||r.filename,c=[],d={url:"/files/uploads/"+r.name};e({method:"POST",url:"/roar/api/shorten",data:{url:d.url}}).then(function(e){var p=new Date,u=p.getTime()+c.length;console.log(e),d.mediaUrl=e.data.shortUrl,d.thumbnail=e.data.shortUrl,d.content=l+'<doc-header class="card img-shadow" roarid="'+u+'" collection="'+u+'"><img class="img img-responsive img-shadow" ng-src="{{collection.mediaUrl}}"/><div ng-bind-html="collection.notes"></div><p>Insert Text Here</p></doc-header>'+i,d.title=s,d.name=s,d.key=r.key||r.name||"",d.description=r.id+" of "+c.length+" ("+n(r.size)+")",d.ownerid=a.authData.uid,d.matterid={},d.matterid[t.matterId]=t.matterId,d.rid="-",d.file=r;var g=new Date,f=g.getTime();d.date=f,d.rows=[{columns:[{cid:f+9,styleClass:"col-sm-6",widgets:[{config:{height:"90vh",url:d.media||""},styleClass:d.styleClass||"btn-dark",title:"LexFrame",type:"iframe",wid:f+100}]},{cid:f+10,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE",height:"90vh"},styleClass:d.styleClass||"btn-dark",title:"LexPad",type:"ckwidget",wid:f+1010},{config:{id:"PROMISE",height:"90vh"},styleClass:d.styleClass||"btn-dark",title:"Metadata",type:"metadata",wid:f+101},{config:{id:"PROMISE",height:"90vh"},styleClass:d.styleClass||"btn-dark",title:"Text",type:"text",wid:f+105}]}]}],d.structure="6-6";var h=o(u).$ref();h.set(d,function(e){var a=u;if(console.log(c.length+" added record with id "+a),alertify.success(c.length+" added record with id"+a),c.push(a),firebase.database().ref().child("matters").child(t.matterId).child("roarlist").child(a).set(a),firebase.database().ref().child("matters").child(t.matterId).child("projects").child(t.pId).child("roarlist").child(a).set(a),h.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(a),h.child("rows").child("0").child("columns").child("1").child("widgets").child("1").child("config").child("id").set(a),h.child("rows").child("0").child("columns").child("1").child("widgets").child("2").child("config").child("id").set(a),h.update({id:a,time:firebase.database.ServerValue.TIMESTAMP,rid:c.length}),console.log(c.length+" added record with id "+a),toastr.success(c.length+" added record with id "+a),angular.isUndefined($scope.collection.roarlist)){var l=[];angular.extend($scope.collection,{roarlist:l}),h.update({id:a,time:firebase.database.ServerValue.TIMESTAMP})}else h.update({id:a,time:firebase.database.ServerValue.TIMESTAMP});alertify.log("id: "+a+" collectionId: "+$scope.collection.$id)})},function(e){console.log(e),d.media=r.url,d.mediaUrl=e.data.shortUrl,d.thumbnail=e.data.shortUrl,d.content=l+'<doc-header class="card img-shadow" roarid="'+f+'" collection="'+f+'"><img class="img img-responsive img-shadow" ng-src="{{collection.mediaUrl}}"/><div ng-bind-html="collection.notes"></div><p>Insert Text Here</p></doc-header>'+i,d.title=s,d.name=s,d.key=r.key||s,d.description=r.id+" of "+files3.length+" ("+n(r.size)+")",d.ownerid=a.authData.uid,d.matterid={},d.matterid[t.matterId]=t.matterId,d.rid="-",d.file=r;var p=new Date,u=p.getTime();d.date=u,d.rows=[{columns:[{cid:u+9,styleClass:"col-sm-6",widgets:[{config:{height:"90vh",url:d.media||""},styleClass:d.styleClass||"btn-dark",title:"LexFrame",type:"iframe",wid:u+100}]},{cid:u+10,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE",height:"90vh"},styleClass:d.styleClass||"btn-dark",title:"LexPad",type:"ckwidget",wid:u+1010},{config:{id:"PROMISE",height:"90vh"},styleClass:d.styleClass||"btn-dark",title:"Metadata",type:"metadata",wid:u+101},{config:{id:"PROMISE",height:"90vh"},styleClass:d.styleClass||"btn-dark",title:"Text",type:"text",wid:u+105}]}]}],d.structure="6-6";var g=new Date,f=g.getTime()+c.length,h=o(f).$ref();h.set(d,function(e){var a=f;if(console.log(c.length+" added record with id "+a,key),alertify.success(c.length+" added record with id"+a,key),c.push(a),firebase.database().ref().child("matters").child(t.matterId).child("roarlist").child(a).set(a),firebase.database().ref().child("matters").child(t.matterId).child("projects").child(t.pId).child("roarlist").child(a).set(a),h.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(a),h.child("rows").child("0").child("columns").child("1").child("widgets").child("1").child("config").child("id").set(a),h.child("rows").child("0").child("columns").child("1").child("widgets").child("2").child("config").child("id").set(a),h.update({id:a,time:firebase.database.ServerValue.TIMESTAMP,rid:c.length}),console.log(c.length+" added record with id "+a,key),toastr.success(c.length+" added record with id "+a,key),angular.isUndefined($scope.collection.roarlist)){var l=[];angular.extend($scope.collection,{roarlist:l}),h.update({id:a,time:firebase.database.ServerValue.TIMESTAMP})}else h.update({id:a,time:firebase.database.ServerValue.TIMESTAMP});alertify.log("id: "+a+" collectionId: "+$scope.collection.$id)})})}}]).directive("roarevtA",["$http","$rootScope","$compile","$controller","$document","$animate",function(e,t,a,l,i,o){return{restrict:"E",transclude:!0,templateUrl:"/llp_core/modules/roarmap/directive/roarevent/roarevent.html",scope:{roarevent:"="},controller:"ROARevtCtrl",bindToController:!0,controllerAs:"roar",link:function(e,t,a,l){t.on("mouseenter",function(){o.addClass(t,"active")}),t.on("mouseleave",function(){o.removeClass(t,"active")})}}}]).directive("roarEventA",["$http","Popup","$rootScope","$compile","$controller","$document","$animate","ROARevent","Collection",function(e,t,a,l,i,o,n,r,s){return{restrict:"EA",transclude:!0,templateUrl:"/llp_core/modules/roarmap/directive/roarevent/roarevent.html",scope:{animation:"=?",editable:"=?",hovered:"=?"},controller:"ROARChipCtrl",bindToController:!0,controllerAs:"roar",link:function(e,t,a,l){var i=a.id,o=r(i);o.$bindTo(e,"roarevent"),t.on("mouseenter",function(){n.addClass(t,"active"),angular.element(t).addClass("active")}),t.on("mouseleave",function(){n.removeClass(t,"active"),angular.element(t).removeClass("active")})}}}]).directive("roarChipA",["$http","Popup","$rootScope","$compile","$controller","$document","$animate","ROARevent","ngDialog","Collection",function(e,t,a,l,i,o,n,r,s,c){return{restrict:"EA",templateUrl:"{widgetsPath}/getphd/src/roarevent/roarchip.html",transclude:!0,controller:"ROARChipCtrl",controllerAs:"roar",bindToController:!0,scope:{},link:function(e,t,a,l){var i=a.id;c(i).$loaded().then(function(t){e.roarevent=t,e.item=t});var i=a.id,o=r(i);o.$bindTo(e,"roarevent"),t.on("mouseenter",function(){n.addClass(t,"active")}),t.on("mouseleave",function(){n.removeClass(t,"active")})}}}]).controller("ROARevtCtrlA",["$compile","$templateCache","$scope","pdfToPlainText","$http","ckstarter","ckender","Popup",function(t,a,l,i,o,n,r,s){var c=this;l.roarevent=l.$parent.roarevent,c.present=function(i){o.get(i.ocrmedia).then(function(o){console.log(o.data),i.plaintext=o.data;var s=n,c="https://placehold.it/250x208/4682b4/fff/&text="+i.rid,d=r,p=("http://localhost:3000/patents/US"+$("roargrid").attr("patent"),'<div class="container-fluid two-col-right"><div class="row"><div id="col-xs-9" class="col-xs-9" ><div class="bs-callout bs-callout-Applicant"><h4>'+i.title+"</h4><p>Filed</p><cite>"+i.filename+'&nbsp;&nbsp;<a href="'+i.media+'" target="fframe"><i class="fa fa-external-link"></i></a></cite>'+i.plaintext+'</div></div><div id="col-xs-3" class="col-xs-3"  onmouseenter="$(\'#col-xs-9\').toggleClass(\'col-xs-9 col-xs-3\');$(\'#col-xs-3\').toggleClass(\'col-xs-9 col-xs-3\')"><p><iframe name="fframe" src="/patents/8382456" class="img img-responsive img-shadow" style="background-image:url('+c+');"></iframe></p></div><script src="/lexlab-starter/public/jQuery-Plugin-For-Auto-Resizing-iFrame-iFrame-Resizer/js/iframeResizer.min.js"></script></div></div><p>&nbsp;</p>');i.content=s+p+d;var u=angular.element("<div/>").attr("class","issuedocpanel  stacker").css({"z-index":"10000"}),g=a.get("{widgetsPath}/getphd/src/titleTemplate.html"),f=angular.element('<iframe class="" style="width:100%;height:100%;z-index:0;"/>').attr("src",e.URL.createObjectURL(new Blob([i.content],{name:"roarevent.html",type:"text/html"})));angular.element("body").append(t(u.append(g).append(f))(l)),$(".issuedocpanel").draggable({stack:".stacker",handle:"h4"}).resizable()})}}]).controller("ROARChipCtrlA",["$aside","toastr","$uibModal","$compile","Collection","$scope","$templateCache","ngDialog","$ACTIVEROAR","$window","$rootScope","PROJECT","$stateParams","$sce","Fullscreen","$clipboard","ROARevents","$http",function(e,t,a,l,i,o,n,r,s,c,d,p,u,g,f,h,m,b){var v=this;o.max=5,o.hoveringOver=function(e){o.overStar=e,o.percent=100*(e/o.max)},o.ratingStates=[{stateOn:"glyphicon-ok",stateOff:"glyphicon-unchecked"},{stateOn:"glyphicon-font",stateOff:"glyphicon-unchecked"},{stateOn:"glyphicon-duplicate",stateOff:"glyphicon-unchecked"},{stateOn:"glyphicon-tags",stateOff:"glyphicon-unchecked"},{stateOn:"glyphicon-ok",stateOff:"glyphicon-unchecked"}],o.openpreview=function(e){c.htmltoload=e.content,c.open("javascript:void( (function(){document.open();document.write(window.opener.htmltoload);document.close();window.opener.htmltoload = null;})() )",null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width=700,height=700")},o.remove=function(){$(this).parent().parent().remove()},o.alert=function(e){alertify.alert(e),v.newnoteonroar(o.roarevent)},o.openFullScreen=function(e){o.full!==!0?($(".issuedocpanel").css({position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",width:"100%","z-index":"100000",transition:"all 0.5s ease-out"}),$(".fa-expand").addClass("fa-compress").removeClass("fa-expand"),o.full=!0):($(".issuedocpanel").css({position:"absolute",top:"6rem",left:"10rem",bottom:null,right:null,width:"initial","z-index":"9999",transition:"all 0.5s ease-out"}),$(".fa-compress").addClass("fa-expand").removeClass("fa-compress"),o.fullscreen=!1)},o.edit=function(){v.copytoclipboard(o.roarevent)},o.$window=c,o.close=function(){r.closeThisDialog()},o.saveDraft=function(e){angular.isUndefined(o.roarevent.notes)?(o.roarevent.notes=[],o.roarevent.notes.push(e)):o.roarevent.notes.push(e),o.closeThisDialog()},v.newnoteonroar=function(t){e.open({templateUrl:"/llp_core/partials/statusboard/partials/newCard.html",controller:"ROARChipCtrl",placement:"top",size:"lg"})},v.show=function(e){i(e.$id||e).$ref();i(e.$id||e).$loaded().then(function(e){if("html"!==e.document_type){var t=angular.element("<div/>").attr("id",e.id||e.$id).attr("class","issuedocpanel panel panel-{{roarevent.styleClass || 'default'}} stacker ").css({"z-index":"10000",width:"45vw",margin:"10px",height:"90vh"}),a=n.get("{widgetsPath}/getphd/src/titleTemplate.html"),i=angular.element('<iframe allowfullscreen  fullscreen="{{full}}" uib-collapse="isCollapsed" name="fframe"/>').attr("id",e.id||e.$id).attr("height","90vh").attr("width","100%").attr("src",e.mediaUrl||e.media||e.thumbnail||"https://placehold.it/500x500/000/ffa&text=X").attr("class","panel-body");angular.element("body").append(l(t.append(a).append(i))(o)),$(t).draggable({stack:".stacker",handle:"h4"}).resizable(),interact(t,{ignoreFrom:".card"}).draggable().on("doubletap",function(e){e.currentTarget.remove(),e.preventDefault()})}})},v.present=function(e){var t=(i(e.$id).$ref(),angular.element("<div/>").attr("id",e.id||e.$id).attr("class","issuedocpanel panel panel-{{roarevent.styleClass || 'default'}} stacker").css({"z-index":"100000",width:"45vw",margin:"10px",height:"90vh"})),a=n.get("{widgetsPath}/getphd/src/titleTemplate.html"),r=angular.element('<iframe allowfullscreen fullscreen="{{full}}" uib-collapse="isCollapsed" class="panel-body" style="width:100%;height:600px;z-index:0;" ng-attr-srcdoc="{{roarevent.content || collection.content || \'<p>Nothing to see here</p>\' | trustAsHTML}}"  name="fframe"/>').attr("id",e.id||e.$id);angular.element("body").append(l(t.append(a).append(r))(o)),$(t).draggable({scroll:!0,cursor:"move",stack:".stacker",handle:"h4"}).resizable(),interact(t,{ignoreFrom:".card"}).draggable().on("doubletap",function(e){e.currentTarget.remove(),e.preventDefault()})},v.copytoclipboard=function(e){h().$add(e.id||e).then(function(e){t.info("COPY TO CLIPBOARD")})},o.$on("adfWidgetAdded",function(e,t,a,l){l.titleTemplateUrl="{widgetsPath}/testwidget/src/title.html",l.styleClass=a.styleClass||"panel-dark",l.frameless=!1,l.reload=!0,a.config.id=a.$id,console.log(a),i(a.$id).$loaded().then(function(e){e.$save(a)}),alertify.success("widget added! model saved!")}),o.$on("adfDashboardChanged",function(e,t,a){console.log("event",e),console.log("name",t),console.log("model",a),i(a.$id).$loaded().then(function(e){e.$save(a)})}),v.openmodal=function(e){s.roarevent=e,console.log("opening",e);var t=o.$new(),l={scope:t,template:'<div class=modal-header>  <h4 class=modal-title>{{definition.title}}</h4> <div class="pull-right widget-icons"> <a href title="Reload Widget Content" ng-if=widget.reload ng-click=reload()> <i class="glyphicon glyphicon-refresh"></i> </a> <a href title=close ng-click=closeDialog()> <i class="glyphicon glyphicon-remove"></i> </a> </div></div> <div class=modal-body><adf-dashboard id="{{roarevent.id}}" name="{{roarevent.id}}"  title-template-url="\'/llp_core/modules/lionlawlabs/partial/projectdashboard/tabs/memo/title.html\'" enable-confirm-delete="true" structure="{{roarevent.structure}}" adf-model="roarevent" class="" editable="true" style="overflow:scroll;" /></adf-dashboard></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="closeDialog()">Close</button></div>',backdrop:"static",size:"lg"},i=a.open(l);t.closeDialog=function(){i.close(),t.$destroy()}},v.moveLeft=function(e){var t=e.sortOrder||0;o.roarevent.sortOrder=t-1,o.roarevent.$save()},v.moveRight=function(e){var t=e.sortOrder||0;o.roarevent.sortOrder=t+1,o.roarevent.$save()},v.toggleSelection=function(e,t){e.isSelected=!e.isSelected,e.$save()},v.movetorecyclebin=function(e){var t=u.tabid||u.pageid||u.pId,a=e.id||e;i(t).$ref().child("roarlist").child(a).set(null),
p(u.pId).$ref().child("log").push({message:" removed ",recordid:e.id||e,contextid:u.pageid,messagetwo:" from ",user:d.authData.uid,styleClass:"danger",timestamp:firebase.database.ServerValue.TIMESTAMP})},o.note=function(e){return v.newnoteonroar(e)},v.collapse=function(){o.isCollapsed=!o.isCollapsed,$("#"+roarevent.$id).css({height:"75px"})},v.rightmenu={icon:"fa-chevron-down",items:[{icon:"fa-external-link",label:"Pop out",styleClass:"",onClick:function(e){return v.show(e.id)}},{icon:"fa-copy",label:"Copy to Clipboard",styleClass:"",onClick:function(e){return v.copytoclipboard(e)}},{icon:"fa-edit",label:"Details",styleClass:"",onClick:function(e){return v.openmodal(e)}},{icon:"fa-pencil",label:"Quick Note",styleClass:"",onClick:function(e){return v.newnoteonroar(e)}},{styleClass:"divider"},{icon:"fa-close",label:"Remove",styleClass:" text-danger",onClick:function(e){return v.movetorecyclebin(e)}}]}}]).directive("roarBadgeA",["Collection","$animate",function(e,t){return{restrict:"EA",templateUrl:"/llp_core/modules/roarmap/directive/roarevent/roarbadge.html",transclude:!0,scope:{roarevent:"=?",id:"@",animation:"=?",editable:"=?",hovered:"=?",success:"&?"},controller:"ROARbadgeCtrl",link:function(a,l,i,o){var n=i.id,r=e(n);r.$bindTo(a,"roarevent"),a.link=r.mediaUrl,l.on("mouseenter",function(){t.addClass(l,"active")}),l.on("mouseleave",function(){t.removeClass(l,"active")})}}}]).directive("roarTogglesA",function(){return{restrict:"E",templateUrl:"/llp_core/modules/roarmap/directive/roarevent/roartoggles.html",scope:{roarevent:"=",animation:"=",editable:"="},link:function(e,t,a,l){}}}).directive("rpopA",["$http","Popup","$rootScope","$compile","$controller","$document","$animate","ROARevent","$templateCache",function(e,t,a,l,i,o,n,r,s){return{restrict:"AC",scope:{roarevent:"=?",popupController:"=?",popupTemplateUrl:"=?",tooltipController:"=?",tooltipTemplateUrl:"=?",onPopupShow:"=?",onPopupHide:"=?",popupOffset:"=?"},controller:"ROAReventController",link:function(r,c,d,p){var u,g,f,h,m,b,v,y,w,x;u=null!=(x=r.popupOffset)?x:10,g=null,f=null,y="",w="",c.on("mouseenter",function(){n.addClass(c,"active")}),c.on("mouseleave",function(){n.removeClass(c,"active")}),c.on("click",function(e){var t=angular.element(e.target);if(targetId=null!=(attrId=t.attr("id"))?parseInt(attrId,10):void 0,null!=g&&g.scope.id===targetId)return void h();m(),v(d.href,t,!1);var a=angular.element("<div/>").attr("id",roarevent.id||roarevent.$id).attr("class","issuedocpanel panel panel-{{roarevent.styleClass || 'default'}} stacker").css({"z-index":"100000",width:"450px",margin:"10px"}),i=s.get("{widgetsPath}/getphd/src/titleTemplate.html"),o=angular.element('<iframe uib-collapse="widgetState.isCollapsed" class="panel-body" style="width:100%;height:600px;z-index:0;" ng-src="{{\'/files/uploads/\'+ roarevent.$id + \'.html\'}}"  />').attr("id",roarevent.id||roarevent.$id);angular.element("body").append(l(a.append(i).append(o))(r)),$(a).draggable({scroll:!0,cursor:"move",stack:".stacker",handle:".panel-heading"}).resizable()});var h=function(){var e;if(null!=g)return e=g.scope.id,g.destroy(function(){if(g.scope.id===e)return g=null})},b=function(){var e;if(e=f,null!=e)return e.destroy(function(){if(f===e)return f=null})},m=function(){return h(),b()};r.$on("$destroy",m),r.$on("clearPopups",m),r.popupTemplateUrl?e.get(r.popupTemplateUrl).then(function(e){return y=e.data}):e.get("/getphdwidget/src/titleTemplate.html").then(function(e){return y=e.data}),r.tooltipTemplateUrl?e.get(r.tooltipTemplateUrl).then(function(e){return w=e.data}):e.get("/llp_core/modules/roarmap/partial/roarmap.detail.tpl/roarmap.annotation-tooltip.tpl.html").then(function(e){return w=e.data});var v=function(e,s,c,p){var f,m,b;return b=new t({scope:a.$new(),callbacks:{show:r.onPopupShow,hide:r.onPopupHide},template:"<div class=\"roarpopover issuedocpanel panel-{{roarevent.styleClass || 'default'}}\" >"+y+'<iframe src="'+d.href+'"></iframe></div>',positionClass:"roarevent-popup-docked roarevent-popup-docked-{{position}}",$anchor:s,offset:u}),b.scope.$isNew=p,b.scope.roarevent=e,b.scope.$readonly=r.readonly,b.scope.$reject=function(){n.addClass(b.$el,"close"),o.remove(b),h()},b.scope.$close=function(){n.addClass(b.$el,"close"),o.remove(b),h()},g=b,m={$scope:b.scope,$template:y},b.$el.html(m.$template),b.$el.appendTo("body"),r.popupController&&(f=i(r.popupController,m),b.$el.data("$ngControllerController",f),b.$el.children().data("$ngControllerController",f)),l(b.$el)(b.scope),b.scope.$apply(),b.show()}}}}]).directive("roarPopoverA",["$http","Popup","$rootScope","$compile","$controller","$document","$animate",function(e,t,a,l,i,o,n){return{restrict:"A",scope:{roarevent:"=",popupController:"=",popupTemplateUrl:"=",tooltipController:"=",tooltipTemplateUrl:"=",onPopupShow:"=",onPopupHide:"=",popupOffset:"="},link:function(r,s,c,d){var p,u,g,f,h,m,b,v,y,w;p=null!=(w=r.popupOffset)?w:10,u=null,g=null,v="",y="",s.on("mouseenter",function(){n.addClass(s,"active")}),s.on("mouseleave",function(){n.removeClass(s,"active")}),s.on("click",function(e){var t=angular.element(e.target);return targetId=null!=(attrId=t.attr("id"))?parseInt(attrId,10):void 0,null!=u&&u.scope.roarevent.$id===targetId?void f():(h(),void b(r.roarevent,t,!1))});var f=function(){var e;if(null!=u)return e=u.scope.roarevent.$id,u.destroy(function(){if(u.scope.roarevent.$id===e)return u=null})},m=function(){var e;if(e=g,null!=e)return e.destroy(function(){if(g===e)return g=null})},h=function(){return f(),m()};r.$on("$destroy",h),r.$on("roarevent.clearPopups",h),r.popupTemplateUrl&&e.get(r.popupTemplateUrl).then(function(e){return v=e.data}),r.tooltipTemplateUrl&&e.get(r.tooltipTemplateUrl).then(function(e){return y=e.data});var b=function(e,s,c){var d,g,h;return h=new t({scope:a.$new(),callbacks:{show:r.onPopupShow,hide:r.onPopupHide},template:"<div id='"+r.roarevent.$id+"' class='roarpopover' />",positionClass:"roarevent-popup-docked roarevent-popup-docked-{{position}}",$anchor:s,offset:p}),h.scope.$isNew=c,h.scope.roarevent=e,h.scope.$readonly=r.readonly,h.scope.$reject=function(){n.addClass(h.$el,"close"),o.remove(h),f()},h.scope.$close=function(){n.addClass(h.$el,"close"),o.remove(h),f()},u=h,g={$scope:h.scope,$template:v},h.$el.html(g.$template),h.$el.appendTo("body"),r.popupController&&(d=i(r.popupController,g),h.$el.data("$ngControllerController",d),h.$el.children().data("$ngControllerController",d)),l(h.$el)(h.scope),h.scope.$apply(),h.show()}}}}]).directive("toolbarA",function(){return{restrict:"E",templateUrl:"/llp_core/modules/roarmap/directive/toolbars/toolbarbasic.html",scope:!1,link:function(e,t,a,l){}}}).controller("ROAReventControllerA",["$scope","ROARevent","ROARevents","$state","$stateParams","$timeout","ngDialog","$ACTIVEROAR","Collection","$templateCache","$compile","$rootScope","$window","$clipboard",function(e,t,a,l,i,o,n,r,s,c,d,p,u,g){var f=(i.matterId,this);f.show=function(t){s(t).$loaded().then(function(t){if("html"!==t.document_type){var a=angular.element("<div/>").attr("class","issuedocpanel stacker"),l=c.get("{widgetsPath}/getphd/src/titleTemplate.html"),i=angular.element("<embed/>").attr("src",t.media);angular.element("body").append(d(a.append(l).append(i))(e)),$(".issuedocpanel").draggable({stack:".stacker",handle:"h4"}).resizable()}else{var a=angular.element("<div/>").attr("class","issuedocpanel stacker"),l=c.get("{widgetsPath}/getphd/src/titleTemplate.html"),i=angular.element("<embed/>").attr("srcdoc",'<!DOCTYPE html><html><head><link rel="stylesheet" href="//lexspace.net/app.full.min.css"></head><body><div class="card card-default">'+angular.fromJson(t.content));angular.element("body").append(d(a.append(l).append(i))(e)),$(".issuedocpanel").draggable({stack:".stacker",handle:"h4"}).resizable()}})},e.remove=function(){$(this).parent().parent().remove()},e.alert=function(t){alertify.alert(t),f.newnoteonroar(e.roarevent)},e.openFullScreen=function(){e.fullscreen!==!0?($(".issuedocpanel").css({position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",width:"100%","z-index":"100000",transition:"all 0.5s ease-out"}),$(".fa-expand").addClass("fa-compress").removeClass("fa-expand"),e.fullscreen=!0):($(".issuedocpanel").css({position:"absolute",top:"6rem",left:"10rem",bottom:null,right:null,width:"initial","z-index":"9999",transition:"all 0.5s ease-out"}).draggable().resizable(),$(".fa-compress").addClass("fa-expand").removeClass("fa-compress"),e.fullscreen=!1)},e.edit=function(){f.copytoclipboard(e.roarevent)},e.$window=u,f.newnoteonroar=function(e){n.open({data:e,template:"/llp_core/partials/statusboard/partials/newCard.html",controller:"ROARChipCtrl",className:"ngdialog-theme-inline",plain:!1,closeByEscape:!0,closeByDocument:!0,appendTo:!1})},f.openmodal=function(t){r.roarevent=t,console.log("opening",t),n.open({template:"/llp_core/modules/roarmap/partial/xlDialogId/xlDialogId.html",controller:"xlDialogIdCtrl",data:t,scope:e.$new(),className:"ngdialog-theme-xl",closeByDocument:!0,closeByEscape:!0,plain:!1,showClose:!0,closeByNavigation:!1,preCloseCallback:!1})},e.togglelionpad=function(e){e.lionpad!==!0?(e.lionpad=!0,roarevents.$save(e)):e.lionpad===!0&&(e.lionpad=!1,roarevents.$save(e))},e.rightmenu={icon:"fa-chevron-down",items:[{icon:"fa-edit",label:"Open/Edit",styleClass:"",onClick:function(e){return f.openmodal(e)}},{icon:"fa-copy",label:"Copy to Cliplboard",styleClass:"",onClick:function(e){return f.copytoclipboard(e)}}]},f.copytoclipboard=function(e){g().$add(e.id||e).then(function(e){alertify.log("COPY to CLIPBOARD")})}}]).factory("PopupA",function(){return function(t){return t=angular.extend({scope:null,callbacks:{},template:"<div/>",$anchor:null,preferredAxis:"x",offset:0,positionClass:"{{position}}"},t),angular.extend(this,t,{$el:angular.element(t.template),show:function(e){if(null==e&&(e="fast"),this.$el.slideDown(e),this.reposition(),angular.isFunction(this.callbacks.show))return this.callbacks.show(this.$el)},hide:function(e){if(null==e&&(e="fast"),this.$el.slideUp(e),angular.isFunction(this.callbacks.hide))return this.callbacks.hide(this.$el)},isVisible:function(){return this.$el.is(":visible")},destroy:function(e){var t,a;return null==e&&(e=angular.noop),a=this.scope,t=this.$el,this.hide(function(){return angular.isFunction(e)&&e(),a.$destroy(),t.remove()})},stopDestroy:function(){return this.$el.stop(!0).show("fast")},reposition:function(){var t,a,l,i,o;o=this.$el[0],t=this.$anchor[0],(o||t)&&(a={left:null,top:null,target:o.getBoundingClientRect(),anchor:t.getBoundingClientRect(),viewport:{width:e.innerWidth,height:e.innerHeight},scroll:{top:document.body.scrollTop,left:document.body.scrollLeft}},a.target.width>0&&a.target.height>0&&(l=this.getNewPositionOnAxis(a,"x"),i=this.getNewPositionOnAxis(a,"y"),"x"===this.preferredAxis?l&&angular.isNumber(l.pos)?(a.left=l.pos,a.edge=l.edge):i&&(a.top=i.pos,a.edge=i.edge):i&&angular.isNumber(i.pos)?(a.top=i.pos,a.edge=i.edge):l&&(a.left=l.pos,a.edge=l.edge),null===a.left&&null===a.top?(a.left=a.scroll.left+a.viewport.width/2-a.target.width/2,a.top=a.scroll.top+a.viewport.height/2-a.target.height/2):null===a.left?a.left=this.getNewCenterPositionOnAxis(a,"x"):null===a.top&&(a.top=this.getNewCenterPositionOnAxis(a,"y")),this.$el.addClass(a.edge&&this.positionClass.replace("{{position}}",a.edge)).css({top:Math.round(a.top)||0,left:Math.round(a.left)||0})))},getNewPositionOnAxis:function(e,t){var a,l,i,o;return o={x:"left",y:"top"}[t],l={x:"right",y:"bottom"}[t],i={x:"width",y:"height"}[t],e.anchor[o]-this.offset>=e.target[i]?a={pos:e.scroll[o]+e.anchor[o]-this.offset-e.target[i],edge:o}:e.viewport[i]-e.anchor[l]-this.offset>=e.target[i]&&(a={pos:e.scroll[o]+e.anchor[l]+this.offset,edge:l}),a},getNewCenterPositionOnAxis:function(e,t){var a,l,i;return i={x:"left",y:"top"}[t],l={x:"width",y:"height"}[t],a=e.scroll[i]+e.anchor[i]+e.anchor[l]/2-e.target[l]/2,Math.max(e.scroll[i]+this.offset,Math.min(a,e.scroll[i]+e.viewport[l]-e.target[l]-this.offset))}})}}).controller("ROARbadgeCtrlA",["$scope","$stateParams","ROARevent","ROARevents",function(e,t,a,l){var i=t.matterId,o=l(i);e.roarevents=o}]).factory("$roareventA",["OWNERSHIPDOCS","ARTDOCS","MERITSDOCS","DOCNAMES","PETDOCCODES","NOADOCCODES","INTVDOCCODES","PTODOCCODES","APPDOCCODES","$q","$filter","ckstarter","ckender","$stateParams","$rootScope",function(e,t,a,l,i,o,n,r,s,c,d,p,u,g,f){return function(e){function t(e){var t=e;if(t.filename.indexOf(".pdf")>-1){var c=e.Filename||e.name||e.filename,d=c.slice(0,c.indexOf("-")),p=c.slice(c.indexOf("-")+1,c.indexOf("-")+11),u=c.slice(c.lastIndexOf("-")+1,c.indexOf(".pdf"));t.content_type="document",e.url&&(t.media=e.url,t.uuid=e.id,t.mimeType=e.mimeType||null),t.description=e["Document Description"]||null,t.filename=e.Filename||e.name||e.filename,t.collections=[],t.application=d||null,t.date=p||null,t.doccode=e["Document Code"]||u,angular.forEach(s,function(e,a){u===e&&(t.styleClass="Applicant")}),angular.forEach(r,function(e,a){u===e&&(t.styleClass="PTO")}),angular.forEach(n,function(e,a){u===e&&(t.styleClass="Interview")}),angular.forEach(o,function(e,a){u===e&&(t.styleClass="NOA")}),angular.forEach(i,function(e,a){u===e&&(t.styleClass="Petition")}),angular.forEach(l,function(e,a){angular.forEach(e,function(e,a){u===a?(t.name=e,t.title=e):t.name=c})});var g=(new Date,new Date),f=g.getTime();return t.rows=[{columns:[{cid:f+9,styleClass:"col-sm-6",widgets:[{config:{height:"90vh",url:t.media||""},styleClass:t.styleClass||"btn-dark",title:"LexFrame",type:"iframe",wid:f+100}]},{cid:f+10,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"LexPad",type:"ckwidget",wid:f+1010},{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"Metadata",type:"metadata",wid:f+101},{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"Text",type:"text",wid:f+105}]}]}],t.structure="6-6",a.resolve(t)}var c=e.Filename||e.name||e.filename;t.name=c,t.title=c,e.url&&(t.media=e.url,t.uuid=e.id,t.mimeType=e.mimeType||null);var g=(new Date,new Date),f=g.getTime();return t.rows=[{columns:[{cid:f+9,styleClass:"col-sm-6",widgets:[{config:{height:"90vh",url:t.media||"http://www.google.com"},styleClass:t.styleClass||"btn-dark",title:"LexFrame",type:"iframe",wid:f+100}]},{cid:f+10,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"LexPad",type:"ckwidget",wid:f+1010},{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"Metadata",type:"metadata",wid:f+101},{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"Text",type:"text",wid:f+105}]}]}],t.structure="6-6",a.resolve(t)}var a=c.defer();return t(e),a.promise}}]).factory("$roarmapA",["$stateParams","Matter","Collection","ROARevent","ROARevents","Collections","$timeout","OWNERSHIPDOCS","ARTDOCS","MERITSDOCS","DOCNAMES","PETDOCCODES","NOADOCCODES","INTVDOCCODES","PTODOCCODES","APPDOCCODES","$q","PHD","$log","filepickerService","$location","$ACTIVEROAR","$dashboards","CLAIMDOCS","ckstarter","ckender","ckheader","$http","$filter",function(e,t,a,l,i,o,n,r,s,c,d,p,u,g,f,h,m,b,v,y,w,x,C,k,$,A,P,O,S){return function(l,i,o){function r(e){y(e)}function b(e,t){var l=a(e[3]).$ref(),i=a(e[2]).$ref(),n=a(e[1]).$ref(),r=a(e[0]).$ref();return angular.forEach(t.imagefile,function(e,m){if(""!==e["Mail Room Date"]&&""!==e.Filename){var b=angular.copy(t.application["Application Number"]).replace("/","").replace(",","").replace(",",""),y=(a(b).$ref(),new Date,e),x=new Date(e["Mail Room Date"]),P=(x.getFullYear(),x.getMonth(),x.getDate(),x.toDateString()),O=e.Filename||null,S=O.slice(0,O.indexOf("-")),E=O.slice(O.indexOf("-")+1,O.indexOf("-")+11),I=(O.slice(O.indexOf("-")+11,O.lastIndexOf("-")),O.slice(O.lastIndexOf("-")+1,O.indexOf(".pdf")));y.content_type="document";var D=O.slice(0,O.lastIndexOf("-"));y.id=D,"localhost"===w.host()?(y.ocrlink="/files/public/uspto/"+S+"/"+S+"-image_file_wrapper/"+O,y.selflink="/files/public/uspto/"+S+"/"+S+"-image_file_wrapper/"+O,y.media=y.ocrlink):(y.ocrlink="/files/public/uspto/"+S+"/"+S+"-image_file_wrapper/"+O,y.selflink="/files/public/uspto/"+S+"/"+S+"-image_file_wrapper/"+O,y.media=y.ocrlink),y.description=e["Document Description"]||null,y.filename=e.Filename||null,y.collections=[],y.Application=S||null,y.date=E||null,y.rid=t.imagefile.length-t.imagefile.indexOf(e),y.patentid=t.patent.id,y.doccode=e["Document Code"]||null,angular.forEach(d,function(e,t){angular.forEach(e,function(e,t){I===t&&(y.name=e,y.title=e)})});var T=$,R=A,U='<div id="docheader" class="container-fluid two-col-right" doc-header roarid="'+y.id+'"><div getpdftext="'+y.id+'" pdf-data="'+y.ocrlink+'">&nbsp;</div></div>';'<div id="docheader" class="container-fluid two-col-left" doc-header roarid="'+y.id+'"><div class="row"><div class="col-xs-4 col-sm-3 card card-'+y.styleClass+'"><img src="https://placehold.it/250x150/640002/fff/&text='+y.rid+'" class="img img-hover img-responsive img-shadow"/> <p class="card-text"><label ng-repeat="match in matches track by $index | unique" class="fa fa-tag">{{match}}</label></p></div><div class="col-xs-8"><div class="bs-callout bs-callout-PTO bs-callout-reverse"><h4>'+y.title+"</h4><p>Dated "+P+"</p><cite>"+y.filename+'&nbsp;&nbsp;<a href="'+y.media+'" pop="true" target="fframe"><i class="fa fa-external-link"></i></a></cite></div><input type="text" ng-model="query" placeholder="Search" class="fa fa-search fa-pull-right" /></div><div getpdftext="'+y.id+'" pdf-data="'+y.ocrlink+'">&nbsp;</div></div></div>','<div id="docheader" class="container-fluid two-col-left" doc-header roarid="'+y.id+'"><div class="row"><div class="col-xs-4 col-sm-3 card card-'+y.styleClass+'"><img src="https://placehold.it/250x150/7c994f/fff/&text='+y.rid+'" class="img img-hover img-responsive img-shadow"/> <p class="card-text"><label ng-repeat="match in matches track by $index | unique" class="fa fa-tag">{{match}}</label></p></div><div class="col-xs-8"><div class="bs-callout bs-callout-NOA bs-callout-reverse"><h4>'+y.title+"</h4><p>Dated "+P+"</p><cite>"+y.filename+'&nbsp;&nbsp;<a href="'+y.media+'" pop="true" target="fframe"><i class="fa fa-external-link"></i></a></cite></div><input type="text" ng-model="query" placeholder="Search" class="fa fa-search fa-pull-right" /></div><div getpdftext="'+y.id+'" pdf-data="'+y.ocrlink+'">&nbsp;</div></div></div>','<div id="docheader" class="container-fluid two-col-right" doc-header roarid="'+y.id+'"><div class="row"><div class="col-xs-8 col-sm-9"><div class="bs-callout bs-callout-Petition"><h4>'+y.title+"</h4><p>Dated "+P+"</p><cite>"+y.filename+'&nbsp;&nbsp;<a href="'+y.media+'" pop="true" target="fframe"><i class="fa fa-external-link"></i></a></cite></div><input type="text" ng-model="query" placeholder="Search" class="fa fa-search fa-pull-left" /></div><div getpdftext="'+y.id+'" pdf-data="'+y.ocrlink+'">&nbsp;</div><div class="col-xs-4 col-sm-3 card card-'+y.styleClass+'"><img src="https://placehold.it/250x150/b48200/fff/&text='+y.rid+'" class="img img-hover img-responsive img-shadow"/> <p class="card-text"><label ng-repeat="match in matches track by $index | unique" class="fa fa-tag">{{match}}</label></p></div></div></div>','<div id="docheader" class="container-fluid two-col-right" doc-header roarid="'+y.id+'"><div class="row"><div class="col-xs-8"><div class="bs-callout bs-callout-Interview"><h4>'+y.title+"</h4><p>Dated "+P+"</p><cite>"+y.filename+'&nbsp;&nbsp;<a href="'+y.media+'" pop="true" target="fframe"><i class="fa fa-external-link"></i></a></cite></div><input type="text" ng-model="query" placeholder="Search" class="fa fa-search fa-pull-left" /></div><div getpdftext="'+y.id+'" pdf-data="'+y.ocrlink+'">&nbsp;</div><div class="col-xs-4 col-sm-3 card card-'+y.styleClass+'"><img src="https://placehold.it/250x150/&text='+y.rid+'" class="img img-hover img-responsive img-shadow"/> <p class="card-text"><label ng-repeat="match in matches track by $index | unique" class="fa fa-tag">{{match}}</label></p></div></div></div>';angular.forEach(h,function(e,a){I===e&&(y.styleClass="Applicant",y.content=T+U+R,y.data=T+U+R,t.content+=U)}),angular.forEach(f,function(e,a){I===e&&(y.styleClass="PTO",y.content=T+U+R,y.data=T+U+R,t.content+=U)}),angular.forEach(g,function(e,a){I===e&&(y.styleClass="Interview",y.content=T+U+R,y.data=T+U+R,t.content+=U)}),angular.forEach(u,function(e,a){I===e&&(y.styleClass="NOA",y.content=T+U+R,y.data=T+U+R,t.content+=U)}),angular.forEach(p,function(e,a){I===e&&(y.styleClass="Petition",y.content=T+U+R,y.data=T+U+R,t.content+=U)});var M=new Date,N=M.getTime();y.rows=[{columns:[{cid:N+9,styleClass:"col-sm-6",widgets:[{config:{height:"90vh",url:y.media||"http://www.google.com"},styleClass:y.styleClass||"btn-dark",title:"LexFrame",type:"iframe",wid:N+100}]},{cid:N+10,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE",height:"90vh"},styleClass:y.styleClass||"btn-dark",title:"LexPad",type:"ckwidget",wid:N+1010},{config:{id:"PROMISE",height:"90vh"},styleClass:y.styleClass||"btn-dark",title:"Metadata",type:"metadata",wid:N+101},{config:{id:"PROMISE",height:"90vh"},styleClass:y.styleClass||"btn-dark",title:"Text",type:"text",wid:N+105}]}]}],y.structure="6-6",y.isActive=!1;var F=a(D).$ref();o.progresstwo++,F.set(y,function(d){var p=D;F.update({id:p,timestamp:Firebase.ServerValue.TIMESTAMP}),F.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(p),F.child("rows").child("0").child("columns").child("1").child("widgets").child("1").child("config").child("id").set(p),F.child("rows").child("0").child("columns").child("1").child("widgets").child("2").child("config").child("id").set(p),t.roarmap.roarlist[p]=p;var u=a(y.Application).$ref();u.child("history").child(y.date).child(p).set(p),r.child("roarlist").child(p).set(p);var g=new RegExp(/(^CLM)|(NOA)|(CTNF)|(CTFR)|(REM)|(^\bA\..)|(CTRS)|(CTNS)|(^\bSA\..)/);g.test(y.doccode)!==!1&&o.pushtoqueue(e),angular.forEach(c,function(t,a){y.doccode===t&&(n.child("roarlist").child(p).set(p),C.push(e),v.info("merits",p))}),angular.forEach(s,function(e,t){y.doccode===e&&(i.child("roarlist").child(p).set(p),v.info("art",p))}),angular.forEach(k,function(e,t){y.doccode===e&&(l.child("roarlist").child(p).set(p),v.info("claims",p))})})}}),angular.forEach(C,function(e,t){o.pushtoqueue(e)}),P.resolve(e)}function y(e){var t=new Date,l=t.getTime(),i=function(t){var a=this;return a={name:"USSN "+e.application["Application Number"],rid:t.rid,title:t.title+" - USSN "+e.application["Application Number"],collection_type:"source",description:"for US "+e.patent.id,styleClass:t.styleClass,sortOrder:t.sortOrder,icon:t.icon,app:e.application["Application Number"],content_type:"collection",rows:[{styleClass:"row leather",columns:[{cid:l+10,styleClass:"col-sm-12",widgets:[{type:"pagebuilder",title:t.rid+" - USSN "+e.application["Application Number"],styleClass:t.styleClass||"btn-dark",config:{id:"PROMISE",url:"/llp_core/modules/roarmap/directive/roargrid/roargrid.html"}}]}]}]}},o={rid:"PHD1",title:"ALL",styleClass:"NOA",icon:"fa-legal",sortOrder:1},r={rid:"PHD4",title:"MERITS",styleClass:"PTO",icon:"fa-balance-scale",sortOrder:4},s={rid:"PHD2",title:"ART",styleClass:"Petition",icon:"fa-leaf",sortOrder:2},c={rid:"PHD3",title:"CLAIMS",styleClass:"Applicant",icon:"fa-sitemap",sortOrder:3},d=[],p={all:o,merits:r,art:s,claims:c};angular.forEach(p,function(t,l){var o=a(e.patent.id+t.title).$ref();o.set(new i(t),function(a){var l=e.patent.id+t.title;return o.update({id:l,timestamp:Firebase.ServerValue.TIMESTAMP}),o.child("rows").child("0").child("columns").child("0").child("widgets").child("0").child("config").child("id").set(l),d.push(l)})}),n(function(){x(d,e)},500)}function x(e,t){var l=(new Date,new Date),i=l.getTime(),o=t.patent;o.rows=[{columns:[{cid:i+10,styleClass:"col-sm-6",widgets:[{config:{height:"30em",url:o.media||"http://www.google.com"},title:o.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"iframe",wid:i+100,styleClass:o.styleClass||"btn-dark"}]},{cid:i+1e3,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE"},title:o.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"ckwidget",wid:i+15,styleClass:o.styleClass||"btn-dark"}]}]}],o.structure="6-6";var n=a(t.patent.id).$ref();n.set(o,function(l){var i=t.patent.id;n.update({id:i,timestamp:Firebase.ServerValue.TIMESTAMP}),n.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(i);var o=a(e[0]).$ref(),r=a(e[1]).$ref();o.child("roarlist").child(i).set(i),r.child("roarlist").child(i).set(i),b(e,t)})}i.roarmap={collections:[],roarlist:[]},i.roarlist={};var C=[],P=m.defer(),O=(t(e.matterId,e.groupId),a(e.pageid));O.$ref(),a(e.pId).$ref();return r(i),P.promise}}]).controller("PageslideCtrlA",["$scope",function(e){e.checked=!1,e.toggle=function(){e.checked=!e.checked},e.checked1=!1,e.toggle1=function(){e.checked1=!e.checked1},e.checked2=!1,e.toggle2=function(){e.checked2=!e.checked2}}]).filter("stripA",function(){return function(e){if(e!==t){var a=new RegExp(/\D/gi),l=e.replace(a,"");return l}return e}}).directive("docHead",["$window","$document","$compile","$templateCache","Collection",function(e,t,a,l,i){return{restrict:"EA",scope:{},transclude:!0,templateUrl:"{widgetsPath}/getphd/src/phd/docheader.html",controller:"DocHeaderController",controllerAs:"roar",bindToController:!0,link:function(e,t,a,l){var o=a.roarid||a.id;e.roarid=o,i(o).$loaded().then(function(t){e.roarevent=t;var a=new Date(t["Mail Room Date"]);e.roardate=a.toDateString();var l=function(t){var a;switch(t){case"Applicant":a="4682b4";break;case"PTO":a="640002";break;case"Petition":a="b48200";break;case"Interview":a="999999";break;case"NOA":a="7c994f";break;case"primary":a="025aa5";break;case"info":a="5bc0de";break;case"success":a="449d44";break;case"warning":a="f0ad4e";break;case"danger":a="c9302c";break;case"dark":a="000000";break;case"fancy":a="dddddd";break;case"royal":a="aa00ff";break;case"undefined":a="111111";break;case"default":a="ffffff";break;case"flat":a="aaaaaa";break;case"glass":a="f0f0f0"}return"https://placehold.it/450x350/"+a+"/ffa&text="+e.roarevent.rid};e.background=l})}}}]).directive("patentreportA",["$http","ckstarter","ckender",function(e,t,a){return{restrict:"EA",templateUrl:"{widgetsPath}/getphd/src/phd/patentReport.html",scope:{config:"="},controller:"PatentWidgetCtrl",link:function(e,t,a,l){}}}]).directive("patentCitationA",["$http","Collection","$patentsearch","$filter",function(e,t,a,l){return{restrict:"EA",templateUrl:"{widgetsPath}/getphd/src/phd/citation.html",scope:{ref:"="},link:function(e,t,i,o){var n=e.ref.match(/\d+/gi),r=e.ref.replace(/\:/gi,"");console.log(n[0]);try{a(null,{PNUM:n[0]}).then(function(t){e.poo=n[0],e.p=t;var a=parseInt(n[0]);a>2e9?e.poodle=l("published_application")(a):e.poodle=l("number")(a,0)})}catch(s){a(null,{PNUM:r}).then(function(t){e.p=t})}finally{}}}}]).directive("noteswidgetA",["$rootScope","Users","Notes","Note",function(e,t,a,l){return{restrict:"A",replace:!0,templateUrl:"/llp_core/modules/roarmap/directive/roarevent/notes.tpl.html",controller:"NotesController",controllerAs:"notesCtrl",scope:!1,link:function(e,i,o,n){var r=o.noteswidget,s=a(r).$loaded().then(function(t){e.notes=t});l(r).$loaded().then(function(t){e.note=t});e.Users=t(),e.addNote=s.$add("MyNote")}}}]).controller("NotesControllerA",[]).controller("DocHeaderControllerA",["$aside","toastr","$uibModal","$compile","Collection","$scope","$templateCache","ngDialog","$ACTIVEROAR","$window","$rootScope","PROJECT","$stateParams","$sce","Fullscreen","$clipboard","ROARevents","$http",function(e,t,a,l,i,o,n,r,s,c,d,p,u,g,f,h,m,b){var v=this;o.openpreview=function(e){c.htmltoload=e.content,c.open("javascript:void( (function(){document.open();document.write(window.opener.htmltoload);document.close();window.opener.htmltoload = null;})() )",null,"toolbar=yes,location=no,status=yes,menubar=yes,scrollbars=yes,resizable=yes,width=700,height=700")},o.remove=function(){$(this).parent().parent().remove()},o.alert=function(e){alertify.alert(e),v.newnoteonroar(o.roarevent)},o.openFullScreen=function(e){o.full!==!0?($(".issuedocpanel").css({position:"absolute",top:"0px",left:"0px",bottom:"0px",right:"0px",width:"100%","z-index":"100000",transition:"all 0.5s ease-out"}),$(".fa-expand").addClass("fa-compress").removeClass("fa-expand"),o.full=!0):($(".issuedocpanel").css({position:"absolute",top:"6rem",left:"10rem",bottom:null,right:null,width:"initial","z-index":"9999",transition:"all 0.5s ease-out"}),$(".fa-compress").addClass("fa-expand").removeClass("fa-compress"),o.full=!1)},o.edit=function(){v.copytoclipboard(o.roarevent)},o.$window=c,o.close=function(){r.closeThisDialog()},o.saveDraft=function(e){angular.isUndefined(o.roarevent.notes)?(o.roarevent.notes=[],o.roarevent.notes.push(e)):o.roarevent.notes.push(e),o.closeThisDialog()},v.newnoteonroar=function(t){e.open({templateUrl:"/llp_core/partials/statusboard/partials/newCard.html",controller:"ROARChipCtrl",placement:"top",size:"lg"})},v.show=function(e){i(e.$id||e).$ref();i(e.$id||e).$loaded().then(function(e){if("html"!==e.document_type){var t=angular.element("<div/>").attr("id",e.id||e.$id).attr("class","issuedocpanel panel panel-{{roarevent.styleClass || 'default'}} stacker ").css({"z-index":"10000",width:"45vw",margin:"10px",height:"90vh"}),a=n.get("{widgetsPath}/getphd/src/titleTemplate.html"),i=angular.element('<iframe allowfullscreen  fullscreen="{{full}}" uib-collapse="isCollapsed" name="fframe"/>').attr("id",e.id||e.$id).attr("height","90vh").attr("width","100%").attr("src",e.mediaUrl||e.media||e.thumbnail||"https://placehold.it/500x500/000/ffa&text=X").attr("class","panel-body");angular.element("body").append(l(t.append(a).append(i))(o)),$(t).draggable({stack:".stacker",handle:"h4"}).resizable(),interact(t).draggable()}})},v.present=function(e){var t=(i(e.$id).$ref(),angular.element("<div/>").attr("id",e.id||e.$id).attr("class","issuedocpanel panel panel-{{roarevent.styleClass || 'default'}} stacker").css({"z-index":"100000",width:"45vw",margin:"10px",height:"90vh"})),a=n.get("{widgetsPath}/getphd/src/titleTemplate.html"),r=angular.element('<iframe allowfullscreen fullscreen="{{full}}" uib-collapse="isCollapsed" class="panel-body" style="width:100%;height:600px;z-index:0;" ng-attr-srcdoc="{{roarevent.content || collection.content || \'<p>Nothing to see here</p>\' | trustAsHTML}}"  name="fframe"/>').attr("id",e.id||e.$id);angular.element("body").append(l(t.append(a).append(r))(o)),$(t).draggable({scroll:!0,cursor:"move",stack:".stacker",handle:"h4"}).resizable(),interact(t).draggable()},v.copytoclipboard=function(e){h().$add(e.id||e).then(function(e){t.info("COPY TO CLIPBOARD")})},o.$on("adfWidgetAdded",function(e,t,a,l){l.titleTemplateUrl="{widgetsPath}/testwidget/src/title.html",l.styleClass=a.styleClass||"panel-dark",l.frameless=!1,l.reload=!0,a.config.id=a.$id,console.log(a),i(a.$id).$loaded().then(function(e){e.$save(a)}),alertify.success("widget added! model saved!")}),o.$on("adfDashboardChanged",function(e,t,a){console.log("event",e),console.log("name",t),console.log("model",a),i(a.$id).$loaded().then(function(e){e.$save(a)})}),v.openmodal=function(e){s.roarevent=e,console.log("opening",e);var t=o.$new(),l={scope:t,template:'<div class=modal-header>  <h4 class=modal-title>{{definition.title}}</h4> <div class="pull-right widget-icons"> <a href title="Reload Widget Content" ng-if=widget.reload ng-click=reload()> <i class="glyphicon glyphicon-refresh"></i> </a> <a href title=close ng-click=closeDialog()> <i class="glyphicon glyphicon-remove"></i> </a> </div></div> <div class=modal-body><adf-dashboard id="{{roarevent.id}}" name="{{roarevent.id}}"  title-template-url="\'/llp_core/modules/lionlawlabs/partial/projectdashboard/tabs/memo/title.html\'" enable-confirm-delete="true" structure="{{roarevent.structure}}" adf-model="roarevent" class="" editable="true" style="overflow:scroll;" /></adf-dashboard></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="closeDialog()">Close</button></div>',
backdrop:"static",size:"lg"},i=a.open(l);t.closeDialog=function(){i.close(),t.$destroy()}},v.moveLeft=function(e){var t=e.sortOrder||0;o.roarevent.sortOrder=t-1,o.roarevent.$save()},v.moveRight=function(e){var t=e.sortOrder||0;o.roarevent.sortOrder=t+1,o.roarevent.$save()},v.toggleSelection=function(e,t){e.isSelected=!e.isSelected,e.$save()},v.movetorecyclebin=function(e){var t=u.tabid||u.pageid||u.pId,a=e.id||e;i(t).$ref().child("roarlist").child(a).set(null),p(u.pId).$ref().child("log").push({message:" removed ",recordid:e.id||e,contextid:u.pageid,messagetwo:" from ",user:d.authData.uid,styleClass:"danger",timestamp:firebase.database.ServerValue.TIMESTAMP})},o.note=function(e){return v.newnoteonroar(e)},v.collapse=function(){o.isCollapsed=!o.isCollapsed,$("#"+roarevent.$id).css({height:"75px"})},v.rightmenu={icon:"fa-chevron-down",items:[{icon:"fa-external-link",label:"Pop out",styleClass:"",onClick:function(e){return v.show(e.id)}},{icon:"fa-copy",label:"Copy to Clipboard",styleClass:"",onClick:function(e){return v.copytoclipboard(e)}},{icon:"fa-edit",label:"Details",styleClass:"",onClick:function(e){return v.openmodal(e)}},{icon:"fa-pencil",label:"Quick Note",styleClass:"",onClick:function(e){return v.newnoteonroar(e)}},{styleClass:"divider"},{icon:"fa-close",label:"Remove",styleClass:" text-danger",onClick:function(e){return v.movetorecyclebin(e)}}]}}]),angular.module("textSizeSlider",[]).directive("textSizeSlider",["$document",function(e){return{restrict:"E",template:'<div class="text-size-slider"><span class="small-letter" ng-style="{ fontSize: min + unit }">A</span> <input type="range" min="{{ min }}" max="{{ max }}" step="{{ step || 0 }}" ng-model="textSize" class="slider" value="{{ value }}" /> <span class="big-letter" ng-style="{ fontSize: max + unit }">A</span></div>',scope:{min:"@",max:"@",unit:"@",value:"@",step:"@"},link:function(t,a,l){t.textSize=t.value,t.$watch("textSize",function(a){e.root.style.fontSize=a+t.unit,$("html").css({"font-size":a+t.unit})})}}}]),angular.module("roar",[]).factory("$roarevent",["OWNERSHIPDOCS","ARTDOCS","MERITSDOCS","DOCNAMES","PETDOCCODES","NOADOCCODES","INTVDOCCODES","PTODOCCODES","APPDOCCODES","$q","$filter","ckstarter","ckender",function(e,t,a,l,i,o,n,r,s,c,d,p,u){return function(e){function t(e){var t=angular.copy(e);if(t.filename.indexOf(".pdf")>-1){var c=e.Filename||e.name||e.filename,d=c.slice(0,c.indexOf("-")),p=c.slice(c.indexOf("-")+1,c.indexOf("-")+11),u=c.slice(c.lastIndexOf("-")+1,c.indexOf(".pdf"));t.content_type="document",e.url&&(t.media=e.url,t.uuid=e.id,t.mimeType=e.mimeType||null),t.description=e["Document Description"]||null,t.filename=e.Filename||e.name||e.filename,t.collections=[],t.application=d||null,t.date=p||null,t.doccode=e["Document Code"]||u,angular.forEach(s,function(e,a){u===e&&(t.styleClass="Applicant")}),angular.forEach(r,function(e,a){u===e&&(t.styleClass="PTO")}),angular.forEach(n,function(e,a){u===e&&(t.styleClass="Interview")}),angular.forEach(o,function(e,a){u===e&&(t.styleClass="NOA")}),angular.forEach(i,function(e,a){u===e&&(t.styleClass="Petition")}),angular.forEach(l,function(e,a){angular.forEach(e,function(e,a){u===a?(t.name=e,t.title=e):t.name=c})});var g=(new Date,new Date),f=g.getTime();return t.rows=[{columns:[{cid:f+9,styleClass:"col-sm-6",widgets:[{config:{height:"90vh",url:t.media||"."},styleClass:t.styleClass||"btn-dark",title:"LexFrame",type:"iframe",wid:f+100}]},{cid:f+10,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"LexPad",type:"ckwidget",wid:f+1010},{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"Metadata",type:"metadata",wid:f+101},{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"Text",type:"text",wid:f+105}]}]}],t.structure="6-6",a.resolve(t)}var c=e.Filename||e.name||e.filename;t.name=c,t.title=c,e.url&&(t.media=e.url,t.uuid=e.id,t.mimeType=e.mimeType||null);var g=(new Date,new Date),f=g.getTime();return t.rows=[{columns:[{cid:f+9,styleClass:"col-sm-6",widgets:[{config:{height:"90vh",url:t.media||"http://www.google.com"},styleClass:t.styleClass||"btn-dark",title:"LexFrame",type:"iframe",wid:f+100}]},{cid:f+10,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"LexPad",type:"ckwidget",wid:f+1010},{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"Metadata",type:"metadata",wid:f+101},{config:{id:"PROMISE",height:"90vh"},styleClass:t.styleClass||"btn-dark",title:"Text",type:"text",wid:f+105}]}]}],t.structure="6-6",a.resolve(t)}var a=c.defer();return t(e),a.promise}}]).factory("$roarmap",["$stateParams","Matter","Collection","ROARevent","ROARevents","Collections","$timeout","OWNERSHIPDOCS","ARTDOCS","MERITSDOCS","DOCNAMES","PETDOCCODES","NOADOCCODES","INTVDOCCODES","PTODOCCODES","APPDOCCODES","$q","PHD","$log","filepickerService","$location","$ACTIVEROAR","$dashboards","CLAIMDOCS","ckstarter","ckender","ckheader","$http","$filter",function(e,t,a,l,i,o,n,r,s,c,d,p,u,g,f,h,m,b,v,y,w,x,C,k,$,A,P,O,S){return function(l,i,o){function r(e){y(e)}function b(e,t){var l=a(e[3]).$ref(),i=a(e[2]).$ref(),n=a(e[1]).$ref(),r=a(e[0]).$ref();return angular.forEach(t.imagefile,function(e,m){if(""!==e["Mail Room Date"]&&""!==e.Filename){var b=angular.copy(t.application["Application Number"]).replace("/","").replace(",","").replace(",",""),y=(a(b).$ref(),new Date,angular.copy(e)),x=new Date(e["Mail Room Date"]),P=(x.getFullYear(),x.getMonth(),x.getDate(),x.toDateString()),O=e.Filename||null,S=O.slice(0,O.indexOf("-")),E=O.slice(O.indexOf("-")+1,O.indexOf("-")+11),I=(O.slice(O.indexOf("-")+11,O.lastIndexOf("-")),O.slice(O.lastIndexOf("-")+1,O.indexOf(".pdf")));y.content_type="document";var D=O.slice(0,O.lastIndexOf("-"));y.id=D,"localhost"===w.host()?(y.ocrlink="./files/public/uspto/"+S+"/"+S+"-image_file_wrapper/"+O,y.selflink="/files/public/uspto/"+S+"/"+S+"-image_file_wrapper/"+O,y.media=y.ocrlink):(y.ocrlink="./files/public/uspto/"+S+"/"+S+"-image_file_wrapper/"+O,y.selflink="./files/public/uspto/"+S+"/"+S+"-image_file_wrapper/"+O,y.media=y.ocrlink),y.description=e["Document Description"]||null,y.filename=e.Filename||null,y.collections=[],y.Application=S||null,y.date=E||null,y.rid=t.imagefile.length-t.imagefile.indexOf(e),y.patentid=t.patent.id,y.doccode=e["Document Code"]||null,angular.forEach(d,function(e,t){angular.forEach(e,function(e,t){I===t&&(y.name=e,y.title=e)})});var T=$,R=A,U='<div id="docheader" class="container-fluid two-col-right" doc-header roarid="'+y.id+'"><div getpdftext="'+y.id+'" pdf-data="'+y.ocrlink+'">&nbsp;</div></div>';'<div id="docheader" class="container-fluid two-col-left" doc-header roarid="'+y.id+'"><div class="row"><div class="col-xs-4 col-sm-3 card card-'+y.styleClass+'"><img src="https://placehold.it/250x150/640002/fff/&text='+y.rid+'" class="img img-hover img-responsive img-shadow"/> <p class="card-text"><label ng-repeat="match in matches track by $index | unique" class="fa fa-tag">{{match}}</label></p></div><div class="col-xs-8"><div class="bs-callout bs-callout-PTO bs-callout-reverse"><h4>'+y.title+"</h4><p>Dated "+P+"</p><cite>"+y.filename+'&nbsp;&nbsp;<a href="'+y.media+'" pop="true" target="fframe"><i class="fa fa-external-link"></i></a></cite></div><input type="text" ng-model="query" placeholder="Search" class="fa fa-search fa-pull-right" /></div><div getpdftext="'+y.id+'" pdf-data="'+y.ocrlink+'">&nbsp;</div></div></div>','<div id="docheader" class="container-fluid two-col-left" doc-header roarid="'+y.id+'"><div class="row"><div class="col-xs-4 col-sm-3 card card-'+y.styleClass+'"><img src="https://placehold.it/250x150/7c994f/fff/&text='+y.rid+'" class="img img-hover img-responsive img-shadow"/> <p class="card-text"><label ng-repeat="match in matches track by $index | unique" class="fa fa-tag">{{match}}</label></p></div><div class="col-xs-8"><div class="bs-callout bs-callout-NOA bs-callout-reverse"><h4>'+y.title+"</h4><p>Dated "+P+"</p><cite>"+y.filename+'&nbsp;&nbsp;<a href="'+y.media+'" pop="true" target="fframe"><i class="fa fa-external-link"></i></a></cite></div><input type="text" ng-model="query" placeholder="Search" class="fa fa-search fa-pull-right" /></div><div getpdftext="'+y.id+'" pdf-data="'+y.ocrlink+'">&nbsp;</div></div></div>','<div id="docheader" class="container-fluid two-col-right" doc-header roarid="'+y.id+'"><div class="row"><div class="col-xs-8 col-sm-9"><div class="bs-callout bs-callout-Petition"><h4>'+y.title+"</h4><p>Dated "+P+"</p><cite>"+y.filename+'&nbsp;&nbsp;<a href="'+y.media+'" pop="true" target="fframe"><i class="fa fa-external-link"></i></a></cite></div><input type="text" ng-model="query" placeholder="Search" class="fa fa-search fa-pull-left" /></div><div getpdftext="'+y.id+'" pdf-data="'+y.ocrlink+'">&nbsp;</div><div class="col-xs-4 col-sm-3 card card-'+y.styleClass+'"><img src="https://placehold.it/250x150/b48200/fff/&text='+y.rid+'" class="img img-hover img-responsive img-shadow"/> <p class="card-text"><label ng-repeat="match in matches track by $index | unique" class="fa fa-tag">{{match}}</label></p></div></div></div>','<div id="docheader" class="container-fluid two-col-right" doc-header roarid="'+y.id+'"><div class="row"><div class="col-xs-8"><div class="bs-callout bs-callout-Interview"><h4>'+y.title+"</h4><p>Dated "+P+"</p><cite>"+y.filename+'&nbsp;&nbsp;<a href="'+y.media+'" pop="true" target="fframe"><i class="fa fa-external-link"></i></a></cite></div><input type="text" ng-model="query" placeholder="Search" class="fa fa-search fa-pull-left" /></div><div getpdftext="'+y.id+'" pdf-data="'+y.ocrlink+'">&nbsp;</div><div class="col-xs-4 col-sm-3 card card-'+y.styleClass+'"><img src="https://placehold.it/250x150/&text='+y.rid+'" class="img img-hover img-responsive img-shadow"/> <p class="card-text"><label ng-repeat="match in matches track by $index | unique" class="fa fa-tag">{{match}}</label></p></div></div></div>';angular.forEach(h,function(e,a){I===e&&(y.styleClass="Applicant",y.content=T+U+R,y.data=T+U+R,t.content+=U)}),angular.forEach(f,function(e,a){I===e&&(y.styleClass="PTO",y.content=T+U+R,y.data=T+U+R,t.content+=U)}),angular.forEach(g,function(e,a){I===e&&(y.styleClass="Interview",y.content=T+U+R,y.data=T+U+R,t.content+=U)}),angular.forEach(u,function(e,a){I===e&&(y.styleClass="NOA",y.content=T+U+R,y.data=T+U+R,t.content+=U)}),angular.forEach(p,function(e,a){I===e&&(y.styleClass="Petition",y.content=T+U+R,y.data=T+U+R,t.content+=U)});var M=new Date,N=M.getTime();y.rows=[{columns:[{cid:N+9,styleClass:"col-sm-6",widgets:[{config:{height:"90vh",url:y.media||"http://www.google.com"},styleClass:y.styleClass||"btn-dark",title:"LexFrame",type:"iframe",wid:N+100}]},{cid:N+10,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE",height:"90vh"},styleClass:y.styleClass||"btn-dark",title:"LexPad",type:"ckwidget",wid:N+1010},{config:{id:"PROMISE",height:"90vh"},styleClass:y.styleClass||"btn-dark",title:"Metadata",type:"metadata",wid:N+101},{config:{id:"PROMISE",height:"90vh"},styleClass:y.styleClass||"btn-dark",title:"Text",type:"text",wid:N+105}]}]}],y.structure="6-6",y.isActive=!1;var F=a(D).$ref();o.progresstwo++,F.set(y,function(d){var p=D;F.update({id:p,timestamp:Firebase.ServerValue.TIMESTAMP}),F.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(p),F.child("rows").child("0").child("columns").child("1").child("widgets").child("1").child("config").child("id").set(p),F.child("rows").child("0").child("columns").child("1").child("widgets").child("2").child("config").child("id").set(p),t.roarmap.roarlist[p]=p;var u=a(y.Application).$ref();u.child("history").child(y.date).child(p).set(p),r.child("roarlist").child(p).set(p);var g=new RegExp(/(^CLM)|(NOA)|(CTNF)|(CTFR)|(REM)|(^\bA\..)|(CTRS)|(CTNS)|(^\bSA\..)/);g.test(y.doccode)!==!1&&o.pushtoqueue(e),angular.forEach(c,function(t,a){y.doccode===t&&(n.child("roarlist").child(p).set(p),C.push(e),v.info("merits",p))}),angular.forEach(s,function(e,t){y.doccode===e&&(i.child("roarlist").child(p).set(p),v.info("art",p))}),angular.forEach(k,function(e,t){y.doccode===e&&(l.child("roarlist").child(p).set(p),v.info("claims",p))})})}}),angular.forEach(C,function(e,t){o.pushtoqueue(e)}),P.resolve(e)}function y(e){var t=new Date,l=t.getTime(),i=function(t){var a=this;return a={name:"USSN "+e.application["Application Number"],rid:t.rid,title:t.title+" - USSN "+e.application["Application Number"],collection_type:"source",description:"for US "+e.patent.id,styleClass:t.styleClass,sortOrder:t.sortOrder,icon:t.icon,app:e.application["Application Number"],content_type:"collection",rows:[{styleClass:"row leather",columns:[{cid:l+10,styleClass:"col-sm-12",widgets:[{type:"pagebuilder",title:t.rid+" - USSN "+e.application["Application Number"],styleClass:t.styleClass||"btn-dark",config:{id:"PROMISE",url:"/llp_core/modules/roarmap/directive/roargrid/roargrid.html"}}]}]}]}},o={rid:"PHD1",title:"ALL",styleClass:"NOA",icon:"fa-legal",sortOrder:1},r={rid:"PHD4",title:"MERITS",styleClass:"PTO",icon:"fa-balance-scale",sortOrder:4},s={rid:"PHD2",title:"ART",styleClass:"Petition",icon:"fa-leaf",sortOrder:2},c={rid:"PHD3",title:"CLAIMS",styleClass:"Applicant",icon:"fa-sitemap",sortOrder:3},d=[],p={all:o,merits:r,art:s,claims:c};angular.forEach(p,function(t,l){var o=a(e.patent.id+t.title).$ref();o.set(new i(t),function(a){var l=e.patent.id+t.title;return o.update({id:l,timestamp:Firebase.ServerValue.TIMESTAMP}),o.child("rows").child("0").child("columns").child("0").child("widgets").child("0").child("config").child("id").set(l),d.push(l)})}),n(function(){x(d,e)},500)}function x(e,t){var l=(new Date,new Date),i=l.getTime(),o=angular.copy(t.patent);o.rows=[{columns:[{cid:i+10,styleClass:"col-sm-6",widgets:[{config:{height:"30em",url:o.media||"http://www.google.com"},title:o.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"iframe",wid:i+100,styleClass:o.styleClass||"btn-dark"}]},{cid:i+1e3,styleClass:"col-sm-6",widgets:[{config:{id:"PROMISE"},title:o.title||"title",titleTemplateUrl:"{widgetsPath}/testwidget/src/title.html",type:"ckwidget",wid:i+15,styleClass:o.styleClass||"btn-dark"}]}]}],o.structure="6-6";var n=a(t.patent.id).$ref();n.set(o,function(l){var i=t.patent.id;n.update({id:i,timestamp:Firebase.ServerValue.TIMESTAMP}),n.child("rows").child("0").child("columns").child("1").child("widgets").child("0").child("config").child("id").set(i);var o=a(e[0]).$ref(),r=a(e[1]).$ref();o.child("roarlist").child(i).set(i),r.child("roarlist").child(i).set(i),b(e,t)})}i.roarmap={collections:[],roarlist:[]},i.roarlist={};var C=[],P=m.defer(),O=(t(e.matterId,e.groupId),a(e.pageid));O.$ref(),a(e.pId).$ref();return r(i),P.promise}}]).controller("PageslideCtrl",["$scope",function(e){e.checked=!1,e.toggle=function(){e.checked=!e.checked},e.checked1=!1,e.toggle1=function(){e.checked1=!e.checked1},e.checked2=!1,e.toggle2=function(){e.checked2=!e.checked2}}]).filter("strip",function(){return function(e){if(e!==t){var a=new RegExp(/\D/gi),l=e.replace(a,"");return l}return e}}).directive("docheader",["$window","$document","$compile","$templateCache","Collection",function(e,t,a,l,i){return{restrict:"EA",scope:{roarevent:"=?"},transclude:!0,templateUrl:"{widgetsPath}/getphd/src/phd/docheader.html",link:function(e,t,a,l){var o=a.roarid;e.roarid=o,i(o).$loaded().then(function(t){e.roarevent=t;var a=new Date(t["Mail Room Date"]);e.roardate=a.toDateString();var l=function(t){var a;switch(t){case"Applicant":a="4682b4";break;case"PTO":a="640002";break;case"Petition":a="b48200";break;case"Interview":a="999999";break;case"NOA":a="7c994f";break;case"primary":a="025aa5";break;case"info":a="5bc0de";break;case"success":a="449d44";break;case"warning":a="f0ad4e";break;case"danger":a="c9302c";break;case"dark":a="000000";break;case"fancy":a="dddddd";break;case"royal":a="aa00ff"}return"https://placehold.it/250x150/"+a+"/fff/&text="+e.roarevent.rid};e.background=l})}}}]).directive("patentreport",["$http","ckstarter","ckender",function(e,t,a){return{restrict:"EA",templateUrl:"{widgetsPath}/getphd/src/phd/patentReport.html",scope:{config:"="},controller:"PatentWidgetCtrl",link:function(e,t,a,l){}}}]).directive("patentCitation",["$http","Collection","$patentsearch","$filter",function(e,t,a,l){return{restrict:"EA",templateUrl:"{widgetsPath}/getphd/src/phd/citation.html",scope:{ref:"="},link:function(e,t,i,o){var n=e.ref.match(/\d+/gi),r=e.ref.replace(/\:/gi,"");console.log(n[0]);try{a(null,{PNUM:n[0]}).then(function(t){e.poo=n[0],e.p=t;var a=parseInt(n[0]);a>2e9?e.poodle=l("published_application")(a):e.poodle=l("number")(a,0)})}catch(s){a(null,{PNUM:r}).then(function(t){e.p=t})}finally{}}}}]),angular.module("roar").controller("TextController",["$scope","Collection","config","$stateParams",function(e,t,a,l){var a=e.$parent.config||e.$parent.$parent.config,i=l.pId,o=t(i);e.tree=o;var n=t(a.id);n.$bindTo(e,"roarevent"),e.config=a}]).controller("ClaimWidgetController",["$scope","Collection","config",function(e,t,a){var l=this,a=e.$parent.config||e.$parent.$parent.config,i=t(a.id);i.$loaded().then(function(a){e.roarevent=a,e.sets=[],angular.forEach(a.roarlist,function(a,l){t(a).$loaded().then(function(t){e.sets.push(t.claims)})})}),e.onSubmit=function(){},e.setwatcher=function(e,t){var a=parseInt(e.slice(0,e.indexOf(".")));t+1===a?l.claimsets[t].$valid=!0:l.claimsets[t].$error()},e.sortSet=function(e){var t=e.claims,a=[];angular.forEach(t,function(e,t){var l=parseInt(e.match(/\d+(?=\.)/)[0]);a[l-1]=e}),e.claims=a},e.statustest=function(e){var t=new RegExp(/\((\w+(\s\w+)*)\)/);if(t.test(e)!==!1){var a=e.match(t);return a[1]}return null},e.num=function(e){if(angular.isString(e)){var t=e.slice(0,e.indexOf("."));return t||e}return"-"},e.prent=function(e){if(angular.isString(e)){var t,a=new RegExp(/\sof\sc[li]aim\s\d+,?\s/gi),l=e.match(a);if(null!==l)var t=l[0].replace(/\D/gi,"");return t}return-1},e.addClaim=function(t,a){var l=""+(parseInt(t)+1)+". The claim of claim "+t+", wherein the text is self-referential.";a.claims.unshift(l),e.sortSet(a)},e.checkValid=function(e,t){return alertify.error("invalid!")}}]),angular.module("llp.pdf",["LocalStorageModule"]).config(["localStorageServiceProvider",function(e){e.setPrefix("adf.getphd")}]).factory("pdfToPlainText",["$q",function(e){function t(t){var l=e.defer();PDFJS.disableWorker=!1,console.log(t);var i=PDFJS.getDocument(t.data);return i.then(a),l.promise}return function(e){t(e)};var a}]),angular.module("llp.parsetsv",[]).factory("parseTSV",[function(){return function(e,t,a){var l=e,t=t,i=Papa.parse(l,t);return a?i:i.data}}]),angular.module("llp.parsetsv").directive("thumbnail",[function(){return{restrict:"E",scope:{document:"@"},template:'<img class="img img-thumbnail img-shadow img-hover"/>',link:function(e,t,a,l){PDFJS.workerSrc="/llp_core/bower_components/pdfjs-dist/build/pdf.worker.js";var i=e.document;PDFJS.getDocument("/thumbs"+i).then(function(e){e.getPage(1).then(function(a){var l=a.getViewport(.5),o=document.createElement("canvas"),n=o.getContext("2d");o.height=l.height,o.width=l.width;var r={canvasContext:n,viewport:l};a.render(r).then(function(){n.globalCompositeOperation="destination-over",n.fillStyle="#fff",n.fillRect(0,0,o.width,o.height);var a=o.toDataURL(),l=t.attr("src",a),r={name:i,pages:e.pdfInfo.numPages},s=$("<div>").attr("class","thumb").attr("data-pdf-details",JSON.stringify(r)).append($("<span>").attr("class","close").html("&times;").click(function(){var e=$(this).parent().data("pdf-details");alert("Remove "+e.name+" !? ")})).append($("<div>").attr("class","info").text(i)).append(l).click(function(){CURRENT_FILE=$(this).data("pdf-details"),$info_name.text(CURRENT_FILE.name),$info_pages.text(CURRENT_FILE.pages),$(".thumb").removeClass("current"),$(this).addClass("current")});s.appendTo(t).click(),o.remove()})})})}}}]),function(e){var t=function(t,a){var t=e(t),l=this,i=e.extend({},e.fn.bootstrapWizard.defaults,a),o=null,n=null;this.rebindClick=function(e,t){e.unbind("click",t).bind("click",t)},this.fixNavigationButtons=function(){if(o.length||(n.find("a:first").tab("show"),o=n.find("li:first")),e(i.previousSelector,t).toggleClass("disabled",l.firstIndex()>=l.currentIndex()),e(i.nextSelector,t).toggleClass("disabled",l.currentIndex()>=l.navigationLength()),l.rebindClick(e(i.nextSelector,t),l.next),l.rebindClick(e(i.previousSelector,t),l.previous),l.rebindClick(e(i.lastSelector,t),l.last),l.rebindClick(e(i.firstSelector,t),l.first),i.onTabShow&&"function"==typeof i.onTabShow&&i.onTabShow(o,n,l.currentIndex())===!1)return!1},this.next=function(e){return!t.hasClass("last")&&((!i.onNext||"function"!=typeof i.onNext||i.onNext(o,n,l.nextIndex())!==!1)&&($index=l.nextIndex(),void($index>l.navigationLength()||n.find("li:eq("+$index+") a").tab("show"))))},this.previous=function(e){return!t.hasClass("first")&&((!i.onPrevious||"function"!=typeof i.onPrevious||i.onPrevious(o,n,l.previousIndex())!==!1)&&($index=l.previousIndex(),void($index<0||n.find("li:eq("+$index+") a").tab("show"))))},this.first=function(e){return(!i.onFirst||"function"!=typeof i.onFirst||i.onFirst(o,n,l.firstIndex())!==!1)&&(!t.hasClass("disabled")&&void n.find("li:eq(0) a").tab("show"))},this.last=function(e){return(!i.onLast||"function"!=typeof i.onLast||i.onLast(o,n,l.lastIndex())!==!1)&&(!t.hasClass("disabled")&&void n.find("li:eq("+l.navigationLength()+") a").tab("show"))},this.currentIndex=function(){return n.find("li").index(o)},this.firstIndex=function(){return 0},this.lastIndex=function(){return l.navigationLength()},this.getIndex=function(e){return n.find("li").index(e)},this.nextIndex=function(){return n.find("li").index(o)+1},this.previousIndex=function(){return n.find("li").index(o)-1},this.navigationLength=function(){return n.find("li").length-1},this.activeTab=function(){return o},this.nextTab=function(){return n.find("li:eq("+(l.currentIndex()+1)+")").length?n.find("li:eq("+(l.currentIndex()+1)+")"):null},this.previousTab=function(){return l.currentIndex()<=0?null:n.find("li:eq("+parseInt(l.currentIndex()-1)+")")},this.show=function(e){return t.find("li:eq("+e+") a").tab("show")},this.disable=function(e){n.find("li:eq("+e+")").addClass("disabled")},this.enable=function(e){n.find("li:eq("+e+")").removeClass("disabled")},this.hide=function(e){n.find("li:eq("+e+")").hide()},this.display=function(e){n.find("li:eq("+e+")").show()},this.remove=function(t){var a=t[0],l="undefined"!=typeof t[1]&&t[1],i=n.find("li:eq("+a+")");if(l){var o=i.find("a").attr("href");e(o).remove()}i.remove()},n=t.find("ul:first",t),o=n.find("li.active",t),n.hasClass(i.tabClass)||n.addClass(i.tabClass),i.onInit&&"function"==typeof i.onInit&&i.onInit(o,n,0),i.onShow&&"function"==typeof i.onShow&&i.onShow(o,n,l.nextIndex()),l.fixNavigationButtons(),e('a[data-toggle="tab"]',n).on("click",function(t){var a=n.find("li").index(e(t.currentTarget).parent("li"));if(i.onTabClick&&"function"==typeof i.onTabClick&&i.onTabClick(o,n,l.currentIndex(),a)===!1)return!1}),e('a[data-toggle="tab"]',n).on("shown",function(t){$element=e(t.target).parent();var a=n.find("li").index($element);return!$element.hasClass("disabled")&&((!i.onTabChange||"function"!=typeof i.onTabChange||i.onTabChange(o,n,l.currentIndex(),a)!==!1)&&(o=$element,void l.fixNavigationButtons()))})};e.fn.bootstrapWizard=function(a){if("string"==typeof a){var l=Array.prototype.slice.call(arguments,1);return 1===l.length&&l.toString(),this.data("bootstrapWizard")[a](l)}return this.each(function(l){var i=e(this);if(!i.data("bootstrapWizard")){var o=new t(i,a);i.data("bootstrapWizard",o)}})},e.fn.bootstrapWizard.defaults={tabClass:"nav nav-pills",nextSelector:".wizard li.next",previousSelector:".wizard li.previous",firstSelector:".wizard li.first",lastSelector:".wizard li.last",onShow:null,onInit:null,onNext:null,onPrevious:null,onLast:null,onFirst:null,onTabChange:null,onTabClick:null,onTabShow:null}}(jQuery),a.factory("fileReader",["$q","$log",function(e,t){var a=function(e,t,a){return function(){t.resolve(e.result)}},l=function(e,t,a){return function(){t.reject(e.result)}},i=function(e,t){return function(e){}},o=function(e,t){var o=new FileReader;return o.onload=a(o,e,t),o.onerror=l(o,e,t),o.onprogress=i(o,t),o},n=function(t,a){var l=e.defer(),i=o(l,a);return i.readAsDataURL(t),l.promise};return{readAsDataUrl:n}}]),a.factory("extractpdf",["$q",function(e){function t(t,a,l){var i=a||t.name.slice(0,t.name.indexOf(".")),o=e.defer(),n=new FileReader,r=i,s=r+"/"+r+"-address_and_attorney_agent.tsv",c=r+"/"+r+"-application_data.tsv",d=r+"/"+r+"-continuity_data.tsv",p=r+"/"+r+"-foreign_priority.tsv",u=r+"/"+r+"-transaction_history.tsv",g=r+"/"+r+"-patent_term_adjustments.tsv",f=r+"/"+r+"-image_file_wrapper/"+r+"-image_file_wrapper.tsv",h=r+"/README.txt",m=[{label:"README",value:h},{label:"attorney",value:s},{label:"application",value:c},{label:"continuity",value:d},{label:"foreign",value:p},{label:"term",value:g},{label:"transaction",value:u},{label:"imagefile",value:f}];return n.onerror=o.reject.bind(o),n.onload=function(e){n.result||o.reject(new Error("Unknown error"));var t=new JSZip(n.result,{binary:!0}),a={tsvfiles:[],pdffiles:[]};return angular.forEach(m,function(e,l){var i=t.files[e.value];"undefined"!=typeof i&&a.tsvfiles.push({label:e.label,file:i.asText()})}),angular.forEach(t.files,function(e,t){a.pdffiles.push({label:e.name,file:e}),l.extractedfiles++}),o.resolve(a)},n.readAsArrayBuffer(t),o.promise}function a(e,a,l){return t(e,a,l)}return a}]).factory("extractzip",["$q","Upload","$http","$location","toastr",function(e,t,a,l,i){function o(a,l,o){var n=e.defer(),r=function(){return"./proxy/"},s="storage.googleapis.com/uspto-pair/applications/"+a+".zip",c="patents.reedtech.com/downloads/pairdownload/"+a+".zip";JSZipUtils.getBinaryContent(r()+s,function(e,t){e?(alertify.error("Attempt to download from Google has failed! Attempting ReedTech..."),alertify.log("attempting ReedTech..."),JSZipUtils.getBinaryContent(r()+c,function(e,t){e?alertify.alert("attempt to download from Google & ReedTech has failed! Please wait a few minutes and try again, or download the bulk zip file directly"):(console.log("download",t),d(t))})):(console.log("download",t.length),d(t))});var d=function(e){var o=a,r=o+"/"+o+"-address_and_attorney_agent.tsv",s=o+"/"+o+"-application_data.tsv",c=o+"/"+o+"-continuity_data.tsv",d=o+"/"+o+"-foreign_priority.tsv",p=o+"/"+o+"-transaction_history.tsv",u=o+"/"+o+"-patent_term_adjustments.tsv",g=o+"/"+o+"-image_file_wrapper/"+o+"-image_file_wrapper.tsv",f=o+"/README.txt",h=[{label:"README",value:f},{label:"attorney",value:r},{label:"application",value:s},{label:"continuity",value:c},{label:"foreign",value:d},{label:"term",value:u},{label:"transaction",value:p},{label:"imagefile",value:g}],m=new JSZip(e),b=m.generate({type:"blob"}),v={tsvfiles:[],pdffiles:[]},y=function(){return angular.forEach(h,function(e,t){var a=m.files[e.value];"undefined"!=typeof a&&v.tsvfiles.push({label:e.label,file:a.asText()})}),angular.forEach(m.files,function(e,t){v.pdffiles.push({label:e.name,file:e}),l.extractedfiles++}),n.resolve(v)};t.upload({url:"/upload/",data:{file:t.rename(b,o+".zip")}}).then(function(e){console.log("Success "+e.config.data.file.name+"uploaded. Response: "+e.data),y()},function(e){console.log("Error status: "+e.status)},function(e){var t=parseInt(100*e.loaded/e.total);l.progress=t,10===t&&i.info("fetching remote resources..."),30===t&&i.info("loading relevant data schemas..."),55===t&&i.warning("compiling templates..."),75===t&&i.warning("starting the AI engine..."),t<=40?l.progresstype="danger":t>40&&t<66?l.progresstype="warning":t>97?l.progresstype="success":l.progresstype="info",console.log("progress: "+t+"% "+e.config.data.file.name)})};return n.promise}function n(e,t,a){return o(e,t,a)}return n}]),angular.module("llp.extract",[]).factory("extract",["$q",function(e){function t(t,a){var l=a||t.name.slice(0,t.name.indexOf(".")),i=e.defer(),o=new FileReader,n=l,r=n+"/"+n+"-address_and_attorney_agent.tsv",s=n+"/"+n+"-application_data.tsv",c=n+"/"+n+"-continuity_data.tsv",d=n+"/"+n+"-foreign_priority.tsv",p=n+"/"+n+"-transaction_history.tsv",u=n+"/"+n+"-image_file_wrapper/"+n+"-image_file_wrapper.tsv",g=n+"/README.txt",f=[{label:"README",value:g},{label:"attorney",value:r},{label:"application",value:s},{label:"continuity",value:c},{label:"foreign",value:d},{label:"transaction",value:p},{label:"imagefile",value:u}];return o.onerror=i.reject.bind(i),o.onload=function(e){o.result||i.reject(new Error("Unknown error"));var t=new JSZip(o.result,{binary:!0}),a=[];return angular.forEach(f,function(e,l){var i=t.files[e.value];"undefined"!=typeof i&&a.push({label:e.label,file:i.asText()})}),i.resolve(a)},o.readAsArrayBuffer(t),i.promise}function a(e,a){return t(e,a)}return a}]),jQuery.event.props.push("dataTransfer"),angular.module("llp.extract").directive("dropFiles",[function(){var e=function(e,t,a,l){var i=function(e){for(var t=e.originalEvent.dataTransfer.files,a=[],l=0,i=t.length;l<i;l++)a.push(t[l]);return a},o=function(e){e.preventDefault(),t.css({"border-style":"dotted"})},n=function(e){e.preventDefault(),t.css({"border-style":"dashed"});var a=i(e);l.dropFiles({files:a})};t.on("dragover",o),t.on("drop",n),e.$on("$destroy",function(){t.off("dragover",o),t.off("drop",n)})};return{restrict:"A",controller:"DropFilesController",controllerAs:"drop",bindToController:!0,require:"dropFiles",scope:{accepts:"&",dropFiles:"&",main:"&"},link:e}}]).controller("DropFilesController",["$controller","extract","$scope","$timeout","$rootScope","FileUploader","toastr",function(e,t,a,l,i,o,n){var r=this;r.file={},r.dropFiles=function(e){console.log("files.files[0]",e.files[0]),a.$on("UPLOADCOMPLETE",function(t){a.$parent.main.handleFiles(e.files[0])})}}])}(window);