
<div ng-controller="MainCtrl as main">
<div class="alert alert-info" ng-if="notconfigured()">Please configure the +getphd widget</div>
<div ng-if="configured()" ng-bind-html="main.content"></div>
<button class="button button-icon fa fa-print" ng-click="publish(phd)" style="position:absolute;top:-1rem;right:1rem;z-index:1000;" ></button>
 
 <div class="card card-primary card-block btn-glass drop-target" nv-file-drop uploader="uploader"   drop-files="handleFiles(files)"
 style="border: 2px dashed blue;margin: 5px;" ng-hide="phd.file">
    <div ng-controller="pageslideCtrl" >
                <button class="row btn btn-glass btn-primary img img-rounded " ng-hide="phd.file" style="position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;" ng-click="toggle()" ng-class="{'btn-success': (main.progress == 100)}">
        <uib-progressbar class=""  value="main.progress" style="height:30px;margin-autoposition:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;align-self:stretch;" ><i class="fa fa-upload fa-3x">{{main.progress}}</i></uib-progressbar>
        <img src="https://lexlab.firebaseapp.com/img/GoldLogoLong.svg" class="pop img img-rounded pull-right" style="" ng-if="!config.appnum" />
        <!-- <div class="fa fa-download fa-5x pull-right"></div> -->
    </button>
                

    <div pageslide ps-open="checked" ps-key-listener="true" ps-side="left" ps-class="card-dark">
                    <div ng-include="'/getphdwidget/src/phd/step-1.html'"></div>
                    <div ng-include="'/getphdwidget/src/phd/step-2.html'"></div>
                    <upload-q></upload-q>
                </div>
    <div class="row" ng-hide="phd.file">

        <div class="alert alert-danger" role="alert" ng-if="main.error"><strong>Uh oh!</strong> {{main.error}}</div>
        <pre class="alert alert-info" role="alert" ng-if="main.info" style="color:white !important;">{{main.info}}</pre>
    </div>
</div></div>
<div class="card card-fancy card-rounded card-block card-thick" style="text-align: left;color: #444;" ng-if="phd.file">
<button class="alert btn-glass btn-primary img card-rounded row" style="position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:center;justify-content:space-between;flex-direction:row;background-color:#35688F;padding:2px;box-shadow:inset 10px 2px 50px rgba(0,0,0,0.5);border-top-right-radius:6rem;border-bottom-right-radius:6rem;border-left:5px ridge black;" ng-click="main.collapse()">
        <div style="display:flex;justify-content:flex-end;flex-direction:column;align-content:flex-end;vertical-align:middle;align-items:flex-end;">
        <h4 class="card-title ng-binding display-4" style="margin-bottom:0;color: #fff;">US {{phd.application['Patent Number'] }}</h4>
        
        <h5 class="card-subtitle lead ng-binding" style="color:#ddd;">USSN {{phd.application['Application Number']}}</h5>
        </div>
        <img src="/llp_core/img/GoldLion.svg" class="img lionlogofilter" style="width:75px;height: auto;">
        
        <div style="display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;">
          <img src="/llp_core/img/GoldLogoLong.svg" class="img" style="height:45px;">
  
          <img src="/llp_core/img/GoldPhdLogoLong.svg" class="img" style="height:25px;padding-left:2px;">
        </div>
        
        <!-- <div class="fa fa-download fa-5x pull-right"></div> -->
    </button>

<div uib-collapse="collapsereport" class="card clearfix" style="padding:0;margin:0;">
 <uib-tabset class="tabbable" justified="true" type="pills">
   <uib-tab heading="PTO Metadata" class="">
    <uib-tabset class="tabbable tabs-left" >
        <uib-tab class="">
            <uib-tab-heading class="">USSN {{phd.application['Application Number']}}</uib-tab-heading>
            <h4 class="card-title pull-right">PTO Metadata TSVFiles</h4>
            <uib-tabset class="tabbable">
                <uib-tab class="" ng-repeat="file in phd.file" heading="{{file.label | uppercase}}">
                    <pre class="card card-block card-fancy" ng-bind="file.file"></pre>
                </uib-tab>
            </uib-tabset>
        </uib-tab>
        <uib-tab class="ngDialogTab-primary" ng-if="phd.application">
            
            <uib-tab-heading style="" ng-style="" >APPLICATION</uib-tab-heading>
            <h4 class="card-title pull-right">Application Data</h4>
            <table class="card card-default card-block table table-striped table-hover table-condensed table-responsive">

                <tbody>
                    <tr ng-repeat="(key, value) in phd.application">
                        <td><strong>{{key}}<strong></td>
                        <td >{{value}}</td>

                    </tr>
                </tbody>
            </table>
        </uib-tab>
        <uib-tab class="ngDialogTab-info" ng-if="phd.attorney">
           
            <uib-tab-heading ng-style="" >ATTORNEY</uib-tab-heading>
            <h4 class="card-title pull-right">Attorney Data</h4>
            <table class="card card-default card-block table table-striped table-hover table-condensed table-responsive">

                <tbody>
                    <tr ng-repeat="line in phd.attorney">
                        <td ng-repeat="value in line">{{value}}</td>

                    </tr>
                </tbody>
            </table>
        </uib-tab>
        <uib-tab class="ngDialogTab-success" ng-if="phd.continuity">
            
            <uib-tab-heading style="" ng-style="">CONTINUITY</uib-tab-heading>
            <h4 class="card-title pull-right">Continuity Data</h4>
            <table class="card card-default card-block table table-striped table-condensed table-hover table-responsive">
                <thead>
                    <tr>
                        <th><strong>Description</strong></th>
                        <th><strong>Parent Filing or 371(c) Date</strong></th>
                        <th><strong>Parent Number</strong></th>
                        <th><strong>Parent Status</strong></th>
                        <th><strong>Patent Number</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="line in phd.continuity">
                        <td>{{::line['Description']}}</td>
                        <td>{{::line['Parent Filing or 371(c) Date']}}</td>
                        <td>{{::line['Parent Number']}}</td>
                        <td>{{::line['Parent Status']}}</td>
                        <td><a ng-href="https://patentimages.storage.googleapis.com/pdfs/US{{::line['Patent Number'].replace(',','').replace(',','')}}.pdf" target="_blank">{{::line['Patent Number']}}</a></td>
                    </tr>
                </tbody>
            </table>
        </uib-tab>
        <uib-tab class="ngDialogTab-warning" ng-if="phd.foreign">

            <!-- <pre ng-bind="main.phd.foreign | json:4"></pre> -->
            <uib-tab-heading style="" ng-style="">FOREIGN PRIORITY</uib-tab-heading>
            <h4 class="card-title pull-right">Foreign Priority</h4>
            <table class="card card-default card-block table table-striped table-condensed table-hover table-responsive">
                <thead>
                    <tr>
                        <th><strong>Country</strong></th>
                        <th><strong>Priority</strong></th>
                        <th><strong>Priority Date</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="p in phd.foreign">
                        <td ng-bind="p['Country']"></td>
                        <td ng-bind="p['Priority']"></td>
                        <td ng-bind="p['Priority Date'] | date"></td>

                    </tr>
                </tbody>
            </table>
        </uib-tab>
        <uib-tab class="ngDialogTab-danger" ng-if="phd.transaction">
            <!-- <pre ng-bind="main.transaction | json:4"></pre> -->
            <uib-tab-heading style="" ng-style="">TRANSACTION</uib-tab-heading>
            <h4 class="card-title pull-right">Transaction Data</h4>
            <table class="card card-default card-block table table-striped table-hover table-condensed table-responsive">
                <thead>
                    <tr>
                        <th><strong>Date</strong></th>
                        <th><strong>Transaction Description</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="trans in phd.transaction">
                        <td>{{::trans['Date']}}</td>
                        <td>{{::trans['Transaction Description']}}</td>
                    </tr>
                </tbody>
            </table>
        </uib-tab>
        <uib-tab class="" ng-if="phd.imagefile">
            <uib-tab-heading ng-style="">I F W</uib-tab-heading>
            <h4 class="card-title pull-right">Image File Wrapper</h4>
            <input type="text" ng-model="main.query" placeholder="search..." class="pull-right">

            <table class="card card-default card-block table table-hover table-condensed table-responsive">
                <thead>

                    <tr>
                        <!--<th ng-click="reverse = !reverse" class="fa " ng-class="{'fa-chevron-up': reverse,'fa-chevron-down': !reverse}">#</th>-->
                        <th><strong>Mail Room Date</strong></th>
                        <th><strong>Document Code</strong></th>
                        <th><strong>Document Description</strong></th>
                        <th><strong>Document Category</strong></th>
                        <th><strong>Page Count</strong></th>
                        <th><strong>Filename</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="roarevent in phd.imagefile |filter: main.query " class="">
                        <!--<th class=""> <a ng-click="pdfToPlainText(roarevent['Filename'])" getpdftext><i class="fa fa-file-pdf"> {{$index}}</i></a></th>-->
                        <td ng-bind="::roarevent['Mail Room Date']"></td>
                        <td ng-bind="::roarevent['Document Code']"></td>
                        <td ng-bind="::roarevent['Document Description']"></td>
                        <td ng-bind="::roarevent['Document Category']"></td>
                        <td ng-bind="::roarevent['Page Count']"></td>
                        <td ng-bind="::roarevent['Filename']"></td>




                    </tr>
                </tbody>
            </table>
        </uib-tab>
      </uib-tabset>
   </uib-tab>
   <uib-tab heading="PhD Report">
      <uib-tabset class="tabbable ">
        <uib-tab class="ngDialogTab-{{::collection.styleClass}} " ng-repeat="collection in phd.roarmap.collections" collection="{{::collection}}">
            <uib-tab-heading class="pull-right" style="" ng-style="">{{::collection.rid}}&nbsp&nbsp<i class="pull-right fa {{::collection.icon}} label label-{{collection.styleClass}} label-pill">{{::collection.roarlist.length}}</i></uib-tab-heading>
            <h4 class="card-title pull-right fa {{collection.icon}}">{{::collection.rid}}</h4>
            <div style="width: 100%;" class="reventlist">
                <roar-event ng-repeat="event in collection.roarlist" id="{{event.id || event}}" style="width:19.5%;"></roar-event>
            </div>

        </uib-tab>
        <uib-tab class="" >
            <uib-tab-heading class="pull-right">ROAR
                <label class="label label-info label-pill pull-right">{{::phd.imagefile.length}}</label>
            </uib-tab-heading>
           
            <uib-tabset class="tabbable tabs-left">
                <uib-tab ng-repeat="roarevent in phd.roarmap.roarevents" select="event = Collection(roarevent)">
                <uib-tab-heading style="max-width:14%;transform:scale(0.75);"><roar-chip id="{{roarevent.id || roarevent}}" class="" ></roar-chip></uib-tab-heading>
                
                    <iframe src="{{event.media}}" class="card card-block card-fancy pull-right" style="width:48%;"></iframe>
                    <iframe src="{{event.txt}}" class="card card-block card-fancy pull-right" style="width: 48%;"></iframe>
                
                </uib-tab>
                
          </uib-tabset>
            
        </uib-tab>
      </uib-tabset>
   </uib-tab>
   
        <uib-tab class="">
           <uib-tab-heading class="" ng-style="">US {{phd.application['Patent Number']}}</uib-tab-heading>
            <iframe src="{{phd.patent.media}}" class="card card-fancy col-sm-5" style="min-height:500px;"></iframe>
            <iframe src="{{phd.patent.txt}}" class="card card-fancy col-sm-5" style="min-height:500px;"></iframe>
            <!--<tabset>
                <tab heading=".pdf">
            <div filepicker-preview url="phd.patent.media" style="width:100%; height:400px"></div>
           </tab>
           <tab heading=".html">
            <div filepicker-preview url="phd.patent.srcdoc" style="width:100%; height:400px"></div>
           </tab>
           <tab heading="gtxt">
            <div filepicker-preview url="phd.patent.googlepagetext" style="width:100%; height:400px"></div>
           </tab>
           <tab heading=".txt">
                <div filepicker-preview url="phd.patent.txt" style="width:100%; height:400px"></div>
               </tab>
           </tabset>-->
           </uib-tab> 
    </uib-tabset>
</div>
</div>
