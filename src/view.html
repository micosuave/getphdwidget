
<div ng-controller="MainCtrl as main" ng-cloak>
<!--<div class="alert alert-info" ng-if="notconfigured()">Please configure the +getphd widget</div>-->
<!--<div ng-if="configured()" ng-bind-html="main.content"></div>-->
<!--<button class="btn btn-glass fa fa-print" ng-click="publish(phd)" style="position:absolute;top:-1rem;right:1rem;z-index:1000;" ></button>-->
 
 <div class="card card-primary card-block btn-glass drop-target" nv-file-drop uploader="uploader"   drop-files="handleFiles(files)"
 style="border: 2px dashed blue;margin: 5px;" ng-if="main.showupload" ng-hide="phd.patent">
    <div ng-controller="pageslideCtrl" >
                <button class="row btn btn-glass btn-primary img img-rounded " style="width:100%;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:center;flex-direction:row;" ng-click="toggle()" ng-class="{'btn-success': (main.progress == 100),'btn-danger':(main.progress === 'failed')}">
        <uib-progressbar class="btn-glass fa fa-3x" ng-class="{'active':(main.progress < 100)}" ng-if="main.progress" value="main.progress" style="height:40px;margin:auto;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;align-self:stretch;" type="{{main.progresstype}}" > <i class="fa fa-upload fa-3x">{{main.progress}}<span ng-show="main.progress">%</span></i></uib-progressbar>
        <img src="https://lexlab.firebaseapp.com/img/GoldLogoLong.svg" class="pop img img-rounded pull-right" style="max-height:100px;" ng-if="!main.progress" />
        <!-- <div class="fa fa-download fa-5x pull-right"></div> -->
    </button>
           <div class="row btn btn-glass btn-info" style="position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:center;flex-direction:row;" ng-if="main.extractedfiles">
             <uib-progressbar class="btn-glass fa fa-3x" ng-class="{'active':(main.progress < 100)}" value="main.progresstwo" max="main.extractedfiles" style="height:40px;margin:auto;position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:stetch;justify-content:stretch;flex-direction:row;align-self:stretch;" type="{{main.progresstype}}" > </uib-progressbar><i class="fa fa-refresh fa-3x fa-spinner fa-spin"></i><i class="fa fa-3x">{{main.progresstwo}}/{{main.extractedfiles}}</i>
             
           </div>

    <div pageslide ps-open="checked" ps-key-listener="true" ps-side="left" ps-class="card-dark">
                    <div ng-include="'/getphdwidget/src/phd/step-1.html'"></div>
                    <div ng-include="'/getphdwidget/src/phd/step-2.html'"></div>
                    <button class="button" ng-click="toggle()">Close</button>
                    <!--<upload-q></upload-q>-->
                </div>
    <!--<div class="row" ng-hide="phd.file">-->

        <!--<div class="alert alert-danger" role="alert" ng-if="main.error"><strong>Uh oh!</strong> {{main.error}}</div>-->
        <!--<pre class="alert alert-info" role="alert" ng-if="main.info" style="color:white !important;">{{main.info}}</pre>-->
    <!--</div>-->
</div></div>
<div class="card card-fancy card-rounded card-block card-thick" style="text-align: left;color: #444;" ng-if="phd.file">
<button class="alert btn-glass btn-primary img card-rounded row" style="position:relative;display:flex;display:-webkit-flex;align-items:center;align-content:center;justify-content:space-between;flex-direction:row;background-color:#35688F;padding:2px;box-shadow:inset 10px 2px 50px rgba(0,0,0,0.5);border-top-right-radius:6rem;border-bottom-right-radius:6rem;border-left:5px ridge black;" ng-click="main.collapse()">
        <div style="display:flex;justify-content:flex-end;flex-direction:column;align-content:flex-end;vertical-align:middle;align-items:flex-end;">
        <h4 class="card-title ng-binding display-4" style="margin-bottom:0;color: #fff;">US {{phd.application['Patent Number'] || (phd.patent.number | number:0) }}</h4>
        
        <h5 class="card-subtitle  ng-binding" style="color:#ddd;"><span class="lead">USSN {{phd.application['Application Number']}}</span></h5>
        </div>
        <img src="/llp_core/img/GoldLion.svg" class="img lionlogofilter" style="width:75px;height: auto;">
        
        <div style="display:flex;flex-direction:column;align-items:flex-start;justify-content:space-around;">
          <img src="/llp_core/img/GoldLogoLong.svg" class="img" style="height:45px;">
  
          <img src="/llp_core/img/GoldPhdLogoLong.svg" class="img" style="height:25px;padding-left:2px;">
        </div>
        
        <!-- <div class="fa fa-download fa-5x pull-right"></div> -->
    </button>

<div uib-collapse="collapsereport" class="card clearfix" style="padding:0;margin:0;">
 <blockquote><h4>{{phd.application['Title of Invention']}}</h4><p><cite>{{phd.application['First Named Inventor']}} <small><emphasis>Issued&nbsp&nbsp&nbsp&nbsp{{phd.application['Issue Date of Patent']}}</emphasis></small></cite></p></blockquote>
 
 
 
 
 <uib-tabset class="tabbable" justified="true" type="pills">
   <uib-tab heading="PTO Metadata" class="">
    <uib-tabset class="tabbable tabs-left" >
        <uib-tab class="">
            <uib-tab-heading class="">USSN {{phd.application['Application Number']}}</uib-tab-heading>
            <h4 class="card-heading card-title pull-right">PTO Metadata TSVFiles</h4>
            <uib-tabset class="tabbable">
                <uib-tab class="" ng-repeat="file in phd.file" heading="{{file.label | uppercase}}">
                    <pre class="card card-block card-fancy" ng-bind="file.file"></pre>
                </uib-tab>
            </uib-tabset>
        </uib-tab>
        <uib-tab class="ngDialogTab-primary" ng-if="phd.application">
            
            <uib-tab-heading style="" ng-style="" >APPLICATION</uib-tab-heading>
            <h4 class="card-header card-title pull-right">Application Data</h4>
            <table class="card card-block table table-striped table-hover table-condensed table-responsive">

                <tbody>
                    <tr ng-repeat="(key, value) in phd.application">
                        <td><strong>{{::key}}<strong></td>
                        <td >{{::value}}</td>

                    </tr>
                </tbody>
            </table>
        </uib-tab>
        <uib-tab class="ngDialogTab-info" ng-if="phd.attorney">
           
            <uib-tab-heading ng-style="" >ATTORNEY</uib-tab-heading>
            <h4 class="card-header card-title pull-right">Attorney Data</h4>
            <table class="card card-block table table-striped table-hover table-condensed table-responsive">

                <tbody>
                    <tr ng-repeat="line in phd.attorney">
                        <td ng-repeat="value in line">{{::value}}</td>

                    </tr>
                </tbody>
            </table>
        </uib-tab>
        <uib-tab class="ngDialogTab-success" ng-if="phd.continuity">
            
            <uib-tab-heading style="" ng-style="">CONTINUITY</uib-tab-heading>
            <h4 class="card-header card-title pull-right">Continuity Data</h4>
            <table class="card  card-block table table-striped table-condensed table-hover table-responsive">
                <thead>
                    <tr>
                        <th><strong>Description</strong></th>
                        <th><strong>Parent Filing or 371(c) Date</strong></th>
                        <th><strong>Parent Number</strong></th>
                        <th><strong>Parent Status</strong></th>
                        <th><strong>Patent Number</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="line in phd.continuity">
                        <td>{{::line['Description']}}</td>
                        <td>{{::line['Parent Filing or 371(c) Date']}}</td>
                        <td>{{::line['Parent Number']}}</td>
                        <td>{{::line['Parent Status']}}</td>
                        <td><a ng-href="https://patentimages.storage.googleapis.com/pdfs/US{{::line['Patent Number'].replace(',','').replace(',','')}}.pdf" target="_blank">{{::line['Patent Number']}}</a></td>
                    </tr>
                </tbody>
            </table>
        </uib-tab>
        <uib-tab class="ngDialogTab-warning" ng-if="phd.foreign">

            <!-- <pre ng-bind="main.phd.foreign | json:4"></pre> -->
            <uib-tab-heading style="" ng-style="">FOREIGN PRIORITY</uib-tab-heading>
            <h4 class="card-header card-title pull-right">Foreign Priority</h4>
            <table class="card card-block table table-striped table-condensed table-hover table-responsive">
                <thead>
                    <tr>
                        <th><strong>Country</strong></th>
                        <th><strong>Priority</strong></th>
                        <th><strong>Priority Date</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="p in phd.foreign">
                        <td ng-bind="::p['Country']"></td>
                        <td ng-bind="::p['Priority']"></td>
                        <td ng-bind="::p['Priority Date'] | date"></td>

                    </tr>
                </tbody>
            </table>
        </uib-tab>
        <uib-tab class="ngDialogTab-danger" ng-if="phd.transaction">
            <!-- <pre ng-bind="main.transaction | json:4"></pre> -->
            <uib-tab-heading style="" ng-style="">TRANSACTION</uib-tab-heading>
            <h4 class="card-header card-title pull-right">Transaction Data</h4>
            <table class="card  card-block table table-striped table-hover table-condensed table-responsive">
                <thead>
                    <tr>
                        <th><strong>Date</strong></th>
                        <th><strong>Transaction Description</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="trans in phd.transaction">
                        <td>{{::trans['Date']}}</td>
                        <td>{{::trans['Transaction Description']}}</td>
                    </tr>
                </tbody>
            </table>
        </uib-tab>
        <uib-tab class="" ng-if="phd.imagefile">
            <uib-tab-heading ng-style="">I F W</uib-tab-heading>
            <h4 class="card-header card-title pull-right">Image File Wrapper</h4>
            <input type="text" ng-model="main.query" placeholder="search..." class="pull-right">

            <table class=" table table-hover table-condensed table-responsive">
                <thead>

                    <tr>
                        <!--<th ng-click="reverse = !reverse" class="fa " ng-class="{'fa-chevron-up': reverse,'fa-chevron-down': !reverse}">#</th>-->
                        <th><strong>Mail Room Date</strong></th>
                        <th><strong>Document Code</strong></th>
                        <th><strong>Document Description</strong></th>
                        <th><strong>Document Category</strong></th>
                        <th><strong>Page Count</strong></th>
                        <th><strong>Filename</strong></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="roarevent in phd.imagefile |filter: main.query " class="">
                        <!--<th class=""> <a ng-click="pdfToPlainText(roarevent['Filename'])" getpdftext><i class="fa fa-file-pdf"> {{$index}}</i></a></th>-->
                        <td ng-bind="::roarevent['Mail Room Date']"></td>
                        <td ng-bind="::roarevent['Document Code']"></td>
                        <td ng-bind="::roarevent['Document Description']"></td>
                        <td ng-bind="::roarevent['Document Category']"></td>
                        <td ng-bind="::roarevent['Page Count']"></td>
                        <td ng-bind="::roarevent['Filename']"></td>




                    </tr>
                </tbody>
            </table>
        </uib-tab>
      </uib-tabset>
   </uib-tab>
   <uib-tab heading="PhD Report">
      <uib-tabset class="tabbable " justified="true">
        <uib-tab class="ngDialogTab-{{::collection.styleClass}} " ng-repeat="collection in phd.roarmap.collections" collection="{{::collection}}">
            <uib-tab-heading class="pull-right" style="" ng-style="">{{::collection.rid}}&nbsp&nbsp<i class=" fa {{::collection.icon}} label label-{{collection.styleClass}} label-pill">{{::collection.roarlist.length}}</i></uib-tab-heading>
            <h4 class="card-title pull-right fa {{collection.icon}}">{{::collection.rid}}</h4>
            <div style="width: 100%;" class="reventlist">
                <roar-event ng-repeat="event in collection.roarlist" id="{{event.id || event}}" style="width:19.5%;"></roar-event>
            </div>

        </uib-tab>
        <uib-tab class="" >
            <uib-tab-heading class="pull-right">ROAR
                <label class="label label-info label-pill pull-right">{{::phd.imagefile.length}}</label>
            </uib-tab-heading>
           
            <uib-tabset class="tabbable tabs-left">
                <uib-tab ng-repeat="(key, roarevent) in phd.roarmap.roarevents" node="{{roarevent.id || roarevent}}" select="node.isActive = true" deselect="node.isActive = false" active="node.isActive">
                <uib-tab-heading style="max-width:14%;transform:scale(0.75);">
                  <div id="" uib-dropdown uib-keyboard-nav dropdown-append-to-body >
                        <a uib-dropdown-toggle class=" fa {{rightmenu.icon}}"  ></a>
                           <ul class="uib-dropdown-menu">
                               <li class="{{menuitem.styleClass}}" ng-repeat="menuitem in rightmenu.items">
                                   <a ng-click="menuitem.onClick(dashb)" class="fa {{menuitem.icon}} {{menuitem.styleClass}}">&nbsp;&nbsp;&nbsp;&nbsp;{{menuitem.label}}</a>
                                <li>
                            <li><div uib-dropdown uib-keyboard-nav dropdown-append-to-body>
                       <a uib-dropdown-toggle   >Paste from Clipboard&nbsp;&nbsp;&nbsp;&nbsp;<i class=" fa fa-chevron-right"></i></a>
                           <ul ng-controller="ClipboardMenuController as cmc" class="uib-dropdown-menu dropdown-menu-right">
  
   <li class="" ng-repeat="(key, item) in cmc.clipboard" node="{{item.id || item}}">
   
      <a class="fa fa-external-link" title="popout" ng-click="cmc.popout(item)"> {{node.title | limitTo:25}}</a>
      <a class="fa fa-paste" title="paste reference" ng-click="cmc.paste(item, page)"></a>
      <a class="fa fa-copy" title="create a new copy" ng-click="cmc.fork(item, page)"></a>
  </li>
</ul></div>
                        </li>
                            </ul>
                        </div>
                  <roar-chip id="{{node.id || node}}" class="" ></roar-chip></uib-tab-heading>
                <div style="max-width:75%;" class="pull-right">
                    <iframe ng-src="{{node.media}}" class="card card-block card-fancy pull-right" style="width:45%;" ng-if="item.active"></iframe>
                    <!--<iframe ng-src="{{node.txt}}" class="card card-block card-fancy pull-right" style="width: 45%;" ng-if="item.active"></iframe>-->
                </div>
                </uib-tab>
                
          </uib-tabset>
            
        </uib-tab>
      </uib-tabset>
   </uib-tab>
   
        <uib-tab class="">
           <uib-tab-heading class="" ng-style="">US {{phd.application['Patent Number'] || phd.patent.number}}</uib-tab-heading>
            <iframe ng-src="{{::phd.patent.media}}" class="card card-fancy col-sm-5" style="min-height:500px;"></iframe>
            <iframe ng-src="{{::phd.patent.txt}}" class="card card-fancy col-sm-5" style="min-height:500px;"></iframe>
            <!--<tabset>
                <tab heading=".pdf">
            <div filepicker-preview url="phd.patent.media" style="width:100%; height:400px"></div>
           </tab>
           <tab heading=".html">
            <div filepicker-preview url="phd.patent.srcdoc" style="width:100%; height:400px"></div>
           </tab>
           <tab heading="gtxt">
            <div filepicker-preview url="phd.patent.googlepagetext" style="width:100%; height:400px"></div>
           </tab>
           <tab heading=".txt">
                <div filepicker-preview url="phd.patent.txt" style="width:100%; height:400px"></div>
               </tab>
           </tabset>-->
           </uib-tab> 
    </uib-tabset>
</div>
</div>
